<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-barber-shop.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"19980118.xyz","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"show_result":true,"style":"mac"},"bookmark":{"enable":true,"color":"#ffc0cb","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>


<!-- Chatra {literal} -->
<script>
    (function(d, w, c) {
        w.ChatraID = 'QoLQx5ntEgvMDisbP';
        var s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = 'https://call.chatra.io/chatra.js';
        if (d.head) d.head.appendChild(s);
    })(document, window, 'Chatra');
</script>
<!-- /Chatra {/literal} -->


<link rel="canonical" href="https://19980118.xyz/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://19980118.xyz/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/","path":"2024/01/27/Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot/","title":"Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot | 魔装少男的博客</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?497aa34d870c1d7996acc609bf1d5afd"></script>




<link rel="dns-prefetch" href="https://comm.19980118.xyz">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<!--我自定义的搜索-->
<script async="true" src="https://pengxiandyou.github.io/gitee-pengxiandyou/src/js/search-my.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $(document).on('click', '.fold_hider', function(){
        $('>.fold', this.parentNode).slideToggle();
        $('>:first', this).toggleClass('open');
    });
    //默认情况下折叠
    $("div.fold").css("display","none");

    //图片转圈加载
    $('article img[data-src^="http"]').attr("myImgName","MyImg");
    $('article img[data-src^="http"]').attr("retry","10");
    var imgdefereds=[];
    $('article img').each(function(){
        var dfd=$.Deferred();
        $(this).bind('load',function(){
          dfd.resolve();
           $(this).attr("myImgName","");
        }).bind('error',function(){
         //图片加载错误，加入错误处理
         
         var retry = parseInt($(this).attr("retry"));
         if(retry > 1){
            var d= new Date();
            $(this).attr("src",$(this).attr("src")+"?"+d.getTime());
            $(this).attr("retry",retry-1);
         }else{
           $(this).attr("retrysrc",$(this).attr("src"));
          $(this).bind('click',function(){
              $(this).attr("src",$(this).attr("retrysrc"));
              $(this).attr("retry","10");
          });
          $(this).attr("src","data:image/image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAA+CAIAAAAjwYdJAAAACXBIWXMAAAsSAAALEgHS3X78AAAgAElEQVR4nGW9W6yl2XEe9n211r/3uU13T08PZzijGXEoUqJkS4oliLbFQLIdGLYjwAoQWw824EdfAPvBQAIEfkvykDcjgAIEyENgOECEwHacODcHMmzFomwTkeALJcgkLUqiyBFH5PT09fQ5e/+rvjxU1fp3M40hu0/3Pv+/Vq2qr766rDr0n/05ACAhQQ4AAiSQICAB9WX8AYQ1QIBjAAQY30NIMIMLqL+hgYI7BJgBhAaw/TuGoxs8vo5lABKM28fmlxKEXAlEd9Hi7XQp3+5gvBdwgYR7fTkoCMp3u8AGOHwFW65cAAUilxoLy72z/ixIuVmhvsTJ23M3ACAHSVAesiKI/FhsL+RgBgk0qJYXH9M8BcJysxjz2wEgdwqBBih3HdL2UU/0sZ1ligB5QuD2uClQEiJaPGh+nHDAAJt/P/K8cztKcWA+kBBgzFNxbbIJIcaXIkTQ8qQJyIX5atuWmkL32rlDmm8TLT8mpDggWIsHpo6yPh5vN6KF9AUjfOQC40jCJHIjnic6t1k7zd/jRQBaB+t74/zGQFtyPbGwVBrmGiyEOeDKvzzVtpPjzsMaA77CvddumcoIAHGKZc0M5a0DDmtOSxLkoG0CleAA/KUTDXiAI9QC2j5sYUnKv4hPhrBSOFafL3kRMMYL0yY0X+2wBio3FappgERJMDTCBRgszt5LNVuppkFDIcQQNA1rWXxIABPSGjDyRanfDgH9ZEnGE0irN/L/p+UAxrr9OZ4fei/WIq1gwyEpT4V5EPEK10vPhAxmKVB6wq9x+8TcT2qlh8pIoap1rpv6oE6UqYOBDXEMXuo2Fd99apXAVP/aPGGJNnXKuZh1hQgKAodDLghmCTCxHh+A554FhRRcuSMXAzNSUx0WQOdprO5M1C0UCXSFGFgKA30zIBVytjSVlL5K9CQQONROBFsnlMBeYsk9WH07EnjiezRBOJ4M6eRcSaaTNbQWGyCsJQamz4tHtHyBtc1e8wDGibptr86/lLZ/Za3SEvs4tawWBBIU4DCDheZ2mKXHxMsPDBkl5ECtMT6Wjo2wngjsgsc6hc0QYoNQmFcrBxTkQIUMkibMBrYF2oOpKxppT7Hf9EqCgOEAlSYxeYzDB8wSnF9yiMj1g3BPKwxtC5hJH+pgAB4Vpxj7HYMkJA4Pg1GC3MDwnr5n6lS6oHIwoZsq9Ei35fWxBgC+biwsrDAJS/m/OOPakiYjO/UL7sB0bAJG4Ype0utpoHlOBpdAGBNR2MsnJb4xICeEmS7NoIHWip6UpDS3D1hpVZIJR5vabCfWVruIjWwurA7DCslQWnL6/Pw8BJmUhsiR5jTKUieqB0C6cpUqVyIAFMWTV4V36KccmITyQQZjCh0AydLIVMlwzD5gwBgg4KBRqexIlxZSThwm02+Q7jLSpekjjXJgTOftyZhQtkeHxADb9J3h4Od5FxMBMZxkvFACU8MBH4mzMExHq+I1HCm1ycNTNpMzC2YEFei9rmkV1ophTeJTfm11mimYbRIxVswS0ILcl05YiI9NdGK+GqVhtefk117SkFxJqSCFE+sZ86Stqpx26W8BlKapqRQiPuROSTQYNQ9eSJeWLMPRGiRlkKBpV4QkC+UHK9qJtzfSPWGMDO0U68gDGLx2qnINhZaCT00SmAGPUS6YMXjKSAIpOCM8Cn/svoVA6SZAmiiQGgMS3PIzUijfRh7jlyeZ0LQTaTva0h14qU58f5xWgJ9xY/hSxnXuGf+RIjG0HQlJCDS5SNABU4cGaGhU0ISJhBNUzeBjWnmaNQVKXi659kBCMGhQFds6wTRNypFQkMgj1WrlImRBs52KDU3KqjD9oDzhgIo2cxNfIHg4YwcsHlZRowQHafKR/jVZU9i0GKoQLiY3VVSWRQhUf5kOYmBj/icmMbxCrjiYAj+ekIkTvw64JLjHvugiBevwEYqaQfB6jK2RDhhGhPiSu8yS3LhbvMYAscdrSJNG2WhJKo1DlMQ8RQaH3uh+RKQWZiWJcpVRZZKhjECpAoQBo/xTBIrhsTRo1KgTgoNJoSmICYPzaNJQinokDTTDEAmt6/aZCCWHy7S523i7Cwz/QpC0BkhysBUI1rvm+TGcVrGNODA/ybQsXcMRXEsu9yCDHJKVSmpgCM3cV8h9ONzd2EURLnFdlW4vUhZhewa4aHARDhXFGGOVEwTNSMYem3UM0UwSZCmgDGkcFtzPNclz8YDU2Q18gMB/8hTTg6+mngagxe68w0RwBtgYiYqaaZq0itKYsP3yRJAyUqowOpxsWjakUQAbUOLBa4DVEwBQekzCXQ7QmUFFqfZUdJbzy8gw2AbhpQEqgFEZevliUAKxeooIkoYT5gOEVg1f4XJ5uBQJdApD0CQCshYZsUbCLLCYJOQCPCj1cFkjlVyrNw7vsC6tYVVUCCn8kTIElMMdY8ClJGFOVTQ2XfKMZFjsIHEePhMlrVOR6RyAKakmCActAb8WnRw4TxWV08ujyqSjABR1LM2KoCh1VGV5ABwldKb6BD+YK69850uswyrhFbSrtaAz6fU3y55JSsu/K+5Tj6dgkGs9OCl4Yc+6Hg8rXMfVw44Z/yyQhoRbktY7BZo1wtoSSJBCqBBGGrTW2cxC+xg5MwAOZ+VpsZFAOdaBMXQ8jHV1Ai6XTJLn+VMuRGQm0mgwtgRcwQSR7t5AW/bWm3Wg9SQyJDSS/YZCuGBkOKSEmu1k4oUngAwkTdqUjJCGA8LI8FGSCLdGuSnoUrB5vpQIA2DEKEoRgvNyEyyvjxLoRl8zzVmPIV3pG+RDlTaXY7hvTs7hONy+uH7+/PpwO9bjkBfS+FweQaPRSGskzay33pr1vnTrHvFBJgAMgJmh9aUvJGToG2FLrPfKZnji883NejjcHm6OYwwfdHcaxoAPecTVnrsNXge21hpl1iLgdzaXGrk7G2e73S5UZ1nqu4q+j+TlGMWhIBXDTGlWUKeIzaaH8AztCbi71uPwgREOUA6JENhcII3hzN1AEmY9ZBp2HZajYIdSJ9kXqEFA27Rq04xkJsgwAaqcCeRDgNw14n8jI4mgJ/Lj4fbh048eP3707MX1cT2IoEyQKIORjJUYzQgjjc1aW1pflt1u2e32Z91ogLclhNRpy/7c9m1I8NHYe621hFiwTJfGOm6unz97en19fXt4cVwPx+GU5D6imCO5XB7O2V0qjKeZLX1Z2mLBEgT03Z3j2l55pbdudX5ldsqINTzi8C1hMkayWRbkphzn4QYzGKARGsOPt7fH4+061nW4fPWM3jKXwihwZSYIRrPWjGSjpdttFDxNB+i7xkglNAqiZXQ+RsVIwKh4C5ksyqSwAHeO1d1dPtwBWcR37sL68PH7v/GNr3745KPb41ESYeH5RDOgsxnNJZhZEjujWbe2tOVs2Z+fnV9dvHK23wsNoNF6352TbGaNzRZp9KIPBj9yBKqIoXfHw+OPPnz48NuPnz26PdwMH0OxTod8AMMdvgpyDywarkFzLOqLlkX7i+Vsf3H78Fxr3+0vOnS532HZY+nIqExwKZMqTGcWJMUM69i8ayCbJIHydQypPHXCAIFx8+L6+vr5ze3t4XhY13VohOPwk1CeQNYviQawNaMtfVl2+9AZk5yN1lprl2d+Riz7s8riDKiyiUCGSYFBtIoz4fBQO7mvebpDY6VF9gfN/PkP/6Pd8jufXscnB8ZR44hx1HqErxhHjCP9iLHGl/QVY4WONlb6Sl95vfLG2wu/eEV3z3j38PzSsLTdno19v0A7ADDrGCMiGdLUxAB1IzCeXX/j6w9/7dHzDw52jcuVO7ed953bTn3nfS/bq++x7NXO0PdaztH21jpgHoEHTaA9/fL+K//LG7j14/HO6qs0tkpOCGuFUxhZJMGka5mckQAHwxdIcB9y+XoUUUm7QeKwHh9/9OFHjx8+vblej7eeAOOqGqJoSCcI0BzeQNCa2c7asuyXZdf7Et7YWj9f9ub3Ijtuy1K0nvDg5i5pQDQzACvg8kjMQZS5HGOVNMZ6HEdK5myLEcbzg735weJrC8KKSKhHtM0Z+2z6rUyalLKHOwH0nPxWb+3pv/mup//yE1CjvAEzUurwAY3MPzCIuen84Yt3//bgR+/Q306CRmVQY1UbUPl3Y9ZWiw2xx5+NAHn15u351aPjkz7WG18PPtbmK44uabiP4e5jSJLMFc7PRkJuxseQkyO8pvsKjHGUw3xVEA8SZ8+f4rc/bN94ev70sBwkB+RWUkIGZWnCpEFGgh6oeiBX8tiWhfvj07OnH1y21u9d3d/vdvvdMpadjeEu93XIUQTUTaaMQAIZHIKZhWDkGr6OdcjHWAe8Q4ChWx/XbLLg1aQ00vvDlKeIIpBWrmi6/ToSkJQRrfPux2/81+TyThhACs0AdQynWUa6NJAy4N432/1nu7UlXy41KsqdzB8Z9ooaABWBFkQOgqATgDU2PxyfHQ4X43izjsNxvbW1Sbg9Hg7r8Xg4rGMdYwgyNnoasWoXLpX6iBKNLrivGsOYYUO/0P6P/uNLPrvwGQkwQ+Nc78weAWikoHWGvNvvOpBPofaFn726fnhn6f32cOc4Lpb19rjeHg+36/Ah15DLKdEsfDlBkZkzArvA1iJHNORjHF0uQOYQMTh2z7cqeB1nMAWetNIwql5IchM4m+4eHjGcmVmjgYsNB1u3rD7IYdbhUqZ0g80TcvLYDDJ3BygrYSuzD3CWSsGr4pzJxKQZU54EoMPt9fHw/DhufRxcYx3H2xcvnjx78vzF9Yv14GNgRKtE5YkUACMBdPdwmCIsqxVyhw9r7K0trV+crVdXqw+Dw8HckWa6qyQJEI3cKXjZVIb8p8h7NJD7/dMXY/Hj83F4sR5vD9Tti+sXNzc363rw4XIoshARb6WPi/wWjQaiGVHhFTR8hcbSrXfbd2v75/ui45V5mCvZqt+z0MttK4mkZKW24KRxwCAazdBiKZABfS6hssQCAVsy4crtFRPkqlgFyCPji8yMsdIRmXCIkJ0m+OpaoZUQ5Le31x98+P63Hn7r8fXT2+OB7lCUJNPqVEXsSuIylYpslZJqdOv9rLXzZefnfNBEEXKruheqfBYHbQlCDqzkSMqsVEVHkOssi6+HW/MXxivh4H7z7NnzDx8/fPLs6fXti9VHhEOs1ghD5DhpIGkwGtishfdq1kEIq2nsGne97XvbXR12mWMLGZceRrS1/bmQ51RJkV64Gj5ACEeaILmhojVCQK9csZMmgi60cMql8oGXLGMsmc9CXRQQQsWyrJOcNj9JU2vs9G7emsZbv3lz9dX2zsP7fnNPPr+hvGOEG1syztPbCNOrBwdxHZ7Z+79gz59e7F/sGRncWZLM49PMa+VJS8SxXFn1IGyOjnlcrl3DuWlZYO999QYf8Pmz/YujHbUeMY5YB3SErxwr1kEdOYZpxVgdq2mYRnSa0GSdNKIZl972rZ8vy90HfBW5aXHzJTPSj8x7yWXWbacPjm8oDCC1GrAKTjkZWxcY5cKxgtnUkucywWeDB6+OAKiaMsq4g+DReAIyZeMA2LhfRGJP3y1uf+CLZ8vTJUBOTWU/c7Un6cWXvOTL/tLBFRAeP/n257s1q76QOlYh6ral+EVKszTM+ejt/2mAkYNUB1rD2c4uP3Zz/uO/vh/jrsM1Ge/Mk2Iy/8SNALFs5mEc81jlR/cjjs/4tf+9rdfne7Vq30T1eka4BUVDkawaxgA0ZqnAMxG6CSa1VEcCNAbIOmSB1x0QmyUDR6Wg3ap5wkvXo2qryK674B41JhqjyqcCq1MsISFrWnbOpqWpt7Wde9S7ZjBQ+sttR9sm+PKXGTEBIJqofR/n5mccKdT56nCH2Ze1PTi779JIZhYGqTT15yan+VnTcnFoO/BIDlnApxInKm81zW4yQxV1ogCDZfXdYGbPfvXm2ZeWfoaITCYMVx1HEsfgukYDGQlpkKZdRzOKWYSs4813ySmC1mjWQAs0lXcgSGqiNrMo29LXysoqs3fGHe64OdhHT5bffdgMeuvBeudq3S1Ei3KrwBM3DaBxWaSmRjesZoqq9FYntaITIZAQUcpq5vrjI76pD2WEScRK23MebXGrSaskIT44jyBgOeKDeSjlVEH0ZmZo5m05pJ8jJRnTXwbXPFk2U0hIywxkYv29yEZa4yI/M9+fy4BRSBs5NgASh/PDj/hf/x9vS/yP/9CjJ9f6+S/ee/VCf/WnvnFxJqta2MkvEsRa2xBklj0iQEcFmmF5qVKy6PQRUK03kUjicD583P67n3/jn/zag8MwiBfL+JnP/u6f+clvXZ6T0buXcYmRJIaIXZdDhmF0GOgiWc3gE+szV4eiVACErUqdXDDDEhkoOuQGN9tOCumGVboNeRs6QX6BpJnICR0V7oXui91g5gZnOwYN46YboY7h3mO/adEn/b/TyPK3aMME4S9k8H5WeTiW24g1i+549NS+8NU7h9HOuj7/lVcOo33Xq+t6NJ2pXpg6imrAwdqiJGdZRwhDVwdJ962OhFAsCyZevRNzX7i5tb/5v731//zbj907Wz/7qUc3q/2/v3Hnv//F77p/Of7Uj3/UTAWVqGZpkuhNjTCITVs1FqXf9QrRJ1xHRB1Pyz6IErPF95oAydEEm43ZdcZUFC7kjhc3+OJvnh8HPvXW4XDkF750+eoFfvKHn3CnVmCTJDFlJjMnHBpc4iqG6zvtxoN8KkE6ukFEnOxuW04eA4FxEDTafp4+q6AaySw4+PyWq+jSL3zp7uVeP/zu8/uXoy8qZsTpzFiy8VHBh1mK1AHzTlbYMRwGwCO1kHqyEXM4MNx+9Wvnv/Tl18+a/tM//Vuf/u5nY/B//MWP/YMvvPkPfvljf/RHPtr11NfM5QcnIa2pGi1HO/W0J+oTApsJjvqX5AGTZdqWmUbCDAFTMfukKkhkNxe//nv9b/xP741hf+mPvP/3f+XV9x9d/HvvvPjx3/e4L5xqhpfWRKMYHXm97nwkHqTVQhDo02BCPysWZhlMBmGVggKgAwm1nSaSs4K1AjIcVoNI2cXZ+p//2d/55JvPz3Zjv0Qm+4Q48kQ5V8LhPRS2bqBY66mallFJbsGrgnzKlwR3/vJXX3HwrXs3Rx//9msX14e2SGb47Y/Onj5bXrm6LRhF2SZAskfS2TX/Etv2Zl1eMvcgwNFkouhfqAfy1JTzf4PmIznhVI8TNJZwHHRxCH/3l1//8Nn+crde7VbLJvlSRL50ymxiuIndSddKLlIEXBiyddXtrX3rcX903c53/vrd9fJ8LB3N0Aqjw2NUTzL8qAbYrhrNToEhU1AYI2qF+rFPXr/38evLc3VjY7Cy2YSWoJA7PjYZW7RXEW5mFKWuLHoL1iq5Y1Ar0AgPAYdEk/NbT/Ymfu3R+X/1v35feO3hXBpAe/qs5SlEdysdaEF6rSGJM30iwwmzjXCj3R7tN76+HI7t468N0H/lK+dnTf/+Dz1ZlvGddha5XkXmOuCa0c497S3TbeKIVnDY4+vdX/0T73/u+x9d7H1ZdEJX6tlbsJ8ZQu7G9pGtPdKG4/agX/nS5c/90htf/fbFKgK4f3X4kz/00U9/9ttXl47mlk0yzOMgINrKRrSdkrgmMkffaNr5IfGWn3hwu+/ohmZBjJOuM8WWvxPUChMUrRw0ZtbZeqw3C+9R6QwqO53GSSKX1K5767hztn72U4/uXR4u9+Ni5+e7ce9ivP3mbVhSBUu2qVmPusuauUaoiE3ahkB3PHve/vrf/sTNcfcXf+Jb//jLV1/+5sX3Pbj57Gee9m72cnhQFiW4KhsVcmrVepORigD3DPp+6J0XP/mDD+9c+tJkFl28UWUpfhaZLKq1uDopLOVHNo5FB44rf+mLF3/z//rug/fLs/HJ124ePm3ffLz7Hz7/xgePd3/lT77fzsNBV6gXgDyElQC5EHNHtEpMIWKvw2oAaLw6H2aRnfYC+/y/ykQlgXHPxKGsZbhAIu4BZIctUR13ghu+Q5x5Ncvefe0mVOKn/sAHb75+u/Qs9GHYxUVV4kXQp9BAs54Ja4++NGKyOk2XJtweefR+GPyf/+WdD56e7dvabGUULSoHO3/NFbuFLgXdWSftL4qaYA/hez72/Gyv3mQGbvSqVI7h4wMlZS4jrJ9YMDIl4Y4nz/i3fuGtF8f+xqvrf/Yfff3jr13f3La/9fMPfuFL9//Rr9773Pc9+exnnpiVt5qp+RG91bSuTGoU24x0YSYtRnAp3xmm9znxlrG1SPkpUfoIRaEw9p4JZfVsWI+XGSvYr4tNc28Codb8J37gyd/554enN7v/9v9+56d+9INXL9dvPtr9i6/c/e67h7/y01/PC8GpPnGGJNS6KoHpZcCR/6yUpijY0bNB8Pee7v/C5z74Uz/y0cV+7PYgfcs84URikZZRNlCH4kqz/p9awGivI67ORguDoOzE6548PLl79jnBsDuk+VYEFOby5a+dffPpBU3/wQ8+/u43r3eLX+z9p3/s25//yr0hfuGrd37000/Usb2EBODDXZCJvUzxhMAhgJrK/lfhfB/eGJU/2kRQ0VIK2QdNImgKomcyA9FPZY1k85QsS70FcmEMjeOt+/prf+JrP/sP3/3y7119+f98JewDrt//h9+3CE8VGeMUb7K8JUQu0k/yVSehIqd4ZcD3Prj903/ww3tX69Jg9p0MaPslC81k9rrU4XtS2PjNg0FA++6WV5u3VEyuUEL2rgEAswfQLcKkjW0mLnzzo50DpH3qzZtdw0Ibpgf3/KKPp4fdh092vjUWReZFALWqIVOIrMA5o+A8YRgZFkzDnTM3g9HnZmJ/DA88IVaAejwrb00mr7Ke2ARgrDDKDHCoFdorKVZUWchd9z/yQ4++963nn//1e7/9rXNCD145/Mgnnv3Ae896g22XgKNakCtYOnqkuw1xz9BzO+ktwme6UyLMP/3m9cWZ9w6jf4e1peNRpsYb0UFrVkEMWVUkq+yDMTTAekMp2cnpohoX8hhgoJw0guBeRSRwErNzv9TlM+RVLIGHIw/DXLzYOVMrlP6fIOhrXh+yFIcKL0vJ6b3Z537gxet3f+e42mfeed6zVjXNV9zKTWGbJEzDZCQa0i1Ez0zrBPLyTO/QiiCnVRKkTHlmnu8w7Ra8+8bhZx78nrsAmqkZmsmYN5aRJ8Aq4Xrc5FvkzTI3zEInkdFvQHD1CCVx93JtJhK2ZT1P4qvTSGzNK2QRDRBlyaHBQqTKLUWsOLVcZyWTOZOY+QSHR+caiwGUQKXolfjU24duOrr969+6/P2feIbdWFf8q9+4OI4d6Z95+7r306guH61jXPdThEnMthVlTkkA0Axvvb6++dozQbH4ebbTT6QUpmgcHHSa6Ih6atBksQsGjCr1A3R1govKrxd0tGiCIdmIRvSmedOAoUcz8iviMAHKduyEGW23pEKeHBgAZuNryn7fw3BPilu5PmR4UX8dAZY1TUoZrVyQRU99M716NX7iex8R/OSbL3qbF5VR3NVxgnYlPREyiYtqF1Wro8zw7puHP/zeo3/67+79w39952K/fv/bz37ng93f+cLHBvzNV9fPfeZJt4Ky7T9ilVE09R0Bik4w15uXc80Zvb21EnJr5ygpzBCn6GdEEzBrre3MOs3iRmCP6zQqmEpX4Cm7uKQXFNW3Q8licmX1txMtPwVkI0ACQVtgBi6L9aYT4RbJzY0gGSAItO1o52HGZlDJ4WnNrEqms1Lo1WSGZnj3zfVv/MxvQ2id3SbdywdOFcMEHmcTG0GDLfAtholzppnO9vrL/+E3H/399uu/+8rf+8ID4vXhEvDGq8f/5Ke+8eDuoWd4s2WbyCy0G9X2BtCjAceSZkYRt/A6i7AJuAIsP/hSTBfWMrIlvbeFZjCKFtdceh5si+afAc3rOREsj6QXVJtxNghY8NeXjnTLgyv60OJwRS07a8R+d277xUODUrisCIEE5ImlYcFxRyehIf+nCq+TcyJvWW4InUnqyS2gpbHbBLSJGzNAi7BKTPoiRO7EaN3Yi2CpRs9QDUTTG68d/8s/97V/9mt3f+W37jx8vpzt/Pvfuv5jP/jR6/cOy+LGunCA6mE3coXR+673XVyqklTXnIDtakSsr+rWwOyaClqh2mmkRqMX1pr1vt8vfcfW0DJE6yLALgysA7C8VO8AmxlcrL7ESeJa2Er4i1ROoCrH0w6QdM8AteWcfemXdz7Gi0uGnLYuFRIwoJmuzv2z7z2X8OmP3ywNLTsHYpuJTMn78unOGMTQc6/klsmqzBATtOueD9L9OU4UdpoxoyvaYIZlt7MGQTMBpIKNRlj3e1f84z/2+I/9yGN3Rnqkmbe4cxpwXjhkkNEb2bstZ2y7ZnI1QomNkxRv/Tv1JWDVOZWQnH8OAbd80XJ2eb6/sN0O7DGTg1CHLWkYS0x1UBb02dCscbZGlXvLR7fNDqbaB9VJQIvupCY4ZMvZ/urOg92Dd3A+EDVwOuPqd/bjqhFvPVj/iz//VYi9qZmyuTfqDiqEKKXITEWAXK+LTtFHmkxru/ZWUKNMIFkWMFRAUtpDgCT6Yov6xdUV27djHsmEUYLOcK6kuTVDrwOg80T8mOwkFmw43128dv/iRs+svYrzYx5m5iGUZFyCPDt16l/jkhAr01IqYIRg8Jt9a/urO/d351fYnaMtQNxAjctnAKL9MwjxcKChXXG5LfwNoZCwjbAGRU3zDTfIzFuoXLSDLt0emvH+9/0E7r+N/Qcs5Yxsi2+OBj1y9DOwODGbmP9gdchhyo1cFnpH21szqZtGxCwtS7aqi0hbzn8iUlakikmmG6eZhL7gfLlz/up98DcTNgoYvL435GARamz8srC0vmCxEwLdzl65+8a5Pu7/VPYecd7RG5qhOWzARIvUa3AiByMrod6JkGZ4LgBw0UkJpiev3H3wzv7eW7A9GPMkggKxl91L1jKqaQYe8fhH9fZXqNsoyFKIS97a9cUAAAz+SURBVKNwgxu8Y3SsO3GPmwYnxh7e4cC6wyAGNRqGYQWO4vVFe+0KBjBbMjJWB6mNRAXHKcxU/RcBxCQfIVgaYMbLe+e+62238Hxv43ncX8rzKy82Q4EJeWWROPm1GZ5W258f7975nn7/tUGP3MGsg+W8paRq4Tg28EdOHgnUmHgT6bOGtcGW1i/x/ut4/jrOr7Dbo/eI64WRTQTmaANYYUNcaS5bQYEH2Apb1Qw8wA7qK7raNx+0Nz5NUU46s4BkktRzwACZbXWMoUmGL/8gPryvtkILfMkT9Z6nGx0KmQ48GaKTgCi46JIPumOsca2bQMFuqnSMugivWAxjCn72RMwmKkzPRsrMmvHq3mv9/qu7R2fgBfot8lRPDk2JvAlvdb9he818iwi5XHx+uP/Wp8/u/ADurLRcqWXiRtgGtEyCUN45Ozs2UbDWHOkdrWZoQif3wAI1uGENCmWT07zcWSQgB9wQQ6nzRg1F8OOGI6AmsAIi1AgG69FRjgkrmvX1Mzz8BJpAwCwJa45tMsCz/Su+TxsfCPBARN9olcVdgerGobGxjciHRnY/moSSytVTpvyZ3zstHTX1jLTlbH/5YK9P4BcvdbVHW2CL5udLHOHYQMvb5RY3ndIaEYNNBIwjjgM3On/tFRjVHhlpFp8PHciEd6xCxWa3lVfPfpru5OSRQRp9gLQG2wMdowXXySPcMqwxKYn1yMCv+C2jthCfRMoyQwHKehZHQ0Pce9yzrjTsHGMTVhjLczXPBsWsSSh8+OQdoTuBpjkiSYAM0RifffZDOgKOboaGhq2Zsoxr5iwxVecURsthZhInM1h9Ob+Lqwd48Sp1jigVxXtBxD3QLMrGuAAnW/yFNDIoYEwgG3FHm+tBPJIIY2tqpKsuyFe307SISoPN6Q+TFJZWWib/2xiQo/dLLufgDlgwDEaMseV98kaEoLqGFhaXs1CsdhFX0VgxrCkHoaFqRUD64KxtC7TodwpFyYWS8IBIy2yER/MoTu8DYGb0PPIzIcQWwKe+o4QBHK5w8S78w/Rfs0sFYOSLM3uSJcRK4zDi9YxvK3DSurPlzF5/D5cPsJwBhhUMRYyG/PTFCMipW94jTYykjxkbAYQ6tMoW9CYdQeDiXVs/MI24zFbOKASvXGkKsHC+vtiUMsh3J7y33eX+8j6Xc7U92dC6PBK6jXINp0cKXRmZe4zcmRUtrx4lJ8Loy+Xnt51UAsmeIIIY8YUA8cpo1Ow0etpWs2mpSOIeozZM2wyUcM9KipMYZmpGmq6/C1/7UFd34LYx040VQXW4mvhZOlisd3pRYTXbfQ9efQcyrMqUm3LOUoBUSjvHDRnkoTSs0bECgDWT6BTQYB10oOPwAI8f4CyyXx77EMXk/qmhZOR8Rp49akxDIJA8u0u4N7vavfo277yu5YxsUMMI3GL4EcakhxyIafLsaAiYiJkWKuqT6F+XEQvCJ4skAPp/83Mx76kyveXmkuUW6KTn56aTEWyG9GLOVbihnN9Xupb+G5mpapANNKGdONlwbjYjkVhvDs+Cooo8/zUUApQ0HG500xgAaZa4EjGM0onky2uh+V4jah4zkEPiKqKJHk2DAbuBdosm0GFODmEFo0FmhR3RHRwwhwlcwQELuiuYwxx2RD+iC4K++B6fvwsu9EhKMslNDRkiwnEUHE7hapZGvJI2thmYCxkQCXOEKQlFbcMH4gZpHZ38pBNbYI3ZDCfEapKYCiFFPmM+NzShgTlLJd2qUWNFhBIjAut5yibfuifn5hJHULP8XBWSRM7cGBXGCHzHBAOjF2Yye6aZ2YMopEpjQKSoKKnHKMbI5QWGxbXxg2D7KKQyqIyccpjJvcw+dmeqInqqO1tOBIgDG7I1MsvxuhyURwEs1YQRLZGq6ktKbhW3kA0SY1KrF7Sx4vMYexPCk4MxujNsQkDMj0xlQV56E1TDs+qkIswCxgjHWcECqwO3JqQwA3/OyMLLQ8zR7HGKmR2qtxbC1glPd23M2TaUIjmfY37KFyZ6x622smPCKTaMMfMZQE/xjBPos0hp1BCReIg3YEUkRWd8dKwvPUfNIGmcZ5+JzYl/zCFRbvJGMsaJQiGEHrFVZmwlpV+NGYhMxmQNDnikkylFC/mW8E3ZNavLeskIe4o7hDtqQFWmb4N5gyzIncQrc0CWM4985NXdk7E+NW4UGTbMi6hORV06oDs6l+KZqUBGuWLuQBx5gGdSLsvppsmMLEyuRhQkNG1/AHIoopSTxPPvvbJyYrTzWs73rlMRDHRXK5iyKF4rnzWS7wGgmuC1XhDQEPN6NehrzHaRpCFmwEahwauZI6mbE1CMpkPdU0koiuKL0HqYCF0ZMqSnbGlT041KPfpr5DXCNkLG+M4Uq+cgLCA1D9gatTUk5PCwCH8ZVAQYHsFDjEoAa5isD7SGAqIY+TcXdeJyGoQamJV4oBH5VwMJV12NM8hnH5MCG05/CkLGMCJYEgE9W20z2U4UU2CO7gKwCmYYQI6xjKmtwdTKkSTlHHH/Ntyk0IKHxk8eEKzUJkotGRJM/rFVU9LRJoLl7zEwMVJkFdMTtVpaNA+ntF31MwgIsAejjBGdm8rPn8RQkSqnBaoMDMC8ZJ61VwAeqTJmstojaEuNCjynQZX6y3DXs3/YCITPanAgfzBDzRdFiwJ11hcrCQeBVSydoskoO8DbxfzZAeAcgJEAIyjvV5Zn0AwKYKag1k76AAJLW7jryvlECN/DtxBAmLwU1zk1lI3K2OKp4jFgM63pdGKhRf+3n0xS0aHoVZlB3W2coGjljKJ7qdxTDwXMvpz5a7rhuM3ndRaCaMXRpPh5JRmDB3GNNk5KJ7OXk3NZRe0vBUMx41WTQ8UOvTQn/5wj3nOosBljDnjEYTGIiZbD8ZhBuoql5TjC+mTO5kSmPcMnZkUQ9fli1dnzz4YW9+iUJmqzNXHGHtliHXFjigtzYHBeIQE0Az5AxcAMElvDRgTLsAIIY2nBVLbooyzQTg67otWAN8t+xPBPyceAwpHIfitUBlZZdM9QhS0IWkLHmOMt482slVqiUJ532VhaL5L3xkoFVm9vIESCWmAU8o6UEnHJMO7hlCbvDFdRgg9Rh4CSljA/H1ebCIGu3LKU3Gp+T9C3Ndw54XEJgXkKCU+hQnGFvGWA6YAbW69DsFyJsy7xRMDLaVZFmSyZr1e8V6tK2532ahaZznlw24MIKJISiewFd9wUDLNvTJWtFWDVczl9VWwm5sRjovcJSa7zpCMrWbCKuU6eDGgMuUenq+InY4ToFKk7pTITqIAkcXrOxPMcQ4bIxMwzLm4ESa3JRR8p4gBiT+4tGLOAFlS/xIoq1ASqJQ1rArNmDMqjBbUpehEyGs+XzHVE16NgsR5uVhtqlFS3bvaeHF6eN+dZ1hwDZPYpDz4neprgFatNj1YnGo/wuqEbBxaOfX6p4DjzMwBaBeOYupmULPrVUAVjEBCHyuyI4dGKEJEOYYEcSZfKoKfDD0KAyJgldgggWoMZmwGi4r8ECgxnjGIINypFZl9gDAoEgLj8Iq80LBnOuuYTpktUcqOsu1iDQGuRJY/7KBFraZqNT10vXuMnBHMLWbcbXNnZv1n2zDSm1acwQtQbecrW6JqKP3EgLTV/pkS0hMTei3HOEJbl/kd+OdcxITgZDfP2F5AtQay4B1SLOKz8gzsRWfUwGivOnp5LAM2y/oMsBAmY25bq53x5kHCJzBmTeWXFZIWiyfWYKj4PLedNU2sOYy7M2OhP6mWmyzUJXS0CJ9PoIc0wep4HkzVPsz7NMkpyT7M+pey56znAozRmBoRpODELnz1LrSG5hqoRpQXX4A7UDD1mtOilF6oqxTxdH6VEBAY5U8fG8s70k5/KE2F9NSYBjHkTQa9q5HbaYmB+LiTviLMkGAdSgwstjyCUpihd8AJV6xmT1HtMg1P2TsEV5jiDB003DrTIWOUk3GBWiga2OrlIXUx/UpIJB5EpPEyRkemrmmn7AQTxT/MHGtUBFxbmdPnJdlTM+fTDQK/ico3ZZyRNBAnNCGkMcIlsRnoFtsyHndIZFb3irIYCW80Y8FXKnz2QUUsgySQoofKhYZ7xfm5q82CZRyn52fRIMWlEbHF+0fIbzi/NZgSrMcDBljF92m4cjVUPfKzGJcsOGDkyFRAAFpNI0q1n2qgGYiaZSRPI/RGAWRXGKqFUH4aQA6VVCCyg9fSems+JZxpQo1xDbyZ1jee2TB7D2BXuNoJwm1nfSH+O1EFVqgEoBKtziQeL+dNbxig0K09Q0MHcHrKwk6338XhH/MgEz/g9bdp95gDqiqjKYE8cfPrs2NWQGVqjkDPHG7UOQuEL8lzHCJCtWn06v8yBCRhI0M7RgdXjH4wpj6R8JJiDvQRJuZJ8JlKLAMzg109/XsVkLyr7UyYYMqFWBrp54s3Ay1JPDHc+j6D7/wcJvClSGLKhigAAAABJRU5ErkJggg==");
         }
          
          dfd.resolve();
        })
//       if(this.complete) 
//         $(this).attr("class","");

        imgdefereds.push(dfd);
      })
      $.when.apply(null,imgdefereds).done(function(){
        callback();
       dfd.resolve();
      });

});
</script>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">魔装少男的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">我可爱又美丽却能唤来死亡 <br>  虽然我可爱又迷人,但我能招来死亡</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">67</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">32</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">50</span></a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="heartbeat fa-fw"></i>公益 404</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
     <li class="menu-item menu-item-search-my">
      <a>
      <i class="fa fa-search fa-fw"></i>
      <input type="text" value="B:我爱你" name="wd" id="kw2" class="kw" size="15"  autocomplete="off" onkeydown="keyDown(event,this.value)" onfocus="javascript:if(this.value=='B:我爱你')this.value='';" onblur="javascript:if (this.value=='')this.value='B:我爱你'"><i class="fa fa-long-arrow-right" onclick="search(document.getElementById('kw2').value)" style="margin-left:0.35em;margin-top:0.35em;float:right;"></i>
      </a>
      </li>

      <li class="menu-item menu-item-gonggao-my" style="opacity: 1; transform: translateY(0px);">
      <div style=" border:1px solid #ffc0cb"><div>
  <font color="#ffc0cb">小公告：</font>
</div>
<iframe src="https://pengxiandyou.github.io/gitee-pengxiandyou/src/hexo-next/%E5%85%AC%E5%91%8A.html"></iframe>
</div>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#maven"><span class="nav-number">1.</span> <span class="nav-text"> Maven</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spring"><span class="nav-number">2.</span> <span class="nav-text"> Spring</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">2.1.</span> <span class="nav-text"> 前言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E4%BD%93%E7%B3%BB"><span class="nav-number">2.1.1.</span> <span class="nav-text"> 技术体系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6%E6%A6%82%E5%BF%B5%E5%92%8C%E7%90%86%E8%A7%A3"><span class="nav-number">2.1.2.</span> <span class="nav-text"> 框架概念和理解</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#springframework-%E7%AE%80%E4%BB%8B"><span class="nav-number">2.2.</span> <span class="nav-text"> SpringFramework 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#spring-%E5%92%8C-springframework"><span class="nav-number">2.2.1.</span> <span class="nav-text"> Spring 和 SpringFramework</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#springframework-%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97"><span class="nav-number">2.2.2.</span> <span class="nav-text"> SpringFramework 主要功能模块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#springframework-%E4%B8%BB%E8%A6%81%E4%BC%98%E5%8A%BF"><span class="nav-number">2.2.3.</span> <span class="nav-text"> SpringFramework 主要优势</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#springloc-%E5%AE%B9%E5%99%A8%E6%A6%82%E5%BF%B5"><span class="nav-number">2.3.</span> <span class="nav-text"> Springloc 容器概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E7%AE%A1%E7%90%86%E6%A6%82%E5%BF%B5"><span class="nav-number">2.3.1.</span> <span class="nav-text"> 组件和组件管理概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#spring-ioc-%E5%AE%B9%E5%99%A8%E5%92%8C%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.3.2.</span> <span class="nav-text"> Spring IoC 容器和容器实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#spring-iocdi-%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93"><span class="nav-number">2.3.3.</span> <span class="nav-text"> Spring IoC&#x2F;DI 概念总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-iocdi-%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.4.</span> <span class="nav-text"> Spring IoC&#x2F;DI 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">2.4.1.</span> <span class="nav-text"> 实现步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-xml-%E6%96%B9%E5%BC%8F%E7%AE%A1%E7%90%86-bean"><span class="nav-number">2.4.2.</span> <span class="nav-text"> 基于 XML 方式管理 Bean</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E5%92%8C%E8%8E%B7%E5%8F%96-bean"><span class="nav-number">2.4.2.1.</span> <span class="nav-text"> 声明配置文件、创建容器和获取 Bean</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BCsetter-%E6%B3%A8%E5%85%A5"><span class="nav-number">2.4.2.2.</span> <span class="nav-text"> Bean 属性赋值：setter 注入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E5%BC%95%E7%94%A8%E5%85%B6%E4%BB%96-bean"><span class="nav-number">2.4.2.3.</span> <span class="nav-text"> Bean 属性赋值：引用其他 Bean</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E5%86%85%E9%83%A8-bean-%E5%A3%B0%E6%98%8E%E4%BA%86%E8%A7%A3"><span class="nav-number">2.4.2.4.</span> <span class="nav-text"> Bean 属性赋值：内部 Bean 声明（了解）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E8%B5%8B%E5%80%BC"><span class="nav-number">2.4.2.5.</span> <span class="nav-text"> Bean 属性赋值：集合类型赋值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8-properties-%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-number">2.4.2.6.</span> <span class="nav-text"> Bean 属性赋值：引入外部 Properties 配置参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7factorybean-%E7%89%B9%E6%80%A7"><span class="nav-number">2.4.2.7.</span> <span class="nav-text"> 高级特性：FactoryBean 特性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7bean-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">2.4.2.8.</span> <span class="nav-text"> 高级特性：Bean 的作用域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%AD%A4%E5%A4%84%E6%AF%94%E8%BE%83%E7%AE%80%E7%95%A5"><span class="nav-number">2.4.2.9.</span> <span class="nav-text"> 高级特性：Bean 的生命周期（此处比较简略）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E7%AE%A1%E7%90%86-bean"><span class="nav-number">2.4.3.</span> <span class="nav-text"> 基于注解方式管理 Bean</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E6%B3%A8%E8%A7%A3%E6%A0%87%E8%AE%B0%E5%92%8C%E6%89%AB%E6%8F%8Fioc"><span class="nav-number">2.4.3.1.</span> <span class="nav-text"> Bean 注解标记和扫描（Ioc）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8Ddi"><span class="nav-number">2.4.3.2.</span> <span class="nav-text"> Bean 属性赋值：引用类型自动装配（DI）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#bean-%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BCdi"><span class="nav-number">2.4.3.3.</span> <span class="nav-text"> Bean 属性赋值：基本类型属性赋值(DI）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%96%B9%E5%BC%8F%E7%AE%A1%E7%90%86-bean"><span class="nav-number">2.4.4.</span> <span class="nav-text"> 基于配置类方式管理 Bean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E9%85%8D%E7%BD%AE%E6%80%BB%E7%BB%93"><span class="nav-number">2.4.5.</span> <span class="nav-text"> 三种方式的配置总结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%BB%E6%9D%BE%E6%B5%8B%E8%AF%95%E9%85%8D%E7%BD%AE"><span class="nav-number">2.4.6.</span> <span class="nav-text"> 轻松测试配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-aop-%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B"><span class="nav-number">2.5.</span> <span class="nav-text"> Spring AOP 面向切面编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.6.</span> <span class="nav-text"> Spring 声明式事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#jdbctemplate-%E4%BD%BF%E7%94%A8"><span class="nav-number">2.6.1.</span> <span class="nav-text"> JDBCTemplate 使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%87%86%E5%A4%87"><span class="nav-number">2.6.1.1.</span> <span class="nav-text"> 准备</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">2.6.1.2.</span> <span class="nav-text"> 使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.6.2.</span> <span class="nav-text"> 声明式事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#xml-%E9%85%8D%E7%BD%AE%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.6.3.</span> <span class="nav-text"> xml 配置声明式事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB%E9%85%8D%E7%BD%AE%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="nav-number">2.6.4.</span> <span class="nav-text"> 配置类配置声明式事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#transactional-%E6%B3%A8%E8%A7%A3"><span class="nav-number">2.6.5.</span> <span class="nav-text"> @Transactional 注解</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86%E4%BA%8B%E5%8A%A1%E6%B3%A8%E8%A7%A3%E6%94%BE%E5%88%B0-xml-%E6%96%87%E4%BB%B6"><span class="nav-number">2.6.6.</span> <span class="nav-text"> 将事务注解放到 xml 文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A5%E5%85%85%E6%9C%AC%E5%9C%B0%E8%A7%86%E9%A2%912021%E5%B9%B4%E8%A7%86%E9%A2%91%E5%86%85%E9%83%A8%E7%94%B5%E8%84%912017%E5%B9%B4"><span class="nav-number">2.7.</span> <span class="nav-text"> 补充（本地视频2021年，视频内部电脑2017年）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#springmvc"><span class="nav-number">3.</span> <span class="nav-text"> SpringMVC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.</span> <span class="nav-text"> 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%93%E9%AA%8C"><span class="nav-number">3.2.</span> <span class="nav-text"> 体验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#requestmapping"><span class="nav-number">3.3.</span> <span class="nav-text"> @RequestMapping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#requestparam"><span class="nav-number">3.4.</span> <span class="nav-text"> @RequestParam</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E4%BC%A0%E5%8F%82pathvariable"><span class="nav-number">3.5.</span> <span class="nav-text"> 路径传参@PathVariable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6-json-%E6%95%B0%E6%8D%AErequestbody"><span class="nav-number">3.6.</span> <span class="nav-text"> 接收 JSON 数据@RequestBody</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-cookiecookievalue"><span class="nav-number">3.7.</span> <span class="nav-text"> 获取 cookie@CookieValue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="nav-number">3.8.</span> <span class="nav-text"> 获取请求头</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9F-api"><span class="nav-number">3.9.</span> <span class="nav-text"> 使用原生 API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%B3%E8%BD%AC-jsp"><span class="nav-number">3.10.</span> <span class="nav-text"> 跳转 jsp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">3.11.</span> <span class="nav-text"> 转发和重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E-json"><span class="nav-number">3.12.</span> <span class="nav-text"> 返回 JSON</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="nav-number">3.13.</span> <span class="nav-text"> 返回静态资源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#restful-%E9%A3%8E%E6%A0%BC%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.14.</span> <span class="nav-text"> RESTful 风格设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">3.15.</span> <span class="nav-text"> 异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">3.16.</span> <span class="nav-text"> 拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="nav-number">3.17.</span> <span class="nav-text"> 数据校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.18.</span> <span class="nav-text"> 文件上传下载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0"><span class="nav-number">3.18.1.</span> <span class="nav-text"> 上传</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.18.2.</span> <span class="nav-text"> 下载</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%B4%E5%A4%A7%E7%9A%84%E8%AE%B0%E5%BF%86"><span class="nav-number">3.19.</span> <span class="nav-text"> 头大的记忆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%AF%E9%9D%A2%E8%AF%95%E8%A6%81%E9%97%AE"><span class="nav-number">3.20.</span> <span class="nav-text"> 说是面试要问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#contextloaderlistener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">3.21.</span> <span class="nav-text"> ContextLoaderListener 监听器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mybatis-%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6"><span class="nav-number">4.</span> <span class="nav-text"> MyBatis 持久层框架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="nav-number">4.1.</span> <span class="nav-text"> 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-number">4.2.</span> <span class="nav-text"> 快速入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">4.3.</span> <span class="nav-text"> 封装工具类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="nav-number">4.4.</span> <span class="nav-text"> 加入日志框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%92%8C"><span class="nav-number">4.5.</span> <span class="nav-text"> #{}和${}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="nav-number">4.6.</span> <span class="nav-text"> 数据输入输出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE%E5%9B%9E%E5%A1%AB"><span class="nav-number">4.6.1.</span> <span class="nav-text"> 主键回填</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5"><span class="nav-number">4.6.2.</span> <span class="nav-text"> 数据输入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%BE%93%E5%87%BA"><span class="nav-number">4.6.3.</span> <span class="nav-text"> 数据输出</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%A0%E5%B0%84"><span class="nav-number">4.7.</span> <span class="nav-text"> 映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84"><span class="nav-number">4.7.1.</span> <span class="nav-text"> 对一映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84"><span class="nav-number">4.7.2.</span> <span class="nav-text"> 对多映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84"><span class="nav-number">4.7.3.</span> <span class="nav-text"> 多对多映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%98%A0%E5%B0%84%E6%80%BB%E7%BB%93"><span class="nav-number">4.7.4.</span> <span class="nav-text"> 多表映射总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81sql"><span class="nav-number">4.8.</span> <span class="nav-text"> 动态SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B02021%E5%B9%B4%E8%A7%86%E9%A2%91"><span class="nav-number">4.9.</span> <span class="nav-text"> （本地2021年视频）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-number">4.9.1.</span> <span class="nav-text"> 内置参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%91%E5%AE%9A"><span class="nav-number">4.9.2.</span> <span class="nav-text"> 绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%93%E5%AD%98"><span class="nav-number">4.9.3.</span> <span class="nav-text"> 缓存</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7"><span class="nav-number">4.10.</span> <span class="nav-text"> 高级</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%B3%A8%E5%86%8C"><span class="nav-number">4.10.1.</span> <span class="nav-text"> 批量注册</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E9%A1%B5pagehelper%E6%8F%92%E4%BB%B6%E6%9C%AC%E8%B4%A8%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">4.10.2.</span> <span class="nav-text"> 分页PageHelper插件(本质拦截器)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="nav-number">4.10.3.</span> <span class="nav-text"> 逆向工程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E9%9D%A2%E5%9B%9E%E9%A1%BE"><span class="nav-number">5.</span> <span class="nav-text"> 前面回顾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ssm%E6%95%B4%E5%90%88"><span class="nav-number">6.</span> <span class="nav-text"> SSM整合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">6.1.</span> <span class="nav-text"> 配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81"><span class="nav-number">6.2.</span> <span class="nav-text"> 代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E5%88%86%E6%B5%8B%E8%AF%95"><span class="nav-number">6.3.</span> <span class="nav-text"> 部分测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E6%80%BB%E7%BB%93"><span class="nav-number">6.4.</span> <span class="nav-text"> 我总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#springboot"><span class="nav-number">7.</span> <span class="nav-text"> SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-3"><span class="nav-number">7.1.</span> <span class="nav-text"> 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-2"><span class="nav-number">7.2.</span> <span class="nav-text"> 快速入门</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E6%9E%90"><span class="nav-number">7.3.</span> <span class="nav-text"> 分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">7.4.</span> <span class="nav-text"> 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="nav-number">7.5.</span> <span class="nav-text"> 自动配置原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%90%AF%E5%8A%A8%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%90%86%E8%A7%A3%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="nav-number">7.6.</span> <span class="nav-text"> 自定义启动器（可以理解配置原理）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E5%90%88"><span class="nav-number">7.7.</span> <span class="nav-text"> 整合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B4%E5%90%88mvc"><span class="nav-number">7.7.1.</span> <span class="nav-text"> 整合MVC</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E5%90%88mybatis"><span class="nav-number">7.8.</span> <span class="nav-text"> 整合MyBatis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E5%90%88%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="nav-number">7.9.</span> <span class="nav-text"> 整合定时任务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85"><span class="nav-number">7.10.</span> <span class="nav-text"> 打包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AA%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">8.</span> <span class="nav-text"> 未解决的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-number">9.</span> <span class="nav-text"> 工具类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-number">10.</span> <span class="nav-text"> 其他</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小可爱"
      src="/images/%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">小可爱</p>
  <div class="site-description" itemprop="description">西部计划完结</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">67</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button site-overview-item animated">
    <button><i class="fa fa-comment"></i>
      比较直接的联系我
    </button>
  </div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/pengxiandyou" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;pengxiandyou" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.coolapk.com/u/1385475" title="酷安 → https:&#x2F;&#x2F;www.coolapk.com&#x2F;u&#x2F;1385475" rel="noopener" target="_blank">酷安</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/20837528" title="B站 → https:&#x2F;&#x2F;space.bilibili.com&#x2F;20837528" rel="noopener" target="_blank"><i class="fab fa-tv fa-fw"></i>B站</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/pengxiandyou" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;pengxiandyou" rel="noopener" target="_blank"><i class="fab fa-gitee fa-fw"></i>Gitee</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://pengxiandyou.gitee.io/src/game/t-rex-runner/" title="https:&#x2F;&#x2F;pengxiandyou.gitee.io&#x2F;src&#x2F;game&#x2F;t-rex-runner&#x2F;" rel="noopener" target="_blank">小恐龙游戏</a>
        </li>
    </ul>
  </div>

        </div>
      </div>



            <div>
          <i class="fa fa-search fa-fw"></i>
      <input type="text" value="B:我爱你" name="wd" id="kw1" class="kw" size="15"  autocomplete="off" onkeydown="keyDown(event,this.value)" onfocus="javascript:if(this.value=='B:我爱你')this.value='';" onblur="javascript:if (this.value=='')this.value='B:我爱你'"><i class="fa fa-long-arrow-right" onclick="search(document.getElementById('kw1').value)" style="margin-left:0.35em;margin-top:0.35em;float:right;"></i>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/pengxiandyou" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<script>
$("document").ready(function(){
  // 在这里写你的代码...
  //var e1 = $("article[class='post-content'][lang='zh-CN']")[0];
  //$("e1").css("display","blok;");
  hbeLoader();



});
</script>
<div class="post-block">
  
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"   >
    <link itemprop="mainEntityOfPage" href="https://19980118.xyz/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="小可爱">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="魔装少男的博客">
      <meta itemprop="description" content="西部计划完结">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot | 魔装少男的博客">
      <meta itemprop="description" content="<p>&emsp;&emsp;虽然有些学过用过，但是感性的理解不好说，久了不用容易遗忘一些，还是记一下吧。</p><p>&emsp;&emsp;过程中使用的是Oracle JDK。</p>">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-01-27 00:34:26" itemprop="dateCreated datePublished" datetime="2024-01-27T00:34:26+08:00">2024-01-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-03-06 00:30:01" itemprop="dateModified" datetime="2024-03-06T00:30:01+08:00">2024-03-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>106k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1:37</span>
    </span>
</div>

            <div class="post-description"><p>&emsp;&emsp;虽然有些学过用过，但是感性的理解不好说，久了不用容易遗忘一些，还是记一下吧。</p><p>&emsp;&emsp;过程中使用的是Oracle JDK。</p></div>

          
        </div>
      </header>


    
    
    
    <div class="post-body" itemprop="articleBody" >
        <h2 id="maven"><a class="markdownIt-Anchor" href="#maven"></a> Maven</h2>
<p>   Maven 是一款为 Java 项目管理构建、依赖管理的工具（软件）使用 Maven 可以自动化构建、测试、打包和发布项目，大大提高了开发效率和质量。</p>
<p>   <strong>依赖管理：</strong> Maven 可以管项自的依赖，包括自动下载所需依赖库、自动载依赖需要的依赖并自保证版本没有冲突依赖版本管理等。通过 Maven，我们可以方便地维护项目所依赖的外部库，而我们仅仅需要编写配置即可。</p>
<p>   <strong>构建管理：</strong> Maven 可以管理项自的编译、测试、打包、部暑等构建过程。通过实现标准的构建生命周期，Maven 可以确保每一个构建过程都遵循同样的规则和最佳实践。同时，Maven 的插件机制也使得开发者可以对构建过程进行扩展和定制。主动触发构建，只需要简单的命令操作即可。<img data-src="https://s2.loli.net/2024/01/27/7UM6Awc5bgLVtoh.png" alt="image-20240127022938293" style="zoom:50%;" /></p>
<p>   <strong>原理：</strong> <img data-src="https://s2.loli.net/2024/01/27/NTAhgYiP2lvwR3O.png" alt="image-20240127023411742" style="zoom:50%;" /></p>
<p>   <code>mvn -v</code> 验证安装是否成功。额外配置 JDK 版本，不用它的 5。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不用默认的jdk5.0 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-17<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>17<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在build里添加,解决自带site插件报错 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-site-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-project-info-reports-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 自带的打包war插件与JDK17不匹配的话，在build里添加 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><strong>GroupID 格式：</strong> com.｛公司/BU ｝.业务线.[子业务线]，最多 4 级。</p>
</li>
<li>
<p><strong>ArtifactID 格式：</strong> 产品线名-模块名。语义不重复不遗漏，先到仓库中心去查证一下。</p>
</li>
<li>
<p><strong>Version 版本号格式推荐：</strong> 主版本号.次版本号.修订号</p>
<ul>
<li>主版本号：当做了不兼容的 API 修改，或者增加了能改变产品方向的新功能</li>
<li>次版本号：当做了向下兼容的功能性新增（新增类、接口等）。</li>
<li>修订号：修复 bug，没有修改方法签名的功能加强，保持 API 兼容性</li>
<li>例如：初始→ 1.0.0 修改 bug 一→ 1.0.1 功能调整→ 1.1.1 等</li>
</ul>
</li>
<li>
<p><strong>Packaging 定义规则：</strong> 指示将项目打包为什么类型的文件，idea 根据 packaging 值，识别 maven 项目类型！</p>
<ul>
<li><code>packaging</code> 属性为 <code>jar</code>（默认值），代表普通的 Java 工程，打包以后是 jar 结尾的文件。</li>
<li><code>packaging</code> 属性为 <code>war</code>，代表 Java 的 web 工程，打包以后.war 结尾的文件。</li>
<li><code>packaging</code> 属性为 <code>pom</code>，代表不会打包，用来做继承的父工程。</li>
</ul>
</li>
</ul>
<p><strong>创建 web 项目：</strong></p>
<ol>
<li>修改 pom 文件的 <code>packaging</code> 属性为 <code>war</code>，记得重新加载；</li>
<li>在 <code>src</code> 文件下创建 <code>webapp/WEB-INF/web.xml</code>，不同工具中的 <code>webapp</code> 不一样，有的叫 <code>web</code>、<code>webContent</code>、<code>webRoot</code>；</li>
<li>xml 文件不好写，可以用 <code>JBLJavaToWeb</code> 插件。</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>mvn compile</code></td>
<td style="text-align:center">编译项目，生成 target 文件</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn package</code></td>
<td style="text-align:center">打包项目，生成 war 文件</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn clean</code></td>
<td style="text-align:center">清理编译或打包后的项目结构</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn install</code></td>
<td style="text-align:center">打包后上传到 maven 本地仓库（本地部署）</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn deploy</code></td>
<td style="text-align:center">只打包，上传到 maven 私服仓库（私服部署）</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn site</code></td>
<td style="text-align:center">生成站点（报告），报错的话，pom 添加 site 相关插件（百度）</td>
</tr>
<tr>
<td style="text-align:center"><code>mvn test</code></td>
<td style="text-align:center">执行测试源码（测试）</td>
</tr>
</tbody>
</table>
<p>记不住也没多大事，有工具辅助，在右侧状态栏。</p>
<p><strong>主要生命周期：</strong> 懒人操作，大部分命令会执行之前的命令</p>
<ul>
<li>
<p>清理周期：主要是对项目编译生成文件进行清理</p>
<p>包含命令：<code>clean</code></p>
</li>
<li>
<p>默认周期：定义了真正构件时所需要执行的所有步骤，它是生命周期中最核心的部分</p>
<p>包含命令：<code>compile-test-package-install/deploy</code></p>
</li>
<li>
<p>报告周期</p>
<p>包含命令：site</p>
<p>打包：<code>mvn clean package</code> 本地仓库：<code>mvn clean install</code></p>
</li>
</ul>
<p><strong>依赖管理：</strong></p>
<ul>
<li>
<p>引入 ：放 <code>dependencies</code> 标签里，写各种依赖。会自动下载依赖以及依赖的依赖。</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- maven仓库信息官网https://mvnrepository.com，可查，可直接复制 --&gt;</span></span><br><span class="line">    		<span class="comment">&lt;!-- 无法访问，可用使用插件maven search，安装好后在Tools里  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test测试目录可用/compile任何目录可用/provided除了服务器，都可用。服务器自带，例：servlet /runtime运行时才用，例：mysql<span class="tag">&lt;/<span class="name">scope</span>&gt;</span><span class="comment">&lt;!-- 产生作用的范围 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>版本统一提取和维护</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 声明版本 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!--命名随便，内部制定版本号即可！--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span><span class="comment">&lt;!-- 在上面的引入里的版本处可使用$&#123;junit.version&#125; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--也可以通过maven规定的固定的key，配需maven的参数！如下配编码格式！ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>下载失败解决：❶检查网络；❷清理之前下载失败的仓库缓存</p>
</li>
</ul>
<p><strong>build 构建插件：</strong></p>
<ul>
<li>
<p><code>&lt;finalName&gt;打包名&lt;/finalName&gt;</code></p>
</li>
<li>
<p>如果在 java 文件夹中添加 java 类，会自动打包编译到 classes 文件夹下。</p>
<p>但是在 java 文件夹中添加 xml 文件，默认不会被打包！</p>
<p>默认情况下，按照 maven 工程结构放置的文件会默认被编译和打包！</p>
<p>除此之外、我们可以使用 <code>resources</code> 标签，指定要打包资源的文件夹要把哪些静态资源打包到 classes 根自录下！</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span> <span class="comment">&lt;!-- 打包目录，只配置，则都打包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span><span class="comment">&lt;!-- 包含任意层级的properties结尾的文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>依赖传递和依赖冲突</strong>：</p>
<ul>
<li>假如有 Maven 项自 A，项自 B 依赖 A，项目 C 依赖 B。那么我们可以说 C 依赖 A。也就是说，依赖的关系为：C 一 &gt; B 一 A，那么我们执行项目 C 时，会自动把 B、A 都下载导入到 C 项目的 jar 包文件夹中，这就是依赖的传递性。</li>
<li>在 A 依赖 B，B 依赖 C 的前提下，C 是否能够传递到 A，取决于 B 依赖 C 时使用的依赖范围
<ul>
<li>B 依赖 C 时使用 comile 范围：可以传递</li>
<li>B 依赖 C 时使用 test 或 provided 范围：不能传递，所以需要这样的 jar 包时，就必须在需要的地方明确配置依赖才可以</li>
</ul>
</li>
<li>作用：简化依赖导入过程；确保依赖版本正确。</li>
<li>冲突时（高版本兼容低版本）：❶路径最短者优先；❷先声明者优先；❸手动排除 <code>&lt;exclusions&gt; &lt;exclusion&gt;&lt;groupId&gt;org.springframeworks/grounId&gt;&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;&lt;/exclusion&gt; &lt;/exclusions&gt;</code>，直接不要了。</li>
</ul>
<p><strong>继承和聚合关系：</strong></p>
<ul>
<li>
<p>Maven 继承是指在 Maven 的项目中，让一个项目从另一个项目中继承配置信息的机制。继承可以让我们在多个项目中共享同一配置信息，简化项目的管理和维护工作。</p>
</li>
<li>
<p>作用：在父工程中统一管理项目中的依赖信息。它的背景是：</p>
<ul>
<li>
<p>对一个比较大型的项目进行了模块拆分。</p>
</li>
<li>
<p>一个 project 下面，创建了很多个 module。</p>
</li>
<li>
<p>每一个 module 都需要配置自己的依赖信息。</p>
<p>它背后的需求是：</p>
<ul>
<li>
<p>多个模块要使用同一个框架，它们应该是同一个版本，项目中使用的框架版本需要统一管理。</p>
</li>
<li>
<p>使用框架时所需要的 jar 包组合（或者说依赖信息组合）需要经过长期摸索和反复调试，最终确定一个可用组合。这个耗费很大精力总结出来的方案不应该在新的项目中重新摸索。</p>
<p>通过在父工程中为整个项目维护依赖信息的组合既保证了整个项目使用规范、准确的 jar 包；又能够将以往的经验沉淀下来，节约时间和精力。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>父工程不写代码，直接干掉 src。</p>
<ul>
<li>
<p>父工程里</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有父工程的打包方是pom--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 罗列了子模块的内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">module</span>&gt;</span>maven-son-one<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>子工程里</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPsHoT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-son-one<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>继承情况：dependencies 默认全部继承，如果要子工程按需继承，在父工程的 <code>dependencies</code> 标签外套上 <code>dependencyManagement</code>，子工程自己写依赖，不需要写 <code>version</code>；这种方式：父工程只做定义，不下载；子工程按需继承，按需下载。</p>
</li>
</ul>
</li>
<li>
<p>聚合：</p>
<ul>
<li>背景：各个模块相互依赖的情况下，打包时，要打包和部署父工程以及其他依赖的模块。</li>
<li>概念：Maven 聚合是指将多个项目组织到一个父级项目中，工以便一起构建和管理的机制。聚合可以帮助我们更好地管理一组相关的子项目，同时简化它们的构建和部署过程。</li>
<li>作用：
<ul>
<li>管理多个子项目：通过聚合，可以将多个子项目组织在一起，方便管理和维护。</li>
<li>构建和发布一组相关的项目：通过聚合，可以在一个命令中构建和发布多个相关的项目，简化了部署和维护工作。</li>
<li>优化构建顺序：通过聚合可以对多个项目进行顺序控制，避免出现构建依赖混乱导致构建失败的情况。</li>
<li>统一管理依赖项：通过聚合，可以在父项目中管理公共依赖项和插件，避免重复定义。</li>
</ul>
</li>
<li>步骤：在父工程执行打包和部署。</li>
</ul>
</li>
</ul>
<p><strong>仓库之间的关系和优先级：</strong></p>
<p>   Maven 仓库主要分为本地仓库（Local Repository）、中央仓库（Central Repository）和远程仓库（Remote Repository）三种类型。</p>
<p>   本地-&gt; 私服-&gt; 镜像-&gt; 中央，任何环节找到了，都会在之前环节保存一份。</p>
<h2 id="spring"><a class="markdownIt-Anchor" href="#spring"></a> Spring</h2>
<h3 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h3>
<h4 id="技术体系"><a class="markdownIt-Anchor" href="#技术体系"></a> 技术体系</h4>
<ul>
<li>
<p>单一架构</p>
  <img data-src="https://s2.loli.net/2024/01/28/VT7StuZspz85Khw.png" alt="image-20240128015722738" style="zoom:50%;" />
</li>
<li>
<p>分布式架构</p>
  <img data-src="https://s2.loli.net/2024/01/28/EkTQCSVMLdl8yXv.png" alt="image-20240128020804551" style="zoom:50%;" />
</li>
</ul>
<h4 id="框架概念和理解"><a class="markdownIt-Anchor" href="#框架概念和理解"></a> 框架概念和理解</h4>
<p>   框架（Framework）是一个集成了基本结构、规范、设计模式、编程语言和程序库等基础组件的软件系统，它可以用来构建更高级别的应用程序。框架的设计和实现旨在解决特定领域中的常见问题，帮助开发人员更高效、更稳定地实现软件开发目标。</p>
<ul>
<li>提高开发效率</li>
<li>降低开发成本</li>
<li>提高应用程序的稳定性</li>
<li>提供标准化的解决方案</li>
</ul>
<p>   站在文件结构的角度理解框架，可以将框架总结：框架 = jar 包+配置文件</p>
<h3 id="springframework-简介"><a class="markdownIt-Anchor" href="#springframework-简介"></a> SpringFramework 简介</h3>
<h4 id="spring-和-springframework"><a class="markdownIt-Anchor" href="#spring-和-springframework"></a> Spring 和 SpringFramework</h4>
<p>   广义上的 Spring 泛指以 SpringFramewiork 为基础的 Spring 技术栈；狭义的 Spring 特指 SpringFramework，通常我们将它称为 Spring 框架。</p>
<h4 id="springframework-主要功能模块"><a class="markdownIt-Anchor" href="#springframework-主要功能模块"></a> SpringFramework 主要功能模块</h4>
<table>
<thead>
<tr>
<th style="text-align:center">功能模块</th>
<th style="text-align:center">功能介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Core Container</td>
<td style="text-align:center">核心容器，控制反转和依赖注入</td>
</tr>
<tr>
<td style="text-align:center">AOP&amp;Aspects</td>
<td style="text-align:center">面向切面编程</td>
</tr>
<tr>
<td style="text-align:center">TX</td>
<td style="text-align:center">声明式事务管理</td>
</tr>
<tr>
<td style="text-align:center">Testing</td>
<td style="text-align:center">快速整合测试环境</td>
</tr>
<tr>
<td style="text-align:center">DataAccess/lntegration</td>
<td style="text-align:center">提供了对数据访问/集成的功能</td>
</tr>
<tr>
<td style="text-align:center">SpringMVC</td>
<td style="text-align:center">提供了面向 Web 应用程序的集成功能。</td>
</tr>
</tbody>
</table>
<img data-src="https://s2.loli.net/2024/01/28/iExVDUOL1fajFZH.png" alt="SpringFramework框架结构图" style="zoom:50%;" />
<h4 id="springframework-主要优势"><a class="markdownIt-Anchor" href="#springframework-主要优势"></a> SpringFramework 主要优势</h4>
<ol>
<li>丰富的生态系统：Spring 生态系统非常丰富，支持许多模块和库，如 SpringBoot、SpringSecurity、Spring Cloud 等等，可以帮助开发人员快速构建高可靠性的企业应用程序。</li>
<li>模块化的设计：框架组件之间的松散耦合和模块化设计使得 SpringFramework 具有良好的可重用性、可扩展性和可维护性。开发人员可以轻松地选择自已需要的模块，根据自已的需求进行开发。</li>
<li>简化 Java 开发：SpringFramework 简化了 Java 开发，提供了各种工具和 APl，可以降低开发复杂度和学习成本。同时，SpringFramework 支持各种应用场景，包括 Web 应用程序、RESTfulAPl、消息传递、批处理等等。</li>
<li>不断创新和发展：SpringFramework 开发团队一直在不断创新和发展，保持与最新技术的接轨，为开发人员提供更加先进和优秀的工具和框架。</li>
</ol>
<h3 id="springloc-容器概念"><a class="markdownIt-Anchor" href="#springloc-容器概念"></a> Springloc 容器概念</h3>
<h4 id="组件和组件管理概念"><a class="markdownIt-Anchor" href="#组件和组件管理概念"></a> 组件和组件管理概念</h4>
<ul>
<li>
<p>什么是组件？</p>
  <img data-src="https://s2.loli.net/2024/01/28/fgSN1pd8ntBTyPq.png" alt="常规的三层架构处理请求流程" style="zoom:50%;" />
  <img data-src="https://s2.loli.net/2024/01/28/GNJ7lTmRYFcdvgK.png" alt="整个项目就是由各种组件搭建而成" style="zoom:50%;" />
</li>
<li>
<p>我们的期待？：替我们创建组件的对象、帮我们保存组件的对象、帮助我们自动组装、替我们管理事务、协助我们整合其他框架……</p>
</li>
<li>
<p>Sprin 充当组件管理角色（loC）</p>
<p>组件可以完全交给 Spring 框架进行管理， Spring 框架替代了栏 序员原有的 new 对象和对象属性赋值动作等。</p>
<p>Spring 具体的组件管理动作包合：</p>
<ul>
<li>组件对象实例伴</li>
<li>组件属性属性赋值</li>
<li>组件对象之间引用</li>
<li>组件对象存活周期管理</li>
<li>……</li>
</ul>
</li>
</ul>
<p>   我们只需要编写元数据（配置文件）告知 Spring 管理娜些类组件和他们的管理即可！</p>
<p>   注意：组件是映射到应用程序中所有可重用组件的 aVa 对象，应该是可复用的功能对象！</p>
<ul>
<li>组件交给 Spring 管理优势
<ol>
<li>降低了组件之间的耦合性：Springloc 容器通过依赖注入机制，将组件之间的依赖关系削弱，减少了程序组件之间的耦合性，使得组件更加松散地耦合。</li>
<li>提高了代码的可重用性和可维护性：组件的实例化过程、依赖关系的管理等功能交给 Spring IoC 容器处理，使得组件代码更加模块化、可重用、更易于维护。</li>
<li>方便了配置和管理：Spring IoC 容器通过 XML 文件或者注解，轻松的对组件进行配置和管理，使得组件的切换、替换等操作更加的方便和快捷。</li>
<li>交给 Spring 管理的对象（组件）方可享受 Spring 框架的其他功能（AOP 声明式事务管理）等</li>
</ol>
</li>
</ul>
<h4 id="spring-ioc-容器和容器实现"><a class="markdownIt-Anchor" href="#spring-ioc-容器和容器实现"></a> Spring IoC 容器和容器实现</h4>
<p>   Springloc 容器，负责实例化、配置和组装 bean（组件）。容器通过读取配置元数据来获取有关要实例化、配置和组装组件的指令。配置元数据以 XML、Java 注解或 Java 代码形式表现。它允许表达组成应用程序的组件以及这些组件之间丰富的相互依赖关系。</p>
<p>   <code>org.springframework.beans</code> 和 <code>org.springframework.context</code> 包是 SpringFramework 的 loC 容器的基础包。<code>BeanFactory</code> 接口提供了一种高级配置机制，能够管理任何类型的对象，它是 SpringIoC 容器标准化超接口！<code>ApplicationContext</code> 是 BeanFactory 的子接口。</p>
<p>   <code>ApplicationContext</code> 补充：</p>
<ul>
<li>
<p>更容易与 Spring 的 AOP 功能集成</p>
</li>
<li>
<p>消息资源处理 星（用于国际化）</p>
</li>
<li>
<p>特定于应用程序给予此接口实现，例如 Web 应用程序的 <code>WebApplicationContext</code></p>
<p>简而言之，<code>BeanFactory</code> 提供了配置框架和基本功能，而 <code>ApplicationContext</code> 添加了更多特定于企业的功能。<code>ApplicationContext</code> 是 <code>BeanFactory</code> 白 的完整超集！</p>
</li>
</ul>
<p>   <code>ApplicationContext</code> 容器实现类：</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型名</th>
<th>简介</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>ClassPathXmlApplicationContext</code></td>
<td>通过读取类路径下的 XML 格式的配置文件创建 IOC 容器对象</td>
</tr>
<tr>
<td style="text-align:center"><code>FileSystemXmlApplicationContext</code></td>
<td>通过文件系统路径读取 XML 格式的配置文件创建 IOC 容器对象</td>
</tr>
<tr>
<td style="text-align:center"><code>AnnotationConfigApplicationContext</code></td>
<td>通过读取 Java 配置类创建 IOc 容器对象</td>
</tr>
<tr>
<td style="text-align:center"><code>WebApplicationContext</code></td>
<td>专门为 Web 应用准备，基于 Web 环境创建 IOC 容器对象，并将对象引入存入 ServletContext 域中。</td>
</tr>
</tbody>
</table>
<p>   Spring 框架提供了多种配置方式：XML 配置方式、注解方式和 Java 配置类方式：</p>
<ul>
<li>
<p>XML 配置方式：是 Spring 框架最早的配置方式之一，通过在 XML 文件中定义 Bean 及其依赖关系、Bean 的作用域等信息，让 SpringIoC 容器来管理 Bean 之间的依赖关系。该方式从 Spring 框架的第一版开始提供支持。</p>
</li>
<li>
<p>注解方式从 Spring2.5 版本开始提供支持，可以通过在 Bean 类上使用注解来代替 XML 配置文件中的配置信息。通过在 Bean 类上加上相应的注解（如@Component，@Service，@Autowired 等），将 Bean 注册到 SpringIoC 容器中，这样 SpringIoC 容器就可以管理这些 Bean 之间的依赖关系。</p>
</li>
<li>
<p>Java 配置类方式：从 Spring3.o 版本开始提供支持，通过 Java 类来定义 Bean、Bean 之间的依赖关系和配置信息，从而代替 xML 配置文件的方式。Java 配置类是一种使用 Java 编写配置信息的方式，通过@Configuration、@Bean 等注解来实现 Bean 和依赖关系的配置。</p>
<p>配置方式的使用场景不同，为了更多体验每种方式，SSM 期间，我门使用 XML+注解方式为主。 SpringBoot 期间，我们使用配置类+注解方式为主！</p>
</li>
</ul>
<h4 id="spring-iocdi-概念总结"><a class="markdownIt-Anchor" href="#spring-iocdi-概念总结"></a> Spring IoC/DI 概念总结</h4>
<ul>
<li>
<p>loc 容器</p>
<p>SpringloC 容器，负责实例化、配置和组装 bean（组件）。容器通过读取配置元数据来获取有关要实例化、配置和组装组件的指令。</p>
</li>
<li>
<p>IoC（Inversion of Control)控制反转</p>
<p>主要是针对对象的创建和调用控制而言的，也就是说，当应用程序需要使用一个对象时，不再是应用程序直接创建该对象，而是由 IoC 容器来创建和管理：即控制权由应用程序转移到 IoC 容器中，也就是“反转”了控制权。这种方式基本上是通过依赖查找的方式实现的，即 IoC 容器维护着构成应用程序的对象，并负责创建这些对象。</p>
</li>
<li>
<p>DI（Dependency Iniection）依赖注入</p>
<p>DI 是指在组件之间传递依赖关系的过程中，将依赖关系在容器内部进行处理，这样就不必在应用程序代码中硬编码对象之间的依赖关系，实现了对象之间的解耦合。在 Spring 中，DI 是通过 XML 配置文件或注解的方式实现的。它提供了三种形式的依赖注入：构造函数注入、Setter 方法注入和接口注入。</p>
</li>
</ul>
<h3 id="spring-iocdi-实现"><a class="markdownIt-Anchor" href="#spring-iocdi-实现"></a> Spring IoC/DI 实现</h3>
<h4 id="实现步骤"><a class="markdownIt-Anchor" href="#实现步骤"></a> 实现步骤</h4>
<ol>
<li>
<p><strong>配置元数据（配置）</strong></p>
<p>配置元数据，既是编写交给 SpringloC 容器管理组件的信息，配置方式有三种。</p>
<p>基于 XML 的配置元数据的基本结构：</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xmlversion=<span class="string">&quot;1.0&quot;</span>encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- ！-此处要添加一些约束，配置文件的标签并不是随意命名  --&gt;</span> </span><br><span class="line">&lt; beans xmlns =&quot; http://www.springframework.org/schema/beans &quot;</span><br><span class="line">       xmlns: xsi = &quot;http://www.w3.org/2001/xMLSchema-instance&quot;</span><br><span class="line">       xsi: schemaLocation = &quot;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&quot; &gt;</span><br><span class="line">    </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> [<span class="attr">1</span>]<span class="attr">class</span>=<span class="string">&quot;...&quot;</span>[<span class="attr">2</span>]&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!--:collaborators and configuration for this bean go here--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;...&quot;</span> <span class="attr">class</span>=<span class="string">&quot;...&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- collaborators andconfiguration for this bean go here --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line">    &lt;!-more bean definitions go here--&gt; </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>SpringloC 容器管理一个或多个组件。这些组件是使用你提供给容器的配置元数据（例如，以 XML <code>&lt;bean/&gt;</code> 定义的形式，它可用写 <code>&lt;bean/&gt;</code>，也可以说写 <code>&lt;bean&gt;&lt;bean/&gt;</code>）创建的。</p>
<p><code>&lt;bean/&gt;</code> 标签 == 组件信息声明</p>
<ul>
<li><code>id</code> 属性是标识单个 Bean 定义的字符串。</li>
<li><code>class</code> 属性定义 Bean 的类型并使用完全限定的类名。</li>
</ul>
</li>
<li>
<p><strong>实例化 IoC 容器</strong></p>
<p>提供给 <code>ApplicationContext</code> 构造函数的位置路径是资源字符串地址，允许容器从各种外部资源（如本地文件系统、Java <code>CLASSPATH</code> 等）加载配置元数据。</p>
<p>我们应该选择个合适的实现类，进行 IoC 容器的实例化：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;services.xml&quot;</span>, <span class="string">&quot;daos.xml&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>使用容器，获取 Bean(组件）</strong></p>
<p><code>ApplicationContext</code> 是一个高级工厂的接口，能够维护不同 bean 及其依赖项的注册表。通过使用方法 <code>T getBean(String name, Class&lt;T&gt; requiredType)</code>，可以检索 bean 的实例。</p>
<p>允许读取 Bean 定义并访问它们，如以下示例所示：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建 ioc 容器对象，指定配置文件，ioc 也开始实例组件对象 </span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;services.xml&quot;</span> <span class="string">&quot;daos.xml&quot;</span>); </span><br><span class="line"><span class="comment">//获取 ioc 容器的组件对象 </span></span><br><span class="line"><span class="type">PetStoreService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;petstore&quot;</span>, PetStoreService.class);</span><br><span class="line"><span class="comment">//使用组件对象 </span></span><br><span class="line">List &lt;string&gt; userList = service.getUsernameList();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="基于-xml-方式管理-bean"><a class="markdownIt-Anchor" href="#基于-xml-方式管理-bean"></a> 基于 XML 方式管理 Bean</h4>
<h5 id="声明配置文件-创建容器和获取-bean"><a class="markdownIt-Anchor" href="#声明配置文件-创建容器和获取-bean"></a> 声明配置文件、创建容器和获取 Bean</h5>
<ul>
<li>
<p>思路</p>
  <img data-src="https://s2.loli.net/2024/01/28/TktJxHShfNrZ42C.png" alt="声明配置文件和创建容器思路" style="zoom:50%;" />
</li>
<li>
<p>准备（框架的搭建一般思路 ❶创建 Maven 工程 ❷引入依赖（jar 包） ❸编写配置文件  ❹使用核心类库测试）</p>
<ol>
<li>
<p>创建 Maven 工程</p>
</li>
<li>
<p>导入 Springloc 相关依赖</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--spring context依赖--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--当你引入SpringContext依赖之后，表示将Spring的基础依赖引入了--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.springframework <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> spring-context <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span> 6.0.6 <span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--unit5测试--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.junit.jupiter <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> junit-jupiter-api <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span> 5.3.1 <span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>准备组件类（HappyComponent）</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HappyComponent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HappyComponent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进行了构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doWork</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HappyComponent.doWork&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建 spring01.xml 文件</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;HappyComponent01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在测试里写</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//1.基 springo1.xml 配置文件，创建 Ioc 容器</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring01.xml&quot;</span>);</span><br><span class="line">    <span class="comment">//2.根据 id 获取 Bean 对象，需要强转</span></span><br><span class="line">    <span class="comment">//HappyComponent happyComponent01 = (HappyComponent)context.getBean(&quot;HappyComponent01&quot;);</span></span><br><span class="line">    <span class="comment">//2.根据类来获取 Bean 对象，需要类型唯一，开发常用</span></span><br><span class="line">    <span class="comment">//HappyComponent happyComponent01 = context.getBean(HappyComponent.class);</span></span><br><span class="line">    <span class="comment">//2.两种者结合获取，学习常有</span></span><br><span class="line">    <span class="type">HappyComponent</span> <span class="variable">happyComponent01</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;HappyComponent01&quot;</span>, HappyComponent.class);</span><br><span class="line">    <span class="comment">//3.使用对象</span></span><br><span class="line">    happyComponent01.doWork();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>
<p>其他说明</p>
<ul>
<li>bean 的 <code>id</code> 不能重复。</li>
<li>我：本质是设置配置文件，然后刷新。</li>
<li>通过反射调用无参构造方法，可通过编写无参构造验证。</li>
<li>通过 id 获取需要强转。</li>
<li>仅通过类获取对象，需要 <code>class</code> 唯一。</li>
</ul>
</li>
</ul>
<h5 id="bean-属性赋值setter-注入"><a class="markdownIt-Anchor" href="#bean-属性赋值setter-注入"></a> Bean 属性赋值：setter 注入</h5>
<ol>
<li>
<p>组件添加属性</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HappyComponent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String componentName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HappyComponent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进行了构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doWork</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;HappyComponent.doWork&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getComponentName</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;componentName取值&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> componentName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setComponentName</span><span class="params">(String componentName)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;componentName赋值:&quot;</span> + componentName);</span><br><span class="line">        <span class="built_in">this</span>.componentName = componentName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>修改 xml 文件</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;HappyComponent01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- set方法赋值，标签为property --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;componentName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;开心的组件&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;happyComponent01.getComponentName() = &quot;</span> + happyComponent01.getComponentName());</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>说明</p>
<ul>
<li>在 <code>property</code> 里，如果 <code>name</code> 为属性名，者 <code>value</code> 仅能为 8 大基本类型+8 大包装类型+<code>String</code></li>
<li>通过 <code>property</code> 进行赋值，必须提供 <code>set</code> 方法</li>
</ul>
</li>
</ol>
<h5 id="bean-属性赋值引用其他-bean"><a class="markdownIt-Anchor" href="#bean-属性赋值引用其他-bean"></a> Bean 属性赋值：引用其他 Bean</h5>
<ol>
<li>
<p>声明新组件（HappyMachine）</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HappyMachine</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String machineName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMachineName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> machineName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMachineName</span><span class="params">(String machineName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.machineName = machineName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>原组件（HappyComponent）引用新组件</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> HappyMachine happyMachine;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">public</span> HappyMachine <span class="title function_">getHappyMachine</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> happyMachine;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHappyMachine</span><span class="params">(HappyMachine happyMachine)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.happyMachine = happyMachine;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>注入新组件（HappyMachine），并赋值</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;HappyComponent01&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- set方法赋值，标签为property --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;componentName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;开心的组件&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;happyMachine&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;HappyMachine&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HappyMachine&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyMachine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;machineName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;小爱同学&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;happyComponent01.getHappyMachine() = &quot;</span> + happyComponent01.getHappyMachine());</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>说明</p>
<ul>
<li><code>ref</code> 的值为 <code>id</code></li>
<li>声明 bean 不分先后顺序，Spring 容器内部有缓存机制，先实例化后属性赋值</li>
<li><code>ref</code> 容易错写成 <code>value</code>，会抛出 Causedby: java.lang.llegalStateException: Cannot convert value of type<br />
java.lang.Stringtorequiredtype 异常</li>
<li>只有声明到 ioc 容器，方可被其他 bean 引用</li>
<li>外部 bean 是共享的</li>
</ul>
</li>
</ol>
<h5 id="bean-属性赋值内部-bean-声明了解"><a class="markdownIt-Anchor" href="#bean-属性赋值内部-bean-声明了解"></a> Bean 属性赋值：内部 Bean 声明（了解）</h5>
<ol>
<li>
<p>声明内部 bean 配置</p>
<p>在 bean 里面配置的 bean 就是内部 bean，内部 bean 只能在当前 bean 内部使用，在其他地方不能使用。<br />
不会在 ioc 容器中，实例和存储内部 bean，<span style="color:#CC00CC;"> 只会缓存类信息，每次获取的时候再实例化！！</span></p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;HappyComponent02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- set方法赋值，标签为property --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;componentName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;开心的组件&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;happyMachine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyMachine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;machineName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;小艺&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>说明</p>
<ul>
<li><code>property</code> 标签也是有两种写法</li>
</ul>
</li>
</ol>
<h5 id="bean-属性赋值集合类型赋值"><a class="markdownIt-Anchor" href="#bean-属性赋值集合类型赋值"></a> Bean 属性赋值：集合类型赋值</h5>
<ol>
<li>
<p>组件里声明集合</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List &lt;String&gt; stringList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> List &lt;String&gt; getStringList() &#123;</span><br><span class="line">    <span class="keyword">return</span> stringList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStringList</span><span class="params">(List &lt;String&gt; stringList)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.stringList = stringList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>xml 文件里赋值</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HappyComponent02&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;happyMachine&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;HappyMachine&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;componentName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;开心的组件&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;stringList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span> 头 <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span> 手 <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span> 脚 <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span> 身体 <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>说明</p>
<ul>
<li>同理，<code>set</code>、<code>map</code>，在 <code>property</code> 里写相应的标签</li>
<li>除 <code>map</code> 标签外，里面都是 <code>value</code> 标签</li>
<li><code>map</code> 标签里是 <code>entry</code> 标签，<code>entry</code> 标签里面是 <code>key</code> 和 <code>value</code>，引用类型包含在 <code>entry</code> 标签里，<code>String</code> 类型可直接写在 <code>entry</code> 标签上</li>
<li><code>entry</code> 标签也可以写两种方式</li>
<li>Properties 对于 xml 里的标签是 <code>&lt;props&gt;&lt;/props&gt;</code></li>
<li>数组对于 xml 里的标签是 <code>&lt;arpay&gt;&lt;/array&gt;</code></li>
</ul>
</li>
</ol>
<h5 id="bean-属性赋值引入外部-properties-配置参数"><a class="markdownIt-Anchor" href="#bean-属性赋值引入外部-properties-配置参数"></a> Bean 属性赋值：引入外部 Properties 配置参数</h5>
<p>   例子是将 Druid（德鲁伊）连接池对象交给 Spring 的 loC 容器管理！</p>
<ol>
<li>
<p>添加数据库依赖，放到需要的模块里就可以了</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>一个 Druid 使用的老方法</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">dataSource.setDriverclassName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">datasource.seturl(<span class="string">&quot;jdbc: mysql://localhost: 3306/blog&quot;</span>);</span><br><span class="line">datasource.setusername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">dataSource.setPassword(<span class="string">&quot;atguigu&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">DruidPooledConnection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">System.out.println(<span class="string">&quot;connection =&quot;</span> + connection);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在 xml 里配置</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/book&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的方式还是有点死，接下来改进。</p>
<p>创建 Resource Bundle，名字取 db.properties。不加前缀的话，会使用电脑当前用户去连接数据库。</p>
 <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driverclassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/book</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>
<p>配置 xml</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:db.properties&quot;</span>/&gt;</span><span class="comment">&lt;!-- 前面面不用自己全写，根据提示回车，idea会帮助添加约束 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverclassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring01.xml&quot;</span>);</span><br><span class="line"><span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;dataSource&quot;</span>, DruidDataSource.class);</span><br><span class="line"><span class="type">DruidPooledConnection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">System.out.println(<span class="string">&quot;connection = &quot;</span> + connection);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="高级特性factorybean-特性"><a class="markdownIt-Anchor" href="#高级特性factorybean-特性"></a> 高级特性：FactoryBean 特性</h5>
<p>   <code>FactoryBean</code> 接口是 SpringIoC 容器实例化逻辑的可插拔性特点。用于配置复杂的 Bean 对象，可以将创建过程存储在 <code>FactoryBean</code> 的 <code>getObject</code> 方法。<code>FactoryBean&lt;T&gt;</code> 接口提供三种方法：</p>
<ul>
<li><code>T getObject()</code>：返回此工厂创建的对象的实例。该返回值会被存储到 IoC 容器</li>
<li><code>boolean isSingleton()</code>：如果此 <code>FactoryBean</code> 返回单例，则返回 true，否则返回 false。此方法的默认实现返回 true（注意，lombok 插件使用，可能影响效果）。</li>
<li><code>Class&lt;?&gt; getObjectType()</code>：返回 <code>getObject()</code> 方法返回的对象类型，如果事先不知道类型，则返回 <code>null</code>。</li>
</ul>
<p>   例如，<code>Connection</code> 对象的创建，我们通过 <code>class.forName(&quot;com.mysgl.ci.idbc.Driyer&quot;);Connection connection =DriverManager.getConnection(url,user,password);</code>，它和一般的对象创建不一样。</p>
<p>   注意：我们从 <code>getConnection</code> 点进去，我们可以发现返回值上有括号，例如 <code>return (con);</code> 我不明白括号有什么用。</p>
<p>   让 Spring 创建 Connection 对象：</p>
<ol>
<li>
<p>新建包 factory，创建一个类，实现 <code>FactoryBean</code> 接口</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Connection&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//最终生产的对象</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/book&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生产的对象的类型</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> Connection.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生产的对象是否为单例</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置 xml</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;connection&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.factory.ConnectionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring01.xml&quot;</span>);</span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;connection&quot;</span>, Connection.class);</span><br><span class="line">System.out.println(<span class="string">&quot;connection = &quot;</span> + connection);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>说明</p>
</li>
</ol>
<p>   显然，直觉会让你在实现时用 <code>BeanFactory</code>，然而 <code>FactoryBean</code> 和 <code>BeanFactory</code> 是有区别的。</p>
<p>   <strong><code>FactoryBean</code></strong> 是 Spring 中一种特殊的 bean，可以在 <code>getObject</code> 工厂方法自定义的逻辑创建 Bean！是一种能够生产其他 Bean 的 Bean。<code>FactoryBean</code> 在容器启动时被创建，而在实际使用时则是通过调用 <code>getObject</code> 方法来得到某所生产的 Bean。因此，FactoryBean 可以自定义任何所需的初始化逻辑，生产出一些定制化的 bean。</p>
<p>   一般情况下，整合第三方框架，都是通过定义 FactoryBean 实现！！！</p>
<p>   <strong><code>BeanFactory</code></strong> 是 Spring 框架的基础，其作为一个顶级接口定义了容器的基本行为，例如管理 bean 的生命周期、配置文件的加载和解析、bean 的装配和依赖注入等。<code>BeanFactory</code> 接口提供了访问 bean 的方式，例 <code>getBean</code> 方法获取指定的 bean 实例。它可以从不同的来源（例如 Mysgl 数据库、XML 文件、Java 配置类等）获取 bean 定义，并将其转换为 bean 实例。同时，<code>BeanFactory</code> 还包含很多子类（例如 ApplicationContext 接口）提供了额外的强大功能。</p>
<p>   总的来说，<code>FactoryBean</code> 和 <code>BeanFactory</code> 的区别主要在于前者是用于创建 bean 的接口，它提供了更加灵活的初始化定制功能；而后者是用于管理 bean 的框架基础接口，提供了基本的容器功能和 bean 生命周期管理。</p>
<h5 id="高级特性bean-的作用域"><a class="markdownIt-Anchor" href="#高级特性bean-的作用域"></a> 高级特性：Bean 的作用域</h5>
<p>   <code>bean</code> 标签声明 Bean，只是将 Bean 的信息配置给 SpringIoC 容器。在 Ioc 容器中，这些 <code>bean</code> 标签对应的 Spring 内部 <code>BeanDefinition</code> 对象，<code>BeanDefinition</code> 对象内，包含定义的信息（id, class, 属性等等）！这意味着，<code>BeanDefinition</code> 与类概念一样，SpringIoC 容器可以可以根据 <code>BeanDefinition</code> 对象反射创建多个 Bean 对象实例。具体创建多少个 Bean 的实例对象，由 Bean 的作用域 scope 属性指定。默认情况：全局只需要实例化一个 Bean 对象，绝大情况我们也仅需创建一个对象！</p>
<table>
<thead>
<tr>
<th style="text-align:center">取值</th>
<th>含义</th>
<th>创建对象的时机</th>
<th>默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>singleton</code></td>
<td>在 IOC 容器中，这个 bean 的对象始终为单实例</td>
<td>IoC 容器初始化时</td>
<td>是</td>
</tr>
<tr>
<td style="text-align:center"><code>prototype</code></td>
<td>这个 bean 在 IoC 容器中有多个实例</td>
<td>获取 bean 时</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:center">如果是在 WebApplicationcontext 环境下还会有另外两个作用域（但不常用）</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td style="text-align:center"><code>request</code></td>
<td>请求范围内有效的实例</td>
<td>每次请求</td>
<td>否</td>
</tr>
<tr>
<td style="text-align:center"><code>session</code></td>
<td>会话范围内有效的实例</td>
<td>每次会话</td>
<td>否</td>
</tr>
</tbody>
</table>
<h5 id="高级特性bean-的生命周期此处比较简略"><a class="markdownIt-Anchor" href="#高级特性bean-的生命周期此处比较简略"></a> 高级特性：Bean 的生命周期（此处比较简略）</h5>
<p>   SpringFramework 的 Bean 生命周期是指一个 Bean 对象从它的创建、初始化到销毁的整个过程。初始化方法用 <code>init-method</code> 属性指定。销毁方法由 <code>destroy-method</code> 指定。初始化在 <code>set</code> 方法之后。<code>ApplicationContext</code> 不具备关闭能力，<code>ConfigurableApplicationdontext</code> 具备关闭能力。实现 <code>BeanPostProcessor</code> 接口，可以做到在初始化之前和之后执行一些需要的步骤（后置处理器的前置方法、后置处理器的后者置方法），将它放到容器了，对所有 bean 都将起效果，相当于统一处理和过滤。</p>
<h4 id="基于注解方式管理-bean"><a class="markdownIt-Anchor" href="#基于注解方式管理-bean"></a> 基于注解方式管理 Bean</h4>
<h5 id="bean-注解标记和扫描ioc"><a class="markdownIt-Anchor" href="#bean-注解标记和扫描ioc"></a> Bean 注解标记和扫描（Ioc）</h5>
<p>   和 XML 配置文件一样，注解本身并不能执行，注解本身仅仅只是做一个标记，具体的功能是框架检测到注解标记的位置，然后针对这个位置按照注解标记的功能来执行具体操作。本质上：所有一切的操作都是 Java 代码来完成的，XML 和注解只是告诉框架中的 Java 代码如何执行。</p>
<p>   Spring 为了知道程序员在哪些地方标记了什么注解，就需要通过扫描的方式，来进行检测。然后根据注解进行后续操作。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring.xml.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring.xml.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span><span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userController&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.spring.xml.controller.UserController&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UserDaouserDao = ioc.qetBean(<span class="string">&quot;userDao&quot;</span>, UserDao.class);</span><br><span class="line"><span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userService&quot;</span>, Userservice.class);</span><br><span class="line"><span class="type">UserController</span> <span class="variable">userController</span> <span class="operator">=</span> ioc.qetBean(<span class="string">&quot;userController&quot;</span>, UserController.class);</span><br></pre></td></tr></table></figure>
<p>   以前，在 service 里调用 dao 是写死的，当要更换时要修改。现在可以写上 <code>set</code> 方法，在 xml 里进行属性配置，将赋值 dao 交给 Spring。当项目庞大时，xml 方式就有些捉襟见肘了。</p>
<table>
<thead>
<tr>
<th style="text-align:center">注解</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>@Component</code></td>
<td>该注解用于描述 Spring 中的 Bean，它是一个泛化的概念，仅仅表示容器中的一个组件（Bean），并且可以作用在应用的任何层次，例如 Service 层、Dao 层等。使用时只需将该注解标注在相应类上即可。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Repository</code> 仓库</td>
<td>该注解用于将数据访问层（Dao 层-&gt; Mapper-&gt; biz）的类标识为 Spring 中的 Bean，其功能与 <code>@Component</code> 相同</td>
</tr>
<tr>
<td style="text-align:center"><code>@Service</code></td>
<td>该注解通常作用在业务层（Service 层）用于将业务层的类标识为 Spring 中的 Bean，其功能与 <code>@Component</code> 相同。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Controller</code></td>
<td>该注解通常作用在控制层（如 SpringMVC 的 Controller），用于将控制层的类标识为 Spring 中的 Bean，其功能与 <code>@Component</code> 相同。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Configuration</code></td>
<td>标志为配置类</td>
</tr>
</tbody>
</table>
<p>   现在已经标记了，需要告诉 Spring 哪里有标记了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.spring.anno&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;arnotation注解&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller注解&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   使用 <code>context:component-scan</code> 标记可以在指定的包下扫描，包含子包。以前在 xml 里配置了 id 和 class，现在怎么 getBean 呢？名字用类名的首字母小写（也可以对 <code>value</code> 属性赋值改名，只赋值 <code>value安全</code> 可忽略属性名。），class 用 <code>类.class</code>。排除和包含（只扫某某，则需将 <code>use-default-filters</code> 属性改为 <code>false</code>）用子标签，选择合适的 <code>type</code> 和 <code>expression</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ioc.getBean(<span class="string">&quot;userController类名首字母小写&quot;</span>,UserController.class);</span><br></pre></td></tr></table></figure>
<h5 id="bean-属性赋值引用类型自动装配di"><a class="markdownIt-Anchor" href="#bean-属性赋值引用类型自动装配di"></a> Bean 属性赋值：引用类型自动装配（DI）</h5>
<p>   前面已经通过注解将 bean 放到容器里了，但还需要进行属性赋值。注意参与自动装配的组件（需要装配、被装配） 全部都必须在 loc 容器中。在成员变量（set 方法、构造方法）上自接标记 <code>@Autowired</code> 注解即可，不需要提供 set 方法。</p>
<p>   <code>@Autowired</code> 先按照类型进行寻找，再找按照名字进行寻找。如果类型一样，可以用 <code>@Qualifier</code> 指定名字，不过不能单独使用，和 <code>@Autowired</code> 一起使用。另外 <code>@Autowired</code> 还有一个属性 <code>required=false</code>，表示能装就装。</p>
<p>   假设要装配 Dao，但是容器里一个都没有，会报错，<code>至少一个和Autowired(required=true）</code>；当把 <code>required=true</code> 改为 <code>required=false</code> 后，报空指针异常。</p>
<p>   <code>@Resource</code> 和 <code>@Autowired</code> 都可以自动注入，但注入方式是相反的，<span style="background:#00CC66;"> 而且 <code>@Resource</code> 是 JDK 的。</span> JDK 还有其他的注解，比如一下一些我没记住的。8 之后，要使用部分注解还有额外添加依赖。小细节：<code>@Resource</code> 在 idea 不显示小白线</p>
<table>
<thead>
<tr>
<th style="text-align:center">注解</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>@SuppressWarnings</code></td>
<td>抑制编译时产生的警告消息。</td>
</tr>
<tr>
<td style="text-align:center"><code>@SafeVarargs</code></td>
<td>标识一个有安全性警告的可变参数方法。</td>
</tr>
<tr>
<td style="text-align:center"><code>@PostConstruct</code></td>
<td>标识一个方法作为初始化方法。</td>
</tr>
<tr>
<td style="text-align:center"><code>@PreDestroy</code></td>
<td>标识一个方法作为销毁方法。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Resource.AuthenticationType</code></td>
<td>标识注入的资源的身份验证类型。</td>
</tr>
<tr>
<td style="text-align:center"><s><code>@Resource.AuthenticationName</code></s></td>
<td>标识注入的资源的默认名称。</td>
</tr>
<tr>
<td style="text-align:center"><code>@SupportedAnnotationTypes</code></td>
<td>标识注解处理器所处理的注解类型。</td>
</tr>
<tr>
<td style="text-align:center"><code>@SupportedSourceVersion</code></td>
<td>标识注解处理器支持的 Java 源码版本。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Named</code></td>
<td>标识一个被依赖注入的组件的名称。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Inject</code></td>
<td>标识一个需要被注入的依赖组件。</td>
</tr>
<tr>
<td style="text-align:center"><code>@Singleton</code></td>
<td>标识一个组件的生命周期只有一个唯一的实例。</td>
</tr>
<tr>
<td style="text-align:center"><code>@RolesAllowed</code></td>
<td>标识授权角色。</td>
</tr>
<tr>
<td style="text-align:center"><code>@PermitAll</code></td>
<td>活动无需进行身份验证。</td>
</tr>
<tr>
<td style="text-align:center"><code>@DenyAll</code></td>
<td>标识不提供针对该方法的访问控制。</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td></td>
</tr>
</tbody>
</table>
<h5 id="bean-属性赋值基本类型属性赋值di"><a class="markdownIt-Anchor" href="#bean-属性赋值基本类型属性赋值di"></a> Bean 属性赋值：基本类型属性赋值(DI）</h5>
<p>   <code>@Value</code> 通常用于注入外部化属性，因为容器一启动，就已经有值了，且不能改变。先简单写一个 properties 文件和配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;config.age:100&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   在 xml 里引入 properties 文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:config.properties&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>   <code>@Value(&quot;$&#123;config.age:100&#125;&quot;)</code> 如果没有写 <code>:100</code>，当找不到时，就会使用 100 作为默认值。</p>
<h4 id="基于配置类方式管理-bean"><a class="markdownIt-Anchor" href="#基于配置类方式管理-bean"></a> 基于配置类方式管理 Bean</h4>
<p>   Spring 完全注解配置（FullyAnnotation-basedConfiguration）是指通过 Java 配置类代码来配置 Spring 应用程序使用注解采替代原本在 XML 配置件中的配置。相对于 XML 配置，完全注解配置具有更强的类型安全性和更好的可读性。</p>
<p>   创建配置类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//表明配置，加入容器</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.spring.allanno&quot;)</span><span class="comment">//扫描的包</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:config.properties&quot;)</span><span class="comment">//导入的外部资源</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   说明：<code>@ComponentScan</code> 和 <code>@PropertySource</code> 都有带 <code>s</code> 的，可以写多个 <code>ComponentScan</code> 和 <code>PropertySource</code>。其中 <code>@ComponentScan</code> 接收数组，内部的 <code>basePackages</code> 有别名 <code>value</code>。在上面的代码块中，只写了一个包，所以省略了许多。</p>
<p>   扫描和外部资源已经可以实现了，现在实现配置 bean，例子：将 Druid 连接池对象存储到 IoC 容器。（使用 <code>@Bean</code> 注解）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.spring.allanno&quot;)</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:config.properties&quot;,&quot;classpath:db.properties&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Value(&quot;$&#123;jdbc.driverclassName&#125;&quot;)</span></span><br><span class="line"><span class="comment">//    private String driverClassName;</span></span><br><span class="line"><span class="comment">//    @Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line"><span class="comment">//    private String url;</span></span><br><span class="line"><span class="comment">//    @Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line"><span class="comment">//    private String userName;</span></span><br><span class="line"><span class="comment">//    @Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line"><span class="comment">//    private String password;</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Scope(scopeName = ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">dataSource</span><span class="params">(<span class="meta">@Value(&quot;$&#123;jdbc.driverclassName&#125;&quot;)</span>String driverClassName,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span>String url,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span>String userName,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span>String password)</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(driverClassName);</span><br><span class="line">        dataSource.setUrl(url);</span><br><span class="line">        dataSource.setUsername(userName);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">    <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;dataSource&quot;</span>, DataSource.class);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">    System.out.println(<span class="string">&quot;connection = &quot;</span> + connection);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   说明：<code>@Bean</code> 返回值类型即为 class，方法名即为 id。如果不满意 id，可以自己取，可以取多个。如果不喜欢属性变量被其它使用，可将其写在方法参数列表里，就像 SpringMVC 那样。bean 的属性有 scope，可以用注解 <code>@Scope(scopeName = ConfigurableBeanFactory.SCOPE_PROTOTYPE)</code> 表示，可见有些值 Spring 提供了，不用写魔法值。初始化和销毁方法可以在 <code>@Bean</code> 注解里指示属性 <code>initMethod</code> 和 <code>destroyMethod</code>。</p>
<p>   之前用 xml 时，配置 bean 时可以引用其他 bean。配置类怎么实现呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HappyMachine <span class="title function_">happyMachine</span><span class="params">()</span>&#123;</span><br><span class="line">	HappyMachine happyMachine=<span class="keyword">new</span> <span class="title class_">HappyMachine</span>();</span><br><span class="line">	happyMachine.setMachineName(<span class="string">&quot;小爱同学&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> happyMachine;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HappyComponent <span class="title function_">happyComponent</span><span class="params">(HappyMachine happyMachine)</span>&#123;</span><br><span class="line">    HappyComponent happyComponent= <span class="keyword">new</span> <span class="title class_">HappyComponent</span>();</span><br><span class="line">	happyComponent.setHappyMachine(happyMachine);</span><br><span class="line">	<span class="keyword">return</span> happyComponent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>   以后配置类肯定不止一个。在总的配置类里添加 <code>@Import（class）</code>，在低版本（4），被导入类必须添加 <code>@Configuration</code> 注解；高版本可省略，相当于自动添加 <code>@Configuration</code>。</p>
<p>   有时不是所有的 bean 要立马注入。<code>@Conditional</code> 是 Spring4 新提供的注解， 能够根据一定的条件进行判断，满足条件就给容器注入 bean。可以放到类和方法上。传入一个实现了 <code>Condition</code> 接口的类。这个接口是一个断言接口 <code>boolean matches(Condition Contextcontext,AnnotatedTypeMetadata metadata);</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConditional</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">        <span class="comment">//获取 ioc 使用的 beanFactory</span></span><br><span class="line">        <span class="type">ConfigurableListableBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> context.getBeanFactory();</span><br><span class="line">        <span class="comment">//获取类加载器</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> context.getClassLoader();</span><br><span class="line">        <span class="comment">//获取 bean 定义的注册类</span></span><br><span class="line">        <span class="type">BeanDefinitionRegistry</span> <span class="variable">registry</span> <span class="operator">=</span> context.getRegistry();</span><br><span class="line">        <span class="comment">//获取当前环境信息</span></span><br><span class="line">        <span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> context.getEnvironment();</span><br><span class="line">        <span class="type">String</span> <span class="variable">osName</span> <span class="operator">=</span> environment.getProperty(<span class="string">&quot;os.name&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> osName.contains(<span class="string">&quot;Windows&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="三种方式的配置总结"><a class="markdownIt-Anchor" href="#三种方式的配置总结"></a> 三种方式的配置总结</h4>
<p>   <strong>XML 方式：</strong></p>
<ul>
<li>所有内容写到 xml 格式配置文件中</li>
<li>声明 bean 通过 bean 标签</li>
<li>&lt; bean 标签包含基本信息（id, class）和属性信息 property name value/ref</li>
<li>引入外部的 properties 文件可以通过 context: property-placeholder</li>
<li>loC 具体容器实现选择 ClassPathXmlApplicationContext 对象</li>
</ul>
<p>   <strong>XML+注解方式：</strong></p>
<ul>
<li>注解负责标记 loc 的类和进行属性装配</li>
<li>xml 文件依然需要，需要通过 &lt; context: com nponent-scan 标签指定注解范围</li>
<li>标记 loC 注解：@Component @Service @Controller @Repository</li>
<li>标记 Dl 注解：@Autowired @Qualifier @Resource @Value</li>
<li>loc 具体容器实现选择 ClassPathXmlApplicationContext 对象</li>
</ul>
<p>   <strong>完全注解方式：</strong></p>
<ul>
<li>完全注解方式指的是去掉 xml 文件，使用配置类+注解实现</li>
<li>xml 文件替换成使用@Configuration 注解标记的类</li>
<li>标记 loC 注解：@Component @Service @Controller @Repository</li>
<li>标记 Di 注解：@Autowired @Qualifier @Resource @Value</li>
<li>&lt; context: component-scan 标签指定注解范围使用@ComponentScan(basePackages = {&quot; com.atguigu.components &quot;})替代</li>
<li>&lt; context: property-placeholder 引入外部配置文件使用@PropertySource({&quot; classpath: application.properties “,” classpath: jdbc.properties &quot;})替代</li>
</ul>
<h4 id="轻松测试配置"><a class="markdownIt-Anchor" href="#轻松测试配置"></a> 轻松测试配置</h4>
<p>   好处：不需要自己创建 IOC 容器对象了；任何需要的 bean 都可以在测试类中直接享受自动装配。</p>
<p>   导入依赖：junit-jupiter-api 和 spring-test</p>
<p>   使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringJUnitConfig(locations=&#123;&quot;classpath:spring-context.xml&quot;&#125;)</span> <span class="comment">//指定配置文件 xml</span></span><br><span class="line"><span class="meta">@SpringJUnitConfig(value=&#123;BeanConfig.class&#125;)</span> <span class="comment">//指定配置类</span></span><br></pre></td></tr></table></figure>
<h3 id="spring-aop-面向切面编程"><a class="markdownIt-Anchor" href="#spring-aop-面向切面编程"></a> Spring AOP 面向切面编程</h3>
<ul>
<li>OOP：Object Orinted Programming：面向对象编程，封装、继承、多态
<ul>
<li>继承强调的是纵向的扩展</li>
</ul>
</li>
<li>Aspect Orinted Programming：面向切面编程
<ul>
<li>对 OOP 作了一种补充</li>
<li>横切强调的是横向的扩展</li>
<li>代理设计模式</li>
</ul>
</li>
</ul>
<p>   比如，大量的方法要用类似的日志，可以使用代理模式（静态代理、动态代理）。</p>
<p>   动态代理技术分类：JDK 动态代理、cglib。</p>
<ul>
<li>
<p>JDK 动态代理：JDK 原生的实现方式，需要被代理的目标类 <strong>必须实现接口</strong>，他会根据目标类的接口动态生成一个代理对象！代理对象和目标对象有相同的接口！（拜把子）</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(T target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//参数目标类的类加载器 目标类实现的所有接口！代理对象要执行的代码过程</span></span><br><span class="line">        <span class="type">T</span> <span class="variable">proxy</span> <span class="operator">=</span> (T)Proxy.newProxyInstance(target.getClass().getClassLoader(),</span><br><span class="line">                target.getClass().getInterfaces(),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">MyInvocationHandler</span>());</span><br><span class="line">        <span class="keyword">return</span> proxy;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span>  <span class="title class_">MyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>&#123;</span><br><span class="line">        <span class="comment">//Method 目标对象的方法 args 目标方法的参数</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            System.out.println(method.getName() + <span class="string">&quot;方法执行了，入参是&quot;</span> + Arrays.toString(args));</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">            System.out.println(method.getName() + <span class="string">&quot;方法执行结束了，出参是&quot;</span> + result);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用方式是首先你有一个接口，有一个这个接口的实现类，将这个类的对象传入代理工厂，通过工厂获取代理对象，代理对象执行自己要执行的方法就行。</p>
</li>
<li>
<p>cglib：通过继承被代理的目标类实现代理，所以不需要自标类实现接口！ （认干爹）</p>
</li>
</ul>
<p>   通过上面的例子，发现代理需要自己编写代理工厂。</p>
<p>   AOP 思想主要的应用场景：日志记录、事务处理、安全控制、性能监控、异常处理、缓存控制、动态代理。</p>
<p>   SpringAOP 框架，基于 AOP 编程思维，封装动态代理技术，简化动态代理技术实现的框架。</p>
<img data-src="https://s2.loli.net/2024/02/12/B9VpyvojSPCKz6W.png" alt="Spring基于注解的AOP" style="zoom:50%;" />
<p>注解层：AspectJ：早期的 AOP 实现的框架，SpringAOP 借用了 AspectJ 中的 AOP 注解。导入 spring-aspects。</p>
<p>实现层：spring-aop：不用直接导，在 context 里自带。</p>
<p>   在前面，有一个接口和一个实现该接口的类。以简单日志切入为例子。新建一个切面类，<span style="color:#CC0000;"> 必须以 <code>Aspect</code> 结尾，并使用 <code>@Aspect</code> 注解。</span> 当让要使 spring 管理，要加到容器里，所以需要 <code>@Component</code>。要切入，则需要知道切入点。对于一个方法，显然有方法执行前、方法执行后、方法正确执行、方法异常执行，对应的注解是 <code>@Before</code>、<code>@After</code>、<code>@AfterReturning</code>、<code>@AfterThrowing</code>（所在的方法可叫做通知 Advice，前置、后置等等），对应的主要参数是切入点表达式 <code>execution(public void com.atguigu.aop.AImpl.*())</code>，包含了切入方法的权限修饰符、方法返回值类型，包路径+类名+方法名+参数，有一种声明方法的感觉。在正确执行后，可以通过 <code>returning</code> 属性指定返回值名，并在切入点方法里声明同样名字的参数。在异常执行时，可以通过 <code>throwing</code> 属性指定异常变量名，并在方法里声明同样名字的参数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line">    <span class="comment">//切入点表达式：方法修饰符 返回值类型 包名路径和类名.方法名(参数)</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(public void com.atguigu.aop.AImpl.*())&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeAdvice</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        <span class="comment">//joinPoint 代表的就是切入的方法。</span></span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getArgs() = &quot;</span> + Arrays.toString(joinPoint.getArgs()));</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getKind() = &quot;</span> + joinPoint.getKind());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSignature() = &quot;</span> + joinPoint.getSignature());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSignature().getDeclaringType() = &quot;</span> + joinPoint.getSignature().getDeclaringType());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSignature().getDeclaringTypeName() = &quot;</span> + joinPoint.getSignature().getDeclaringTypeName());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSignature().getModifiers() = &quot;</span> + joinPoint.getSignature().getModifiers());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSignature().getName() = &quot;</span> + joinPoint.getSignature().getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getSourceLocation() = &quot;</span> + joinPoint.getSourceLocation());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getStaticPart() = &quot;</span> + joinPoint.getStaticPart());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getTarget() = &quot;</span> + joinPoint.getTarget());</span><br><span class="line">        System.out.println(<span class="string">&quot;joinPoint.getThis() = &quot;</span> + joinPoint.getThis());</span><br><span class="line">        System.out.println(<span class="string">&quot;前置通知执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After(&quot;execution(public void com.atguigu.aop.AImpl.*())&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterAdvice</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后置通知执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方法正确执行后，正确返回结果，执行该通知。在后置之前。</span></span><br><span class="line">    <span class="comment">//不管有没有异常，前置和后置都会执行。</span></span><br><span class="line">    <span class="comment">//出现异常，AfterReturning 不执行</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(public void com.atguigu.aop.AImpl.*())&quot;, returning = &quot;result&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint joinPoint,Object result)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line">        System.out.println(<span class="string">&quot;正确执行通知执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//在后置之前，异常发生时</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(public void com.atguigu.aop.AImpl.*())&quot;,throwing = &quot;exception&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Exception exception)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;exception.getMessage() = &quot;</span> + exception.getMessage());</span><br><span class="line">        System.out.println(<span class="string">&quot;异常通知执行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   <code>@Before</code> 在方法执行前、<code>@After</code> 方法执行结束后、<code>@AfterReturning</code> 方法正确执行拿到返回值，在结束前、<code>@AfterThrowing</code> 方法异常时，且在在结束前。</p>
<p><strong>说明：</strong></p>
<ul>
<li>
<p>切入点表达式里，权限修饰符和返回值类型可以用 <span style="color:#FF0000;"> 一个 </span> <code>*</code> 表示，也可 <span style="color:#FF0000;"> 单独返回值 </span> 类型用 <code>*</code> 表示</p>
</li>
<li>
<p>包路径可固定写，也可将某一层用 <code>*</code> 表示，也可以用 <code>com..</code> 表示 com 下所有层，也可用 <code>*..</code> 表示所有层</p>
</li>
<li>
<p>类名可用 <code>*</code> 表示，类名的部分也可用 <code>*</code> 表示，<code>*..*</code> 表示任意包任意类</p>
</li>
<li>
<p>方法名也用类名的规则</p>
</li>
<li>
<p>参数没有用空括号表示，参数是有序的，任意参数用 <code>(..)</code> 表示，也可组合部分任意</p>
</li>
<li>
<p>切入点表达式重用，写一个空方法，在上面用 <code>@Pointcut</code> 注解，将切入点表达式作为属性，其他地方调用就是直接将原先的表达式换做方法名+括号。支持跨类调用，例：<code>@Before(&quot;包.类.方法名&quot;)</code>，因此可单独写一个类来写切入点表达式。</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(*  *..AImpl.*())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterAdvice</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>   <code>JoinPoint</code> 接口可以获取方法签名、传入的实参等信息，使用时，需要在切入方法参数里声明。</p>
<p>   还有一个通知，包括了前 4 种的功能，对应 try…catch…finally 结构。<code>@Around</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;execution(*  *..AImpl.*())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">aroundAdvice</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前置通知执行了&quot;</span>);</span><br><span class="line">        <span class="comment">//执行目标方法</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;正确执行通知执行&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;异常通知执行&quot;</span>);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后置通知执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>   当有多个切面时（字母顺序），通过 <code>@Order</code> 注解调整优先级，默认为最大值，越小优先级越大。</p>
<p>   简单了解一下用 xml 实现 aop。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    创建目标类对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;a&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.aop.AImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    创建切面类对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logAspect&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.aop.anno.LogAspect&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    aop配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        共用切入点表达式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pc&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* *..AImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;logAspect&quot;</span> <span class="attr">order</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturning&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;afterThrowing&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;exception&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;aroundAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pc&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="spring-声明式事务"><a class="markdownIt-Anchor" href="#spring-声明式事务"></a> Spring 声明式事务</h3>
<ul>
<li>概念：是一个原子操作，是一个最小的执行单元。</li>
<li>四大特性：
<ul>
<li>A：原子性：表示事务是一个整体，要么都成功，要么都失败</li>
<li>C：一致性：数据要么是事务成功之后的状态，要么是回滚到之前的状态</li>
<li>I：隔离性：多个事务并行时，事务之间互不干扰。A 事务只能读取 A 事务修改之前或修改之后的数据。同<br />
时，B 事务所做的操作对 A 不产生影响</li>
<li>D：持久性：事务提交了，对数据库的数据产生的影响是永久性的</li>
</ul>
</li>
<li>MySQL 的四大隔离级别：
<ul>
<li>读未提交：A 事务可以读取到 B 事务已修改但未提交的数据。</li>
<li>读已提交：A 事务可以读取到 B 事务已修改且已提交的数据。未提交的，读取不到。</li>
<li>可重复读（<span style="color:#FF007F;"> MySQL 的默认隔离级别 </span>）：A 事务只能读取 A 事务开始之后的数据，不会被其他事务所影响。</li>
<li>串行化：A 事务操作时，其他事务均不可操作。加锁：表锁、行锁、列锁。</li>
</ul>
</li>
<li>JDBC 中如何操作事务
<ol>
<li>关闭当前连接的自动提交：<code>connection.setAutocommit（false）</code></li>
<li>提交事务：<code>connection.commit()</code></li>
<li>回滚事务：<code>connection.rollback(）</code></li>
</ol>
</li>
<li>Spring 认为事务是一种非核心功能。站在核心功能的角度，事务就属于非核心功能</li>
<li>Spring 支持两种事务
<ul>
<li>编程式事务：事务的代码和业务的核心代码，写在一起，事务靠编码实现（耦合度高、代码分散、冗余，不利于维护）</li>
<li>声明式事务：完全利用 AOP 的思想，前置、返回、异常通知（解决了编程式事务的问题，仅需要一个注解，剩余的工作内容全权交由 Spring 处理）</li>
</ul>
</li>
</ul>
<h4 id="jdbctemplate-使用"><a class="markdownIt-Anchor" href="#jdbctemplate-使用"></a> JDBCTemplate 使用</h4>
<p>   Spring 封装了很多「Template」形式的模板类。例如：RedisTemplate，RestTemplate 等等。</p>
<h5 id="准备"><a class="markdownIt-Anchor" href="#准备"></a> 准备</h5>
<p>   在之前的基础(spring-context、junit-jupiter-api、spring-test)上添加一下依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   创建数据库。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `students`;</span><br><span class="line">CREATE TABLE `students` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(50) NOT NULL,</span><br><span class="line">  `gender` varchar(10) NOT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  `classes` varchar(50) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of students</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;1&#x27;, &#x27;张三&#x27;, &#x27;男&#x27;, &#x27;20&#x27;, &#x27;高中一班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;2&#x27;, &#x27;李四&#x27;, &#x27;男&#x27;, &#x27;19&#x27;, &#x27;高中二班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;3&#x27;, &#x27;王五&#x27;, &#x27;女&#x27;, &#x27;18&#x27;, &#x27;高中一班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;4&#x27;, &#x27;赵六&#x27;, &#x27;女&#x27;, &#x27;20&#x27;, &#x27;高中三班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;5&#x27;, &#x27;刘七&#x27;, &#x27;男&#x27;, &#x27;19&#x27;, &#x27;高中二班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;6&#x27;, &#x27;陈八&#x27;, &#x27;女&#x27;, &#x27;18&#x27;, &#x27;高中一班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;7&#x27;, &#x27;杨九&#x27;, &#x27;男&#x27;, &#x27;20&#x27;, &#x27;高中三班&#x27;);</span><br><span class="line">INSERT INTO `students` VALUES (&#x27;8&#x27;, &#x27;吴十&#x27;, &#x27;男&#x27;, &#x27;19&#x27;, &#x27;高中二班&#x27;);</span><br></pre></td></tr></table></figure>
<p>   创建学生类、jdbc 配置文件、spring 配置文件。</p>
<h5 id="使用"><a class="markdownIt-Anchor" href="#使用"></a> 使用</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:spring.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        String sql = &quot;insert into students (name, gender, age, classes) values(?,?,?,?)&quot;;</span></span><br><span class="line"><span class="comment">//        Object [] args = &#123;&quot;萧十一&quot;, &quot;男&quot;, &quot;55&quot;, &quot;幼儿园大班&quot;&#125;;</span></span><br><span class="line"><span class="comment">//        int update = jdbcTemplate.update(sql, args);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;update = &quot; + update);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        String sql = &quot;update students set age = ? where id = ?&quot;;</span></span><br><span class="line"><span class="comment">//        int update = jdbcTemplate.update(sql, 40,2);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;update = &quot; + update);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        String sql = &quot; select count(*) from students &quot;;</span></span><br><span class="line"><span class="comment">//        Integer count = jdbcTemplate.queryForObject(sql, Integer.class);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;count = &quot; + count);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        String sql = &quot;select id, name, gender, age, classes from students where id =?&quot;;</span></span><br><span class="line"><span class="comment">//        RowMapper &lt;Student&gt; rowMapper = new BeanPropertyRowMapper &lt;&gt;(Student.class);</span></span><br><span class="line"><span class="comment">//        Student student = jdbcTemplate.queryForObject(sql, rowMapper, 1);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;student = &quot; + student);</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,gender,age,classes from students where age&gt;?&quot;</span>;</span><br><span class="line">        RowMapper&lt;Student&gt; rowMapper = <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Student.class);</span><br><span class="line">        List&lt;Student&gt; studentList = jdbcTemplate.query(sql, rowMapper, <span class="number">10</span>);</span><br><span class="line">        studentList.forEach(s-&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="声明式事务"><a class="markdownIt-Anchor" href="#声明式事务"></a> 声明式事务</h4>
<ul>
<li>
<p>Spring 声明式事务对应依赖（只导 spring-jdbc 即可，它包含了 spring-tx。spring-orm 没学到）</p>
<ul>
<li>spring-tx：包含声明式事务实现的基本规范（事务管理器规范接口和事务增强等等）</li>
<li>spring-jdbc：包含 DataSource 方式事务管理器实现类 DataSourceTransactionManage</li>
<li>spring-orm：包含其他持久层框架的事务管理器实现类例如：Hibernate/Jpa 等</li>
</ul>
</li>
<li>
<p>Spring 声明式事务对应事务管理器接口</p>
  <img data-src="https://s2.loli.net/2024/02/19/pXPDKi2FjLfnbIW.png" alt="Spring声明式事务对应事务管理器接口" style="zoom: 67%;" />
</li>
<li>
<p>DataSourceTransactionManage 主要方法</p>
<ul>
<li><code>doBegin()</code>：开启事务</li>
<li><code>doSuspend()</code>：挂起事务</li>
<li><code>doResume()</code>：恢复挂起的事务</li>
<li><code>doCommit()</code>：提交事务</li>
<li><code>doRollback()</code>：回滚事务</li>
</ul>
</li>
</ul>
<h4 id="xml-配置声明式事务"><a class="markdownIt-Anchor" href="#xml-配置声明式事务"></a> xml 配置声明式事务</h4>
<p>   xml 配置里前面几乎和之前的一样，主要是后几个。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.jdbc.tx&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverclassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    开启事务的注解支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateNameByID</span><span class="params">(String name ,Integer id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update students set name = ? where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> jdbcTemplate.update(sql, name, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateAgeById</span><span class="params">(Integer age ,Integer id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update students set age = ? where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> jdbcTemplate.update(sql, age, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***** **** **** **** **** **** **** **** ********/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServices</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentDao studentDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">changeInfo</span><span class="params">()</span>&#123;</span><br><span class="line">        studentDao.updateNameByID(<span class="string">&quot;大一&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line"><span class="comment">//        int i = 1/0;</span></span><br><span class="line">        studentDao.updateAgeById(<span class="number">180</span>,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***** **** **** **** **** **** **** **** **** *****/</span></span><br><span class="line"><span class="meta">@SpringJUnitConfig(locations = &quot;classpath:spring.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TxTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentServices studentServices;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        studentServices.changeInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果注入的事务管理器 id 叫 transactionManager，那么 <code>tx:annotation-driven</code> 就不用写 <code>transaction-manager=&quot;transactionManager&quot;</code>，因为它是默认值</li>
</ul>
<h4 id="配置类配置声明式事务"><a class="markdownIt-Anchor" href="#配置类配置声明式事务"></a> 配置类配置声明式事务</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.atguigu.jdbc.tx&quot;&#125;)</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">dataSource</span><span class="params">(<span class="meta">@Value(&quot;$&#123;jdbc.driverClassName&#125;&quot;)</span> String driverClassName,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span> String url,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span> String username,</span></span><br><span class="line"><span class="params">                                      <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span> String password)</span>&#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        dataSource.setDriverClassName(driverClassName);</span><br><span class="line">        dataSource.setUrl(url);</span><br><span class="line">        dataSource.setUsername(username);</span><br><span class="line">        dataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JdbcTemplate <span class="title function_">jdbcTemplate</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">jdbcTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(dataSource);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSourceTransactionManager <span class="title function_">transactionManager</span><span class="params">(DataSource dataSource)</span>&#123;</span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">dataSourceTransactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dataSourceTransactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>@EnableTransactionManagement</code> 注解就是 <code>&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;</code></li>
<li><code>@EnableTransactionManagement</code> 没有进行属性赋值，是因为使用默认值</li>
</ul>
<h4 id="transactional-注解"><a class="markdownIt-Anchor" href="#transactional-注解"></a> @Transactional 注解</h4>
<ul>
<li>
<p>定义在类上，意味着该业务类中的所有方法都有事务</p>
</li>
<li>
<p>局部覆盖全局</p>
</li>
<li>
<p>只读 <code>@Transactional(readonly= true)</code></p>
</li>
<li>
<p>超时（超时回滚，释放资源）<code>timeout = -1</code>：永不超时。单位秒</p>
</li>
<li>
<p>事务异常：默认只回滚运行时异常，编译（检查）异常不回滚。例子：<code>rollbackFor = FileNotFoundException.class</code>、<code>noRollbackFor = ArithmeticException.class</code></p>
</li>
<li>
<p>事务隔离级别：<code>isolation = Isolation.DEFAULT</code>，我：一般不写不改</p>
</li>
<li>
<p>事务传播行为：默认 <code>propagation = Propagation.REQUIRED</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>REQUIRED</code> <br/> 默认值</td>
<td>当前方法必须作在事务中 <br/> 如果当前线程上有已经开启的事务可用，那么就在这个事务中运行 <br/> 如果当前线程上没有已经开启的事务，那么就自己开启新事务，在新事务中运行 <br/> 所以当前方法有可能和其他方法共用事务 <br/> 在共用事务的情况下：当前方法会因为其他方法回滚而受连累</td>
</tr>
<tr>
<td style="text-align:center">REQUIRES_NEW</td>
<td>当前方法必须工作在事务中 <br/> 不管当前线程上是否有已经开启的事务，都要开启新事务 <br/> 在新事务中运行 <br/> 不会和他万法共用事务，避免被其他方法连累</td>
</tr>
</tbody>
</table>
<p><strong><span style="color:#0000FF;"> 举例 </span></strong>：①在 StudentServices 里有两个有事务的方法，changeName 和 changeAge，在 TopServices 里有一个有事务的方法，changeInfo。在测试里调用 changeInfo，只要有异常就会都回滚，用的同一个。②将 changeName 和 changeAge 的事务的 propagation 改为 <code>REQUIRES_NEW</code>，就会各管各的。</p>
<p><strong><span style="color:#0000FF;"> 注意：</span></strong> <code>REQUIRED</code> 和 <code>REQUIRES_NEW</code>，在一个 <code>REQUIRED</code> 事务方法里先调用具有 <code>REQUIRED</code> 的方法，再调用具有 <code>REQUIRES_NEW</code> 的方法。当具有 <code>REQUIRES_NEW</code> 的方法出异常后，会一直等待</p>
<ul>
<li><code>Propagation.NESTED</code>：如果当前存在事务，则在该事务中嵌套一个新事务，如果没有事务，则与 <code>Propagation.REQUIRED</code> 一样</li>
<li><code>Propagation.SUPPORTS</code>：如果当前存在事务，则加入该事务，否则以非事务方式执行</li>
<li><code>Propagation.NOT_SUPPORTED</code>：以非事务方式执行，如果当前存在事务，挂起该事务</li>
<li><code>Propagation.MANDATORY</code>：必须在一个已有的事务中执行，否则抛出异常</li>
<li><code>Propagation.NEVER</code>：必须在没有事务的情况下执行，否则抛出异常</li>
</ul>
</li>
</ul>
<h4 id="将事务注解放到-xml-文件"><a class="markdownIt-Anchor" href="#将事务注解放到-xml-文件"></a> 将事务注解放到 xml 文件</h4>
<p>   主要利用 AOP 思想，所以要记得导包。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    开启组件扫描--&gt;</span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.atguigu.jdbc.tx.xml&quot;</span>/&gt;</span><br><span class="line">&lt;!--    导入外部配置--&gt;</span><br><span class="line">    &lt;context:property-placeholder location=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span><br><span class="line">&lt;!--    德鲁伊连接池--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dataSource&quot;</span> class=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;driverClassName&quot;</span> value=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--    JDBCTemplate--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;jdbcTemplate&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--    事务管理器--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;transactionManager&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;!--    配置声明式事务--&gt;</span><br><span class="line">&lt;!--    <span class="number">1.</span> 创建事务增强--&gt;</span><br><span class="line">    &lt;tx:advice id=<span class="string">&quot;txAdvice&quot;</span> transaction-manager=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><br><span class="line">        &lt;tx:attributes&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;get*&quot;</span> read-only=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;query*&quot;</span> read-only=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;find*&quot;</span> read-only=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;save*&quot;</span> read-only=<span class="string">&quot;false&quot;</span> /&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;change*&quot;</span> read-only=<span class="string">&quot;false&quot;</span> rollback-<span class="keyword">for</span>=<span class="string">&quot;java.io.FileNotFoundException&quot;</span> no-rollback-<span class="keyword">for</span>=<span class="string">&quot;java.lang.ArithmeticException&quot;</span> propagation=<span class="string">&quot;REQUIRES_NEW&quot;</span>/&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;updata*&quot;</span> read-only=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;delete*&quot;</span>/&gt;</span><br><span class="line">&lt;!--            兜底--&gt;</span><br><span class="line">            &lt;tx:method name=<span class="string">&quot;*&quot;</span> /&gt;</span><br><span class="line">        &lt;/tx:attributes&gt;</span><br><span class="line">    &lt;/tx:advice&gt;</span><br><span class="line">&lt;!--    <span class="number">2.</span> 利用AOP将事务增强切入到指定位置--&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">        &lt;aop:pointcut id=<span class="string">&quot;pc&quot;</span> expression=<span class="string">&quot;execution(* *..*Services.*(..))&quot;</span>/&gt;</span><br><span class="line">        &lt;aop:advisor advice-ref=<span class="string">&quot;txAdvice&quot;</span> pointcut-ref=<span class="string">&quot;pc&quot;</span>/&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>
<h3 id="补充本地视频2021年视频内部电脑2017年"><a class="markdownIt-Anchor" href="#补充本地视频2021年视频内部电脑2017年"></a> 补充（本地视频2021年，视频内部电脑2017年）</h3>
<ul>
<li>
<p>有参构造器赋值，在bean标签内部</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;参数名&quot;</span> <span class="attr">value</span>=<span class="string">&quot;值&quot;</span> <span class="attr">type</span>=<span class="string">&quot;参数类型&quot;</span> <span class="attr">index</span>=<span class="string">&quot;第几个参数&quot;</span>&gt;</span>此处可赋值集合<span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>p名称空间赋值，在bean标签上写<code>p:属性名/属性名-引用=&quot;值&quot;</code>，复杂的值可以在外面创建，然后引用，比如list集合可以用<code>&lt;util:list&gt;</code>标签创建</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;strs&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 再嵌套一层list标签就重List变成ArrayList--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>头<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>手<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>脚<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>身体<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;HappyComponent03&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.xml.pojo.HappyComponent&quot;</span> <span class="attr">p:happyMachine-ref</span>=<span class="string">&quot;HappyMachine&quot;</span> <span class="attr">p:componentName</span>=<span class="string">&quot;开心的组件&quot;</span> <span class="attr">p:stringList-ref</span>=<span class="string">&quot;strs&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>赋值为null，在property里用<code>null</code>标签</p>
</li>
<li>
<p>Properties赋值用<code>&lt;props&gt;</code>标签</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;propertis&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>级联属性赋值：属性的属性<code>&lt;property name=&quot;car.price&quot; value=&quot;9&quot;&gt;&lt;/property&gt;</code></p>
</li>
<li>
<p>继承实现bean配置信息重用，在<code>bean</code>标签上添加<code>parent属性=beanId</code>，不是真继承</p>
</li>
<li>
<p>只能用来被继承（抽象），不能获取对象<code>abstract=&quot;true&quot;</code>，写在<code>bean</code>标签上</p>
</li>
<li>
<p>改变创建顺序，<code>bean</code>标签上添加属性<code>depends-on=&quot;person，book&quot;</code>，在创建时会先创建person和book</p>
</li>
<li>
<p>作用域 <code>scope=prototype多例/singleton单例/request同一次请求创建一个Bean/session同一次会话创建一个Bean</code></p>
</li>
<li>
<p>静态工厂，在配置工厂时指定<code>factory-method=&quot;静态工厂方法名&quot;</code>，就会拿到造的对象（注入工厂，得产品：一个）</p>
<p>实例工厂，造对象时指定<code>factory-bean=&quot;工厂id&quot;</code>，<code>factory-method=&quot;工厂方法名&quot;</code>（造产品，用工厂：两个）</p>
<p>前面记的<code>FactoryBean</code></p>
</li>
<li>
<p>Spring Expression Language：#{表达式/其他bean.属性/其他bean/静态调用T(静态全类名).静态方法(参数)/非静态方法bean.方法名}</p>
</li>
<li>
<p>泛型依赖注入：</p>
<ul>
<li>两个不同的实体</li>
<li><code>BaseDao&lt;T&gt;</code>定义了增删改查方法，不注入容器。两个不同的Dao继承并指定不同实体类型，实现对应方法，注入容器</li>
<li><code>BaseService&lt;T&gt;</code>不注入容器，注入BaseDao，实现一个方法调用BaseDao里定义的方法。两个不同的Service继承并指定不同实体类型吗，不重写方法，注入容器</li>
<li>ioc容器根据不同的Service的类型获取bean，调用方法</li>
</ul>
</li>
</ul>
<h2 id="springmvc"><a class="markdownIt-Anchor" href="#springmvc"></a> SpringMVC</h2>
<h3 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h3>
<p>   SpringWebMVc 是基于 ServletAPi 构建的原始 Web 框架，从一开始就包含在 SpringFramework 中。</p>
<ul>
<li>Spring 家族原生产品， 与 IOC 容器等基础设施无缝对接</li>
<li>表述层各细分领域需要解决的问题全方位覆盖，提供全面解决方案</li>
<li>代码清新简洁，大幅度提升开发效率</li>
<li>为组件化程度高插拔式组件即插即用，想要什么功能配置相应组件即可</li>
<li>性能卓著，尤其适合现代大型，超大型互联网目要求</li>
</ul>
<p>SpringMVC 的作用主要覆盖的是表述层，例如：请求映射、数据输入、视图界面、请求分发、表单回显、会话控制、过滤拦截、异步交互、文件上传、文件下载、数据校验、类型转换等等等</p>
<img data-src="https://s2.loli.net/2024/02/24/5WnPtVRpE3esZI4.png" alt="处理请求流程简略版" style="zoom:50%;" />
<ul>
<li><code>DispatcherServlet</code>：SpringMVc 提供，需要使用 web.xml 配置使其生效，它是整个流程处理的核心，所有请求都经过它的处理和分发</li>
<li><code>HandlerMapping</code>：SpringMVC 提供，需要进行 IOC 配置使其加入 IOC 容器方可生效，它内部缓存 handler(controller）方法和 handler(controller）访问路径数据，被 DispatcherServlet 调用，用于查找路径对应的 handler(controller）</li>
<li><code>HandlerAdapter</code>：SpringMVC 提供，需要进行 IOC 配置使其加入 IOC 容器方可生效。它可以处理请求参数和处理响应数据数据，每次 DispatcherServlet 都是通过 handlerAdapter 间接调用 handler(controller），他是 handler(controller）和 <code>DispatcherServlet</code> 之间的适配器</li>
<li><code>Handler</code>：handler 又称处理器，他是 controller 类内部的方法简称，自已定义，用来接收参数，向后调用业务，最终返回响应结果</li>
<li><code>ViewResovler</code>：SpringMVC 提供，需要进行 IOC 配置使其加入 IOC 容器方可生效。视图解析器主要作用简化模版视图页面查找的。相对其他的组件不是必须的</li>
</ul>
<h3 id="体验"><a class="markdownIt-Anchor" href="#体验"></a> 体验</h3>
<ol>
<li>
<p>（默认已经是 web 项目了）导包：</p>
<p>因为 spring-webmvc 依赖了其他包，所以导它即可。</p>
<p>因为要用 servlet，但新的 servlet 在 jakarta 里，不在 javax。</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.platform<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.jakartaee-web-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过查看 HttpServlet 源码，发现</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_DELETE</span> <span class="operator">=</span> <span class="string">&quot;DELETE&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_HEAD</span> <span class="operator">=</span> <span class="string">&quot;HEAD&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_GET</span> <span class="operator">=</span> <span class="string">&quot;GET&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_OPTIONS</span> <span class="operator">=</span> <span class="string">&quot;OPTIONS&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_POST</span> <span class="operator">=</span> <span class="string">&quot;POST&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_PUT</span> <span class="operator">=</span> <span class="string">&quot;PUT&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">METHOD_TRACE</span> <span class="operator">=</span> <span class="string">&quot;TRACE&quot;</span>;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://blog.51cto.com/jackiehao/6796996#:~:text=%E8%BF%99%E4%BA%9B%E6%98%AFHTTP,%E5%85%B1%E4%BA%AB%EF%BC%89%E8%AF%B7%E6%B1%82%E4%B8%AD%E3%80%82">网络解答</a></p>
</li>
<li>
<p>编写 web.xml</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--	1. 注册DispatcherServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		让spring创建HandlerMapping等，所以要指定springmvc的配置文件，进行IoC容器的创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		因为DispatcherServlet的组件只有一个，tomcat一启动就创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span><span class="comment">&lt;!-- 放到init-param前面就标红--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		拦截所有请求，除了.jsp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写 spring 配置文件</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   开启注解扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.quick&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    配置HandlerMapping、HandlerAdapter、ViewResolver--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    方案一、自己配--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    方案二、自己不配，默认全配了--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写 Controller</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//不走页面，直接给前端</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>添加 tomcat</p>
<p>必须要用 10 以上。</p>
<p><span style="color:#FF33FF;"> 坑点：</span> 我没 10，下载，改控制台日志编码为 GBK，修改部分环境变量。启动，报错。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jakarta.json.bind.JsonbException: JSON Binding provider org.eclipse.yasson.JsonBindingProvider not found</span><br></pre></td></tr></table></figure>
<p><span style="color:#00FF80;"> 解决：</span> 添加 org.eclipse 的 yasson 依赖</p>
</li>
<li>
<p>运行，浏览器访问 <a target="_blank" rel="noopener" href="http://localhost:8080/hello">localhost: 8080/hello</a></p>
</li>
</ol>
<h3 id="requestmapping"><a class="markdownIt-Anchor" href="#requestmapping"></a> @RequestMapping</h3>
<p>   请求映射的路径，将路径和方法存储到 HandLerMapping 里，便于 DispatcherServlet 查找。开头的 <code>/</code> 可省略，SpringMVC 自动补全。</p>
<ul>
<li>精确匹配
<ul>
<li>单层路径</li>
<li>多层路径</li>
<li>多个路径（我：相当于别名）</li>
</ul>
</li>
<li>模糊匹配（不影响精确匹配）
<ul>
<li>单层路径：<code>/user/*</code></li>
<li>多层路径：<code>/user/**</code></li>
<li>指定层：<code>/user/*/*</code> 不向下兼容</li>
</ul>
</li>
<li>类上写，则表示该类的统一路径前缀</li>
<li>限制请求方式：默认所有请求方式，可通过 method 属性修改 <code>method = RequestMethod.PosT</code>，不允许则 405</li>
<li>请求进阶：非常明确一个方法要以什么请求方式请求时。可以使用以下注解 <code>GetMapping</code>、<code>PostMapping</code>、<code>PutMapping</code>、<code>DeleteMapping</code>，只能写一个</li>
</ul>
<h3 id="requestparam"><a class="markdownIt-Anchor" href="#requestparam"></a> @RequestParam</h3>
<p>   <code>@ReguestParam(value=参数名 required=是否为必传，defaultValue=不传，默认值是什么）</code>。soutp 直接打印方法的所有参数。（当然你也可以只写参数，不写注解，只要参数名对上就赋值，对自定义对象也同理）</p>
<ul>
<li>前后端参数名不一致时，可以进行指定映射</li>
<li>参数是否必传，默认写上注解就必传了</li>
<li>当不传递时，可以赋予指定默认值</li>
<li>如果必传， 但是前端没传，会报 400 错误，必要的参数未提供</li>
<li>一名多值，用 List 接收</li>
</ul>
<h3 id="路径传参pathvariable"><a class="markdownIt-Anchor" href="#路径传参pathvariable"></a> 路径传参@PathVariable</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">showUserByID</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>隐藏数据的 key 名，保护数据安全</li>
<li>RESTful 风格开发</li>
<li>当然，参数名和占位符一致，注解可不指定名字</li>
</ul>
<h3 id="接收-json-数据requestbody"><a class="markdownIt-Anchor" href="#接收-json-数据requestbody"></a> 接收 JSON 数据@RequestBody</h3>
<p>   <code>@RequestBody</code> 注解来将 JSON 数据转换为 Java 对象，<code>@ReguestBody</code> 注解表示当前方法参数的值应该从请求体中获取，并且需要指定 value 属性来指示请求体应该映射到哪个参数上。避免 415 错误，做如下操作。</p>
<p>   添加依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.15.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   装配 jackson 转换器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 装配HandlerAdapter 装配HandlerMapping 装配jackson转换器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>   使用了上述标签，则不用自己注入 <code>HandlerAdapter</code>、<code>HandlerMapping</code>，尤其是 <code>org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter</code></p>
<h3 id="获取-cookiecookievalue"><a class="markdownIt-Anchor" href="#获取-cookiecookievalue"></a> 获取 cookie@CookieValue</h3>
<p>   cookie 可以手动创建，也可以通过 session 触发创建。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/cookie/set&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">setCookie</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;session.getId() = &quot;</span> + session.getId());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;set cookie ok&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/cookie/get&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">getCookie</span><span class="params">(<span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String sessionID)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;sessionID = &quot;</span> + sessionID);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;get cookie ok&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>    通过 setCookie 方法传入 <code>HttpSession</code>，触发创建 cookie。通过 <code>@CookieValue(&quot;JSESSIONID&quot;)</code> 注解获取 cookie 里 JSESSIONID 的值。</p>
<h3 id="获取请求头"><a class="markdownIt-Anchor" href="#获取请求头"></a> 获取请求头</h3>
<p>使用 <code>@RequestHeader</code> 注解将请求标头绑定到控制器中的方法参数。（我：可以得到一些信息，可以区分用户等）</p>
<h3 id="使用原生-api"><a class="markdownIt-Anchor" href="#使用原生-api"></a> 使用原生 API</h3>
<p>   从前面的获取 cookie 时，传入的 HttpSession 就可得到一些感觉。</p>
<table>
<thead>
<tr>
<th style="text-align:center">部分控制器参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>jakarta.servlet.ServletRequest</code> <br/> <code>jakarta.servlet.ServletResponse</code></td>
<td>请求/响应对象</td>
</tr>
<tr>
<td style="text-align:center"><code>jakarta.servlet.http.HttpSession</code></td>
<td>强制存在会话。因此，这样的参数永远不会为 nul1</td>
</tr>
<tr>
<td style="text-align:center"><code>java.io.Inputstream</code> <br/> <code>java.io.Reader</code></td>
<td>用于访问由 ServletAPI 公开的原始请求正文</td>
</tr>
<tr>
<td style="text-align:center"><code>java.io.Outputstream</code> <br/> <code>java.io.Write</code></td>
<td>用于访问由 ServletAPI 公开的原始响应正文</td>
</tr>
<tr>
<td style="text-align:center"><code>java.util.Map</code> <br/> <code>org.springframework.ui.Model</code> <br/> <code>org.sprinaframework.ui.ModelMap</code></td>
<td>共享域对象，并在视图呈现过程中向模板公开</td>
</tr>
<tr>
<td style="text-align:center"><code>Errors</code> <br/> <code>BindingResult</code></td>
<td>验证和数据绑定中的错误信息获取对象</td>
</tr>
</tbody>
</table>
<h3 id="跳转-jsp"><a class="markdownIt-Anchor" href="#跳转-jsp"></a> 跳转 jsp</h3>
<p>   跳转的方法不要加 <code>@RespondBody</code>，并且方法返回一个视图名。在参数里传入一个 Model，就可以设置一些信息，在 jsp 页面就可以通过 <code>$&#123;requestscope.XXX&#125;</code> 获得。</p>
<p>   添加依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.servlet.jsp.jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.servlet.jsp.jstl-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   添加视图解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewclass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 逻辑视图的前缀 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/views/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 逻辑视图的后缴 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="转发和重定向"><a class="markdownIt-Anchor" href="#转发和重定向"></a> 转发和重定向</h3>
<p>   上面的视图跳转是转发。返回 <code>&quot;forward:/返回页面的方法的路径&quot;</code> 类似的值，就可以转发。重定向（新的请求，故原先的数据拿不到）的话，就使用 <code>redirect：</code> 前缀。</p>
<h3 id="返回-json"><a class="markdownIt-Anchor" href="#返回-json"></a> 返回 JSON</h3>
<p>   之前体验过，在方法上添加 <code>@ResponseBody</code> 注解，然后将返回值类型改为你想要的返回的类型。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.15.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>返同值类型是 String： 直接序列化字符串响应给前端</li>
<li>返回值类型是引用类型、集合，序列化成 JSON</li>
<li><code>@ResponseBody</code> 可以写在类上，如果这样干，可以把 <code>@Controller</code> 去掉，写 <code>@RestControlLer</code>。这个注解包含前两个注解</li>
</ul>
<h3 id="返回静态资源"><a class="markdownIt-Anchor" href="#返回静态资源"></a> 返回静态资源</h3>
<p>   使用的 DispatcherServlet 拦截所有请求（除了 jsp），请求的静态资源，它找不到 404。所以装配和 tomcat 类似的 DefaultServlet。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 装配DefaultServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="restful-风格设计"><a class="markdownIt-Anchor" href="#restful-风格设计"></a> RESTful 风格设计</h3>
<p><a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1770001518478395785&amp;wfr=spider&amp;for=pc">RESTFUL 到底是什么？你真的了解吗？</a></p>
<p><code>@CrossOrigin</code> 注解可以实现跨域。</p>
<h3 id="异常处理"><a class="markdownIt-Anchor" href="#异常处理"></a> 异常处理</h3>
<img data-src="https://s2.loli.net/2024/02/27/KqZhAt76rImJvPs.png" alt="异常" style="zoom:50%;" />
<p>   在声明式异常处理中，开发人员只需要为方法或类标注相应的注解（如@Throws 或@ExceptionHandler），就可以处理特定类型的异常。相较于编程式异常处理，声明式异常处理可以使代码更加简洁、易于维护和扩展。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="comment">//@RestControllerAdvice 同理 =@ControllerAdvice+@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> Person <span class="title function_">handleArithmeticException</span><span class="params">(ArithmeticException exception)</span>&#123;</span><br><span class="line">        <span class="comment">//可以记录日志等等</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   再加一个对 Exception 的捕获，进行兜底。</p>
<h3 id="拦截器"><a class="markdownIt-Anchor" href="#拦截器"></a> 拦截器</h3>
<img data-src="https://s2.loli.net/2024/02/27/TPRftsdpUWj3FO6.png" alt="拦截器图示" style="zoom: 80%;" />
 <img data-src="https://s2.loli.net/2024/02/27/MARsatfYgzxudp1.png" alt="过滤器VS拦截器" style="zoom:67%;" />
<p>   先实现拦截器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">//ctrl + i</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    在目标方法执行之前执行</span></span><br><span class="line"><span class="comment">    返回 true，放行。访问目标资源</span></span><br><span class="line"><span class="comment">    返回 false，则拦截，不能继续访问了</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyInterceptor.preHandle&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> HandlerInterceptor.<span class="built_in">super</span>.preHandle(request, response, handler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    在目标方法执行之后执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyInterceptor.postHandle&quot;</span>);</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.postHandle(request, response, handler, modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    响应的数据准备好了，响应之前，执行该方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyInterceptor.afterCompletion&quot;</span>);</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.afterCompletion(request, response, handler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   将拦截器注入并配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        拦截规则1：所有的controller都被拦截--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.quick.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        拦截规则2：指定路径、配置拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            拦截路径：1./login/* 2./login/** 3./*/*/* --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/login/admin&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            排除一部分路径：--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/login/exit&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.quick.interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        多个拦截器依次根据前一个拦截器情况执行，执行通过的一定会执行afterCompletion释放资源--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="https://s2.loli.net/2024/02/27/GBOjKzrgC6ilLNU.png" alt="执行流程" style="zoom:80%;" />
<h3 id="数据校验"><a class="markdownIt-Anchor" href="#数据校验"></a> 数据校验</h3>
<p>   为了能够让业务逻辑层基于正确的数据进行处理，在表述层对数据进行检查，将错误的数据隔绝在业务逻辑层之外。</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator-annotation-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.platform<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.jakartaee-web-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   在 controler 方法里的参数上使用注解 <code>@Validated</code>（配置一下：<code>&lt;mvc:annotation-driven/&gt;</code>），然后对应参数类里有如下注解。在使用了 <code>@Validated</code> 的参数后面紧跟着，传入 <code>BindingResult</code> 就可以获取错误信息进行判断了。</p>
<table>
<thead>
<tr>
<th style="text-align:center">注解</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>@Null</code></td>
<td></td>
</tr>
<tr>
<td style="text-align:center"><code>@NotNull</code></td>
<td></td>
</tr>
<tr>
<td style="text-align:center"><code>@AssertTrue</code></td>
<td>搭配 <code>@NotNull</code>，标注值必须为 true</td>
</tr>
<tr>
<td style="text-align:center"><code>@AssertFalse</code></td>
<td>搭配 <code>@NotNull</code></td>
</tr>
<tr>
<td style="text-align:center"><code>@Min(value)</code></td>
<td>搭配 <code>@NotNull</code> 常搭配整数</td>
</tr>
<tr>
<td style="text-align:center"><code>@Max(value)</code></td>
<td>搭配 <code>@NotNull</code> 常搭配整数</td>
</tr>
<tr>
<td style="text-align:center"><code>@DecimalMin(value)</code></td>
<td>常搭配小数，有时无限接近时，会出问题</td>
</tr>
<tr>
<td style="text-align:center"><code>@DecimalMax(value)</code></td>
<td>常搭配小数，有时无限接近时，会出问题</td>
</tr>
<tr>
<td style="text-align:center"><code>@Size(max,min)</code></td>
<td>串、集合、数组</td>
</tr>
<tr>
<td style="text-align:center"><code>@Digits(integer,fratction)</code></td>
<td>限制数字的位数，整数部分和小数部分</td>
</tr>
<tr>
<td style="text-align:center"><code>@Past</code></td>
<td>搭配 <code>@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</code> 传入的时间和当前时间比较，过去</td>
</tr>
<tr>
<td style="text-align:center"><code>@Future</code></td>
<td>搭配 <code>@DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</code>，未来</td>
</tr>
<tr>
<td style="text-align:center"><code>@Pattern(regexp)</code></td>
<td>正则</td>
</tr>
<tr>
<td style="text-align:center"><code>@Email</code></td>
<td>必须有@符，@符前最少一个字，@符后必须有点</td>
</tr>
<tr>
<td style="text-align:center"><code>@Length</code></td>
<td><code>@Size(max,min)</code> 全面，<code>@Length</code> 专注</td>
</tr>
<tr>
<td style="text-align:center"><code>@NotEmpty</code></td>
<td>必须要有值：字符串不能是 null 和空，集合不能为 null 和空</td>
</tr>
<tr>
<td style="text-align:center"><code>@Range</code></td>
<td></td>
</tr>
<tr>
<td style="text-align:center"><code>@NotBlank</code></td>
<td>字符串不能为空、不能为 null、不能只包含空格，Hibernate Validator 附加的注解</td>
</tr>
</tbody>
</table>
<h3 id="文件上传下载"><a class="markdownIt-Anchor" href="#文件上传下载"></a> 文件上传下载</h3>
<h4 id="上传"><a class="markdownIt-Anchor" href="#上传"></a> 上传</h4>
<p>   html 准备如下。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPEhtml&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/save/picture&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">            昵称：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;nickName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;龙猫&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            头像：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;headPicture&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            背景：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;backgroundPicture&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   导入依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   装配文件上传解析器。id 必须是 multipartResolver。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.support.StandardServletMultipartResolver&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>   文件额外设置, 在 web.xml 里。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--	1. 注册DispatcherServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		让spring创建HandlerMapping等，所以要指定springmvc的配置文件，进行IoC容器的创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		因为DispatcherServlet的组件只有一个，tomcat一启动就创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span><span class="comment">&lt;!-- 放到init-param前面就标红--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">multipart-config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--			定义单个上传时所需的最大值，单位为字节--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">max-file-size</span>&gt;</span>10485760<span class="tag">&lt;/<span class="name">max-file-size</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--			定义单次请求上传的最大值，单位为字节--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">max-request-size</span>&gt;</span>20971520<span class="tag">&lt;/<span class="name">max-request-size</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--			定义内存中存储文件的最大值，超过此大小的文件会写入到硬盘中- --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file-size-threshold</span>&gt;</span>5242880<span class="tag">&lt;/<span class="name">file-size-threshold</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">multipart-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		拦截所有请求，除了.jsp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   接收文件的 controller 方法要有 <code>MultipartFile</code> 参数，用来获取信息或者转存等等。（获取项目真实路径 <code>request.getRealPath()</code>，<code>Servletcontext</code> 代表项目，<code>servletContext.getReaiPath(&quot;/images&quot;);</code>）</p>
<h4 id="下载"><a class="markdownIt-Anchor" href="#下载"></a> 下载</h4>
<p>   在 SpringMVC 中, <code>RsponseEntity</code> 是用于表示 HTTP 响应的一个类，它既能设置响应体的内容，也能设置响应头相关的信息。<code>ResponseEntity</code> 可以封装一个 HTTP 响应，包括响应体、响应头和响应状态码等属性，并将其发送回客户端。它提供了一种灵活的方式来表示 HTTP 响应，可以用于处理 RESTfulAPI、文件下载、异常处理等应用场景。例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/users/&#123;age&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">getUser</span><span class="params">(<span class="meta">@PathVariable(&quot;age&quot;)</span><span class="type">int</span> age)</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">User</span>;</span><br><span class="line">    user.setAge(age);</span><br><span class="line">    user.setEmail(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;ll&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;filename&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; downloadfile(<span class="meta">@PathVariable(&quot;filename&quot;)</span> String filename) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/download&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> realPath.concat(File.separator).concat(filename);</span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath);</span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[fileInputStream.available()];</span><br><span class="line">    fileInputStream.read(bytes);</span><br><span class="line"></span><br><span class="line">    <span class="type">HttpHeaders</span> <span class="variable">httpHeaders</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">    httpHeaders.add(<span class="string">&quot;content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+ URLEncoder.encode(filename,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;<span class="type">byte</span>[]&gt;(bytes,httpHeaders, HttpStatus.OK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="头大的记忆"><a class="markdownIt-Anchor" href="#头大的记忆"></a> 头大的记忆</h3>
<img data-src="https://s2.loli.net/2024/02/28/y73YQLJpwRsCvqr.png" alt="初始化流程和请求流程" style="zoom:80%;" />
<h3 id="说是面试要问"><a class="markdownIt-Anchor" href="#说是面试要问"></a> 说是面试要问</h3>
<img data-src="https://s2.loli.net/2024/02/27/GBOjKzrgC6ilLNU.png" alt="执行流程" style="zoom:80%;" />
<ol>
<li>
<p><code>doDispatch</code> 里通过 <code>getHandler</code> 创建处理器执行链 <code>HandlerExecutionChain</code>，它包含目标 controller 方法和所有拦截器的属性</p>
<p>我的理解：请求来了，它去寻找对应路径的 controller 方法和能应用的拦截器，将他们包装起来。</p>
</li>
<li>
<p>查找匹配的处理器适配器 <code>getHandlerAdapter</code></p>
</li>
<li>
<p>正序执行拦截器的 preHandle 方法 <code>mappedHandler.applyPreHandle(processedRequest, response)</code></p>
</li>
<li>
<p>执行目标方法 <code>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</code>，mv 表示 <code>ModelAndView</code></p>
</li>
<li>
<p>倒序执行拦截器的 postHandle 方法 <code>mappedHandler.applyPostHandle(processedRequest, response, mv);</code></p>
</li>
<li>
<p>处理目标执行后的结果 <code>processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</code>，内部有对 mv 的判断，到底是视图还是 json、string。</p>
<ol>
<li>
<p>如果有视图，渲染 <code>render(mv, request, response);</code></p>
</li>
<li>
<p>如果没有视图，执行拦截器的 afterCompletion 方法（不对吧？应该不管有没有视图，afterCompletion 都要执行，老师口误了）</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mappedHandler != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// Exception (if any) is already handled..</span></span><br><span class="line">    mappedHandler.triggerAfterCompletion(request, response, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为什么要判断是否 null 呢？我看下来的感觉：此时 mappedHandler 不为 null，不用判断。</p>
</li>
</ol>
</li>
</ol>
<h3 id="contextloaderlistener-监听器"><a class="markdownIt-Anchor" href="#contextloaderlistener-监听器"></a> ContextLoaderListener 监听器</h3>
<p>   <code>DispatcherServlet</code> 加载 spring-mvc.xml，此时整个 Web 应用中只创建一个 IoC 容器。所以想将配置文件分开：</p>
<ul>
<li>SpringMVC 相关：spring-mvc.xml 配置文件</li>
<li>Spring 和 Mybatis 相关</li>
</ul>
<p>   配置文件分开后，都 web.xml 里导入即可。<code>&lt;param-value&gt;classpath:spring-*.xml&lt;/param-value&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--	1. 注册DispatcherServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		让spring创建HandlerMapping等，所以要指定springmvc的配置文件，进行IoC容器的创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-*.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		因为DispatcherServlet的组件只有一个，tomcat一启动就创建--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span><span class="comment">&lt;!-- 放到init-param前面就标红--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--		拦截所有请求，除了.jsp--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   虽然配置文件分开了，但容器还是一个容器（我：为什么能在 web.xml 里加载配置文件，是因为容器先创建，然后配置配置文件，然后刷新。）。所以分两个容器，在 web.xml 里配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--	配置监听器，监听contextConfigLocation--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   <code>ContextLoaderListener</code> 创建的容器是父容器，<code>DispatcherServlet</code> 创建的是子容器。因为在 <code>DispatcherServlet</code> 的父类 <code>FrameworkServlet</code> 中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">原本只由 DispatcherServlet 创建时，rootContext 没有。ContextLoaderListener 创建时，rootContext 有。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">WebApplicationContext</span> <span class="variable">rootContext</span> <span class="operator">=</span>WebApplicationContextUtils.getWebApplicationContext(getServletContext());</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">新特性，不用自己再强转了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">wac <span class="keyword">instanceof</span> ConfigurableWebApplicationContext cwac</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置父容器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">cwac.setParent(rootContext);</span><br></pre></td></tr></table></figure>
<p>   分成了两个容器，配置文件里注解扫描一个只扫描 controller 等，另一个排除 controller 等。</p>
<h2 id="mybatis-持久层框架"><a class="markdownIt-Anchor" href="#mybatis-持久层框架"></a> MyBatis 持久层框架</h2>
<h3 id="简介-2"><a class="markdownIt-Anchor" href="#简介-2"></a> 简介</h3>
<blockquote>
<p>MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings. MyBatis eliminates almost all of the JDBC code and manual setting of parameters and retrieval of results. MyBatis can use simple XML or Annotations for configuration and map primitives, Map interfaces and Java POJOs (Plain Old Java Objects) to database records.</p>
<p>MyBatis 是一个一流的持久化框架，支持自定义 SQL、存储过程和高级映射。MyBatis 几乎省去了所有的 JDBC 代码，也省去了手动设置参数和检索结果的麻烦。MyBatis 可以使用简单的 XML 或 Annotations 进行配置，并将原语、Map 接口和 Java POJO（Plain Old Java Objects）映射到数据库记录中。</p>
</blockquote>
<img data-src="https://s2.loli.net/2024/02/28/uMsPVWLEvCQ721x.png" alt="持久层框架对比" style="zoom:67%;" />
<p>jdbc 虽然效率高，但开发效率低。</p>
<h3 id="快速入门"><a class="markdownIt-Anchor" href="#快速入门"></a> 快速入门</h3>
<ol>
<li>
<p>准备数据和 pojo 类</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">SET FOREIGN_KEY_CHECKS=0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for `t_emp`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_emp`;</span><br><span class="line">CREATE TABLE `t_emp` (</span><br><span class="line">  `emp_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `emp_name` varchar(100) NOT NULL,</span><br><span class="line">  `emp_salary` double(10,5) NOT NULL,</span><br><span class="line">  `emp_gender` varchar(5) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`emp_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_emp</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_emp` VALUES (&#x27;1&#x27;, &#x27;tom&#x27;, &#x27;200&#x27;, &#x27;男&#x27;);</span><br><span class="line">INSERT INTO `t_emp` VALUES (&#x27;2&#x27;, &#x27;jerry&#x27;, &#x27;667&#x27;, &#x27;女&#x27;);</span><br><span class="line">INSERT INTO `t_emp` VALUES (&#x27;3&#x27;, &#x27;andy&#x27;, &#x27;778&#x27;, &#x27;女&#x27;);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写 Mapper 接口</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line">    List&lt;Employee&gt; <span class="title function_">selectALL</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写同名 Mapper 配置文件 EmployeeMapper.xml</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.quick.mapper.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectALL&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">        select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写 mybatis 配置文件</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    设置mybatis运行时要连接数据库的环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;MySQL&quot;</span>&gt;</span><span class="comment">&lt;!--默认id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;MySQL&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            MyBatis的内置事务管理器是JDBC --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            dataSource是配置数据源，type填写POOLED--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    注册Mapper映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;EmployeeMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//        1. 读取 MyBatis 配置文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        2. 构建 SqlSessionFactory 工厂</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        3. 通过 sqlSessionFactory 获取 sqlSession（connection）</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        4. 根据接口的类对象，获取接口的实现类对象（动态代理）</span></span><br><span class="line">        <span class="type">EmployeeMapper</span> <span class="variable">employeeMapper</span> <span class="operator">=</span> sqlSession.getMapper(EmployeeMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        5. 以接口的角度调用方法、</span></span><br><span class="line">        List&lt;Employee&gt; employees = employeeMapper.selectALL();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        6. 处理结果</span></span><br><span class="line">        employees.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        7. 释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>   看起来似乎更麻烦了，包装一下会好一点。看起来配好后几乎只用管 Mapper 配置文件和注册 Mapper 文件。</p>
<h3 id="封装工具类"><a class="markdownIt-Anchor" href="#封装工具类"></a> 封装工具类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="加入日志框架"><a class="markdownIt-Anchor" href="#加入日志框架"></a> 加入日志框架</h3>
<p>门面（接口、标准）：SLF4J<br />
实现：logback</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>   已经可以用了。如果不满意输出样式，可以创建 logback.xml。不会写，网上找，互联网精神大有人在，<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44866153/article/details/120605997">尚硅谷谷粒学院学习笔记 3–统一异常处理，日志_尚硅谷 统一异常-CSDN 博客</a>。使用 MyBatis 的日志实现也可以，配置文件里配置标签 <code>&lt;setting name=&quot;logImpl&quot; value=&quot;SLF4J&quot;/&gt;</code>，注意标签有顺序，查看对应的 dtd 文件即可。</p>
<p>   在类上标记 <code>@Slf4j</code> 注解（lombok 的），就可以在类里使用 <code>log.info(&quot;&#123;&#125;&quot;,employee);</code> 类上代码。</p>
<h3 id="和"><a class="markdownIt-Anchor" href="#和"></a> #{}和${}</h3>
<p><code>#&#123;&#125;</code>：<code>PreparedStatement</code>，预编译 SQL 语句，采用 <code>？</code> 占位符的方式，会在传的值上加上单引号</p>
<ul>
<li>
<p>可以规定一些规则</p>
<p>javaType、jdbcType、mode（存储过程）、numericScale、resultMap、typeHandler（处理这个数据的类型处理器）、jdbcTypeName、expression（未来准备支持）</p>
<p>jdbcType通常需要在某种特定的条件下被设置：数据为null，有数据库可能不能识别mybatis对null的处理，比如Oracle。</p>
<p>因为mybatis对所有的null都映射的是原生Jdbc的OTHETR</p>
<p><code>#&#123;email,jdbcType=NULL&#125;</code>或者<code>&lt;setting name=&quot;jdbcTypeForNull&quot; value=&quot;NULL&quot;/&gt;</code>（other、varchar、null）</p>
</li>
</ul>
<p><code>$&#123;&#125;</code>：<code>Statement</code>，拼接 SQL 语句，是将值和 SQL 拼接在一起</p>
<p><span style="color:#3333FF;"> 总结：</span> 传值用 <code>#&#123;&#125;</code>，传关键字或列名、表名、库名等用 <code>$&#123;&#125;</code></p>
<h3 id="数据输入输出"><a class="markdownIt-Anchor" href="#数据输入输出"></a> 数据输入输出</h3>
<h4 id="主键回填"><a class="markdownIt-Anchor" href="#主键回填"></a> 主键回填</h4>
<p>返回主键值（主键回填，数据库功能 <code>SELECT LAST_INSERT_ID();</code>）</p>
<ul>
<li>
<p><span style="color:#FF3333;"> 主键数值且自增 </span>：在 sql 语句的配置标签上加上 <code>useGeneratedKeys=&quot;true&quot; keyProperty=&quot;empId&quot;</code></p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;empId&quot;</span>&gt;</span></span><br><span class="line">    insert into t_emp(emp_name,emp_salary,emp_gender) values (#&#123;empName&#125;,#&#123;empSalary&#125;,#&#123;empGender&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>主键不自增（如 UUID，数据库也有这个函数）（我在想万一天选之子，十亿分之一的概论重复了）：在 sql 标签里添加</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;empId&quot;</span>&gt;</span></span><br><span class="line">    select replace(uuid(),&#x27;-&#x27;,&#x27;&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="数据输入"><a class="markdownIt-Anchor" href="#数据输入"></a> 数据输入</h4>
<p>   Mybatis 默认已开启事务。只有查询写 <code>resultType</code>。<code>resultType</code> 不想写太长可以在对应类上 <code>@Alias(别名）</code>，当然也可将别名配置在配置文件里，在 <code>typeAliases</code> 配：①指定 <code>&lt;typeAlias type=&quot;com.atguigu.quick.pojo.Employee&quot; alias=&quot;emp&quot;/&gt;</code> ②类名就可以是别名，不区分大小写 <code>&lt;package name=&quot;com.atguigu.quick&quot;/&gt;</code></p>
<ul>
<li>
<p>单个简单类型</p>
</li>
<li>
<p>实体类对象：虽然方法传入的是对象，但 sql 语句里写对象的属性名</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into t_emp(emp_name,emp_salary,emp_gender) values (#&#123;empName&#125;,#&#123;empSalary&#125;,#&#123;empGender&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>零散简单数据：默认 <code>arg0</code> 开始和 <code>parm1</code> 开始。可以使用 <code>@Param</code> 区别名，取别名后不能用 <code>arg</code> 类型</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 我不喜欢</span><br><span class="line">update t_emp set emp_salary = #&#123;param2&#125; where emp_id = #&#123;param1&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数太多了，怎么办？霸道总裁：不准多</span></span><br><span class="line">Integer <span class="title function_">updateEmpSalary</span><span class="params">(<span class="meta">@Param(&quot;empId&quot;)</span> Integer empId,<span class="meta">@Param(&quot;empSalary&quot;)</span> Double empSalary)</span>;</span><br></pre></td></tr></table></figure>
<p><span style="border-bottom:1px solid #FF00FF;"> 零散简单数据太多了，怎么办，使用 Map 集合即可 </span>。<span style="background:#66FF66;"> key 就是名字 value 就是值。</span></p>
</li>
</ul>
<h4 id="数据输出"><a class="markdownIt-Anchor" href="#数据输出"></a> 数据输出</h4>
<p>   不想给列名取别名，可以配置 <code>&lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</code> 将下划线名改成驼峰名。</p>
<ul>
<li>
<p>单个实体和简单类型（看入门）</p>
</li>
<li>
<p>多个实体类型（看入门）</p>
</li>
<li>
<p>Map（多个列 <s>单行</s>，不能封装对象）<code>resultType=&quot;map&quot;</code>：key 是列名，value 是值（此时，我猜测多列多行用 <code>List&lt;Map&gt;</code> 封装，就是不知道需不需要自己写转换的接口）</p>
</li>
<li>
<p>resultMap：观察如下配置</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--id标签维护的是当前查询结果中的主键列--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--result标签维护的是当前查通结果中的普通列--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--column是查询结果的列名。property是封装对家的属性名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_salary&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empSalary&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empGender&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;emp&quot;</span>&gt;</span></span><br><span class="line">    select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp where emp_id = $&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="映射"><a class="markdownIt-Anchor" href="#映射"></a> 映射</h3>
<img data-src="https://img-blog.csdnimg.cn/img_convert/2a8f7e3f91d87f79009057f0a51a87e2.png" alt="SQL JOINS" style="zoom:80%;" />
<p>  客户表，订单表。订单表有客户表的id。对应实体类为客户类，订单类。订单类里有客户对象，客户类里有订单集合。（可以先没有外键，测试好再配）</p>
<h4 id="对一映射"><a class="markdownIt-Anchor" href="#对一映射"></a> 对一映射</h4>
<p>   根据订单id查询订单，包含用户。<code>association</code>标签封装单个对象，<code>javaType</code>表示封装类型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;OrderAndCustomer&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;order_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;order_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        在查询的结果中，维护的是对一的关系。封装的对象是单个对象,用association--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;customer&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Customer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;customer_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;customerId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;customer_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;customerName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectOrderAndCustomerByOrderId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;OrderAndCustomer&quot;</span>&gt;</span></span><br><span class="line">    select order_id,order_name,t_order.customer_id,customer_name from t_order</span><br><span class="line">    inner join t_customer</span><br><span class="line">    on t_order.customer_id = t_customer.customer_id</span><br><span class="line">    weher t_order.order_id = #&#123;orderId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果不想写<code>association</code>标签，可以用级联属性：<code>&lt;result column=&quot;order_name&quot; property=&quot;customer.orderName&quot;/&gt;</code>。</p>
<p>（2021年）利用<code>association</code>标签，上面的查询可以改写进行分步查询。（可用于对多：用户有多个订单）</p>
<ol>
<li>只查订单</li>
<li>有一个方法只查用户</li>
<li>结果封装：订单的基础属性封装照样。订单的用户属性使用<code>association</code>标签，标签属性<code>select</code>表明当前属性是调用select指定的方法查出的结果，值为<code>mapper接口全类名.方法</code>；标签属性<code>column</code>指定将哪一列（之前查的列）的值传给这个方法，多列可<code>column=&quot;&#123;接收传入的名key1=传入的名column1,key2=column2&#125;</code>；标签属性<code>fetchType=&quot;lazy/eager&quot;</code>表明延不延迟；</li>
</ol>
<p>（本地2021年的视频）<code>&lt;setting name=&quot; LazyLoadingEnabled &quot; value =&quot;true&quot;/&gt;</code>懒加载：高版本默认为true，低版本默认为flase<br />
（本地2021年的视频）<code>&lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt;</code>开启，属性全部直接加载，关闭，属性按需加载</p>
<p>（本地2021年的视频）鉴别器：我=if成立操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;string&quot;</span> <span class="attr">column</span>=<span class="string">&quot;被鉴别的类&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;值&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;封装类型&quot;</span>&gt;</span></span><br><span class="line">        封装过程,如association标签、如id、result标签</span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span>&gt;</span></span><br><span class="line">    	多个case</span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="对多映射"><a class="markdownIt-Anchor" href="#对多映射"></a> 对多映射</h4>
<p>  根据用户id查询用户，包含有订单。<code>collection</code>标签维护对多的关系，<code>ofType</code>表示封装类型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;CustomerAndOrder&quot;</span> <span class="attr">type</span>=<span class="string">&quot;CustomerAndOrder&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;customer_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;customerId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;customer_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;customerName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;orderList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Order&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;order_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;order_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCustomerAndOrdersByCustomerId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;CustomerAndOrder&quot;</span>&gt;</span></span><br><span class="line">    select t_customer.customer_id,customer_name,order_id,order_name, from t_customer</span><br><span class="line">    inner join t_order</span><br><span class="line">    on t_customer.customer_id = t_order.customer_id</span><br><span class="line">    weher t_customer.customer_id = #&#123;CustomerId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="多对多映射"><a class="markdownIt-Anchor" href="#多对多映射"></a> 多对多映射</h4>
<p>  学生表（id，name），老师表（id，name）。老师教多个学生，学生被多个老师教，<span style="color:#FF00FF;">中间表</span>（老师id，学生id）。学生类（id，name，teacherList），老师类（id，name）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;allStudentAndTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;s_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;s_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;teacherList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;t_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;tID&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;t_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;tName&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllStudentAndTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;allStudentAndTeacher&quot;</span>&gt;</span></span><br><span class="line">    select t_student.s_id,t_student.s_name,t_teacher.t_id,t_teacher.t_name from t_student</span><br><span class="line">    inner join t_inner on t_stuednt.s_id = t_inner.s_id</span><br><span class="line">    inner join  t_teacher on t_teacher.t_id = t_inner.t_id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="多表映射总结"><a class="markdownIt-Anchor" href="#多表映射总结"></a> 多表映射总结</h4>
<p>  想轻松封装，可以如下配置：<code>autoMappingBehavior</code>，如果配置为<code>FULL</code>，则可以省略<code>id</code>、<code>result</code> 等标签，但是如果省略了<code>id</code>标签，会出小bug。总结：配置为<code>FULL</code>时，要保留<code>id</code>标签和属性相关关系。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        NONE关闭自动映射,PARTIAL默认单表映射,FULL自动映射任何复杂的结果集（无论是否嵌套）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;FULL&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="动态sql"><a class="markdownIt-Anchor" href="#动态sql"></a> 动态SQL</h3>
<p>  </p>
<ul>
<li>
<p><code>if</code>和<code>where</code>标签</p>
<ul>
<li><code>if</code>只能判断，没有<code>else</code>。完成传值的基本判断。</li>
<li><code>where</code>标签可以根据标签内部是否有条件，追加<code>where</code>关键字，自动去除前面多余<code>and</code>和<code>or</code>。</li>
</ul>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">    select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            emp_id = $&#123;empId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_name = $&#123;empName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empSalary!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_salary = $&#123;empSalary&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empGender!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_gender= $&#123;empGender&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>set</code>标签，类比<code>where</code></p>
<ul>
<li><code>set</code>标签标签可以根据标签内部是否有条件，追加set关键字，会自动去除前后多余的<code>，</code>。</li>
<li>为了保证set没条件时，set关键字不追加，不会导致SQL语句报错，兜底修改必传且且修改无关，如id。</li>
</ul>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">    update t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        -- id必传</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            emp_id = $&#123;empId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            , emp_name = $&#123;empName&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empSalary!=null&quot;</span>&gt;</span></span><br><span class="line">            , emp_salary = $&#123;empSalary&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empGender!=null&quot;</span>&gt;</span></span><br><span class="line">            , emp_gender= $&#123;empGender&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where emp_id = $&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>trim</code>标签(了解)</p>
<ul>
<li>可以更加灵活编写SQL</li>
<li><code>prefix</code>属性：指定要动态添加的前缀</li>
<li><code>suffix</code>属性：指定要动态添加的后缀</li>
<li><code>prefixOverrides</code>属性：指定要动态去掉的前缀，使用“&quot;分隔有可能的多个值</li>
<li><code>suffixOverrides</code>属性：指定要动态去掉的后缀，使用&quot;”分隔有可能的多个值</li>
</ul>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">    select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and|or&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and|or&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            and  emp_id = $&#123;empId&#125; and --报错</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_name = $&#123;empName&#125; and --报错</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empSalary!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_salary = $&#123;empSalary&#125; and --报错</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empGender!=null&quot;</span>&gt;</span></span><br><span class="line">            and emp_gender= $&#123;empGender&#125; and --报错</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>choose</code>/<code>when</code>/<code>otherwise</code>标签</p>
<ul>
<li>在多个分支条件中，仅执行一个。</li>
<li>从上到下依次执行条件判断，遇到的第一个满足条件的分支会被采纳，被采纳分支后面的分支都将不被考虑。</li>
<li>如果所有的when分支都不满足，那么就执行otherwise分支。</li>
</ul>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;selectByCondition&quot;</span> resultType=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span><br><span class="line">    select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp</span><br><span class="line">    where</span><br><span class="line">    &lt;choose&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;empName!=null&quot;</span>&gt;emp_name = $&#123;empName&#125; &lt;/when&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;empSalary!=null&quot;</span>&gt;emp_name = $&#123;empSalary&#125; &lt;/when&gt;</span><br><span class="line">        &lt;when test=<span class="string">&quot;empGender!=null&quot;</span>&gt;emp_name = $&#123;empGender&#125; &lt;/when&gt;</span><br><span class="line">    &lt;otherwise&gt;<span class="number">1</span>=<span class="number">1</span>&lt;/otherwise&gt; -- 不这写，只是展示。改where标签就可</span><br><span class="line">    &lt;/choose&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>foreach</code>标签</p>
<ul>
<li>
<p><code>collection</code>：要遍历的集合或数组的名称或类型</p>
</li>
<li>
<p><code>item</code>：从集合或数组中每次循环取出来的值要存储的变量名</p>
</li>
<li>
<p><code>separator</code>：分隔符</p>
</li>
<li>
<p><code>open=&quot;(&quot;</code>：循环开始添加</p>
</li>
<li>
<p><code>close=&quot;)&quot;</code>：循环结束添加</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">    select emp_id empId,emp_name empName,emp_salary empSalary,emp_gender empGender from t_emp</span><br><span class="line">    where</span><br><span class="line">        emp_id in --(</span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">            --)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> &gt;</span></span><br><span class="line">    insert into t_emp(emp_name,emp_salary,emp_gender)</span><br><span class="line">    values</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span>  <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        (#&#123;emp.empName&#125;,#&#123;emp.empSalary&#125;,#&#123;emp.empGender&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span> -- 报错 默认一次连接 发送一次sql语句。将url上添加？allowMultiQueries=true</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;;&quot;</span>&gt;</span>-- 应该可以</span><br><span class="line">        update t_emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            --             id必传</span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">                emp_id = $&#123;emp.empId&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null&quot;</span>&gt;</span></span><br><span class="line">                , emp_name = $&#123;emp.empName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empSalary!=null&quot;</span>&gt;</span></span><br><span class="line">                , emp_salary = $&#123;emp.empSalary&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empGender!=null&quot;</span>&gt;</span></span><br><span class="line">                , emp_gender= $&#123;emp.empGender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where emp_id = $&#123;emp.empId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>sql</code>片段</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;sqlBase&quot;</span>&gt;</span></span><br><span class="line">    select t_customer.customer_id,customer_name,order_id,order_name, from t_customer</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectALL&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.quick.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;sqlBase&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="本地2021年视频"><a class="markdownIt-Anchor" href="#本地2021年视频"></a> （本地2021年视频）</h3>
<h4 id="内置参数"><a class="markdownIt-Anchor" href="#内置参数"></a> 内置参数</h4>
<p>_parameter：代表整个参数，①这个参数②这个map<br />
_databaseId：如果配置了DatabaseIdProvider标签，值为数据库别名，可以用来判读数据库写不同的sql</p>
<h4 id="绑定"><a class="markdownIt-Anchor" href="#绑定"></a> 绑定</h4>
<p><code>&lt;bind name=&quot;新变量名可：_原变量名&quot; value=&quot;'_'+likestr+'%'&quot;/&gt;</code>，可用于模糊查询，但不太好。</p>
<h4 id="缓存"><a class="markdownIt-Anchor" href="#缓存"></a> 缓存</h4>
<p>MyBatis系统中默认定义了两级缓存</p>
<ul>
<li>
<p>默认情况下，只有一级缓存（SqlSession级别的缓存，也称为本地缓存）开启。</p>
<p>失效情况：</p>
<ul>
<li>SqlSession不同</li>
<li>SqlSession相同，查询条件不同</li>
<li>SqlSession相同，两次查询之间进行了增删改</li>
<li>SqlSession相同，手动清空了</li>
</ul>
</li>
<li>
<p>二级缓存需要手动开启和配置，它是基于namespace级别的缓存。</p>
<p>为了提高扩展性。MyBatis定义了缓存接口Cache。可以通过实现Cache接口来自定义二级缓存</p>
<ul>
<li>
<p>一个会话，查询一条数据，这个数据就会被放在当前会话的一级缓存中</p>
</li>
<li>
<p>如果会话关闭，一级缓存中的数据会被保存到二级缓存中，新的会话查询信息，就可以参照二级缓存中的内容</p>
</li>
<li>
<p>不同namespace查出的数据会放在自己对应的缓存中（map）</p>
</li>
<li>
<p>使用</p>
<ol>
<li>
<p><code>&lt;setting name=&quot;cacheEnabled&quot;value=&quot;true&quot;/&gt;</code></p>
</li>
<li>
<p>mapper.xml里</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;缓存回收策略，类比408里的一些算法，LRU默认/FIFO/SOFT软引用/WAKE弱引用&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">flushInterval</span>=<span class="string">&quot;缓存刷新间隔，默认不清空，毫秒&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">readOnly</span>=<span class="string">&quot;非只读，利用序列化和反序列化的技术克隆一份数据给你&quot;</span> </span></span><br><span class="line"><span class="tag">       <span class="attr">size</span>=<span class="string">&quot;缓存多少个元素&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">type</span>=<span class="string">&quot;指定自定义缓存全类名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>pojo实现序列化接口</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>有关设置</p>
<ul>
<li>查询标签里添加属性<code>useCache=&quot;true默认&quot;</code>，false不使用缓存（除了一级缓存使用，不使用二级缓存）</li>
<li>增删改标签里添加属性<code>flushCache=&quot;true默认&quot;</code>，执行完后清除一级、二级缓存</li>
<li><code>SqlSession.clearCache();</code>当前会话的一级缓存</li>
<li>localCacheScope本地缓存作用域，SESSION，STATEMENT可以禁用一级缓存</li>
</ul>
</li>
<li>
<p>第三方缓存（cache接口）</p>
<ul>
<li>
<p><code>putObject</code>方法放到第三方</p>
</li>
<li>
<p><code>getObject</code>方法从第三方拿</p>
</li>
<li>
<p>整合ehcache</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ehcache-core</span><br><span class="line">slf4j-api</span><br><span class="line">slf4j-log4j漏洞</span><br><span class="line">mybatis-ehcache</span><br></pre></td></tr></table></figure>
<p>excahe.xml配置，网上找。mapper.xml配置缓存实现类</p>
</li>
</ul>
</li>
</ul>
<h3 id="高级"><a class="markdownIt-Anchor" href="#高级"></a> 高级</h3>
<h4 id="批量注册"><a class="markdownIt-Anchor" href="#批量注册"></a> 批量注册</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        package扫描包，包下的接口名就是映射文件的名，映射文件的路径就是resources日录下的路径((接口路径).replaceAll(&quot;.&quot;,&quot;/&quot;))--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.quick.mapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="分页pagehelper插件本质拦截器"><a class="markdownIt-Anchor" href="#分页pagehelper插件本质拦截器"></a> 分页PageHelper插件(本质拦截器)</h4>
<p>  MyBatis对插件进行了标准化的设计，并提供了一套可扩展的插件机制。插件可以在用手语句执行过程中进行扫<br />
截，并充许通过自定义处理程序来拦截和修改SQL语句、映射语句的结果等。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查询之前分页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启分页</span></span><br><span class="line">PageHelper.startPage(当前页<span class="number">1</span>,页大小<span class="number">3</span>);</span><br><span class="line"><span class="comment">//查询</span></span><br><span class="line"><span class="comment">//……</span></span><br><span class="line"><span class="comment">//封装</span></span><br><span class="line">PageInfo; <span class="comment">//对象(有中文注释)</span></span><br><span class="line"><span class="comment">//可继续封装</span></span><br><span class="line"><span class="comment">//返回结果</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<h4 id="逆向工程"><a class="markdownIt-Anchor" href="#逆向工程"></a> 逆向工程</h4>
<p>  ORM（Objectr Relational Mapping，对象-关系映射）是一种将数据库和面向对象编程语言中的对象之间进行转换的技术。它将对象和关系数据库的概念进行映射，通过一系列的操作将对象关联到数据表中的一行或多行上。</p>
<p>  MyBatis的逆向工程是一种自动化生成持久层代码和映射文件的工具，它可以根据数据库表结构和设置的参数生<br />
成对应的实体类、Mapper.xml文件、Mapper接口等代码文件，简化了开发者手动生成的过程。逆向工程使开发者<br />
可以快速地构建起DAO层，并快速上手进行业务开发<br />
  MyBatis的逆可工程有两种方式：通过MyBatisGenerator插件实现和通过Maven插件实现。无论是哪种方式，逆<br />
可工程一般需要指定一些配置参数，例收如数据库连接URL、用户名、密码、要生成的表名、生成的文件路等等<br />
总的来说，MyBatis的逆尚工程为程序员提供了一种方便快捷的方式，能够快速地生成持久层代码和映射文件<br />
是半自动ORM思维像全自动发展的过程，提高程序员的开发效率。</p>
<p><strong>注意：逆向工程只能生成单表crud的操作，多表查询依然需要自己编写！</strong></p>
<p>不用：①映射文件里的insert太长了</p>
<h2 id="前面回顾"><a class="markdownIt-Anchor" href="#前面回顾"></a> 前面回顾</h2>
<img data-src="https://s2.loli.net/2024/03/02/ZBzDv4oAyhq5wPj.png" alt="ssm简易问答" style="zoom:80%;" />
<h2 id="ssm整合"><a class="markdownIt-Anchor" href="#ssm整合"></a> SSM整合</h2>
<table>
<thead>
<tr>
<th style="text-align:center">配置名</th>
<th>对应内容</th>
<th>对应容器</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">spring-mvc.xml</td>
<td>controller，springmvc相关</td>
<td>web容器</td>
</tr>
<tr>
<td style="text-align:center">spring-service.xml</td>
<td>service，aop，tx相关</td>
<td>root容器</td>
</tr>
<tr>
<td style="text-align:center">spring-mapper.xml</td>
<td>mapper,datasource,mybatis相关</td>
<td>root容器</td>
</tr>
</tbody>
</table>
<h3 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h3>
<ul>
<li>
<p>jdbc.properties</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>mybatis-config.xml</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SLF4J&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    不用了，使用druid，所以在spring-mapper.xml里--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;environments default=&quot;MySQL&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;environment id=&quot;MySQL&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;dataSource type=&quot;POOLED&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;/dataSource&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/environment&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/environments&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>spring-mapper.xml</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    mapper,datasource,mybatis相关--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    利用mybatis-springy依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            引入配置文件--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;/&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 不引入引入配置文件，直接配--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 平替settings --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configuration&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                创建Configuration对象，交给SqlSessionFactoryBean，（getObject（）），赋值给sqlSessionFactory属性configuration--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.ibatis.session.Configuration&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.apache.ibatis.logging.slf4j.Slf4jImpl&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            平替的是typeAliases+package--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            平替插件--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;plugins&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">array</span>&gt;</span><span class="comment">&lt;!--数组--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                不同关系型数据库分页的sql不同--&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;helperDialect&quot;</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            平替的是mappers标签+package--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/atguigu/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            引入德鲁伊dataSource--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    使用德鲁伊--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driverClassName&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    Spring管理Mapper接口的代理对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.atguigu.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>spring-mvc.xml</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    开启组件注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    装配HandlerMapping、HandlerAdapter、Jackson--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    静态资源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>spring-service.xml</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启组件注解扫描--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.services&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    开启aop支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    装配事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    开启事务注解支持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>webapp/WEB-INF/wen.xml</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mapper.xml,classpath:spring-service.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
</ul>
<p>我保存了模板。</p>
<h3 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h3>
<ul>
<li>
<p>EmployeeController</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.services.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.utils.R;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">showAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = employeeService.showAll();</span><br><span class="line">        <span class="keyword">return</span> R.ok(employees);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>EmployeeService</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.services;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line">    List&lt;Employee&gt; <span class="title function_">showAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.services.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mapper.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.services.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//怎么注入的呢?动态代理对象程序运行生产的，并不在容器里.</span></span><br><span class="line">    <span class="comment">//spring-mapper.xml里配置MapperScannerConfigurer，将生成的代理对象交给spring</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeMapper employeeMapper;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(readOnly = true)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">showAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.selectAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>mapper</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeMapper</span> &#123;</span><br><span class="line">    List&lt;Employee&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>Employee</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer empId;</span><br><span class="line">    <span class="keyword">private</span> String empName;</span><br><span class="line">    <span class="keyword">private</span> Double empSalary;</span><br><span class="line">    <span class="keyword">private</span> String empGender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>R</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.data = data;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">fail</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.code = <span class="number">500</span>;</span><br><span class="line">        r.flag = <span class="literal">false</span>;</span><br><span class="line">        r.data = data;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
</ul>
<h3 id="部分测试"><a class="markdownIt-Anchor" href="#部分测试"></a> 部分测试</h3>
<ul>
<li>
<p>EmployeeMapperTest</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mapper.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeMapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="comment">//        原生的mybatis写法 产生了sqlSessionFactory(要放到ioc容器)、sqlSession、employeeMapper，</span></span><br><span class="line"><span class="comment">//        1. 读取配置文件</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//        2. 构建SqlSessionFactory</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line"><span class="comment">//        3. 获取SqlSession</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//        4. 获取Mapper接口代理对象</span></span><br><span class="line">        <span class="type">EmployeeMapper</span> <span class="variable">employeeMapper</span> <span class="operator">=</span> sqlSession.getMapper(EmployeeMapper.class);</span><br><span class="line"><span class="comment">//        5. 使用</span></span><br><span class="line">        List&lt;Employee&gt; employees = employeeMapper.selectAll();</span><br><span class="line"><span class="comment">//        6. 处理结果</span></span><br><span class="line">        employees.forEach(employee -&gt; log.info(employee.toString()));</span><br><span class="line"><span class="comment">//        7. 关闭 释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
<li>
<p>EmployeeServiceTest</p>
  <div><div class="fold_hider"><div class="close hider_title">点击显/隐内容</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright (C), 2015-2024, px有限公司</span></span><br><span class="line"><span class="comment"> * FileName: EmployeeServiceTest</span></span><br><span class="line"><span class="comment"> * Author:   15081</span></span><br><span class="line"><span class="comment"> * Date:     2024/3/2 17:01</span></span><br><span class="line"><span class="comment"> * Description:</span></span><br><span class="line"><span class="comment"> * History:</span></span><br><span class="line"><span class="comment"> * &lt;author&gt;          &lt;time&gt;          &lt;version&gt;          &lt;desc&gt;</span></span><br><span class="line"><span class="comment"> * px                修改时间           版本号              描述</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.services.EmployeeService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit.jupiter.SpringJUnitConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 〈一句话功能简述〉&lt;br&gt; </span></span><br><span class="line"><span class="comment"> * 〈〉</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 15081</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2024/3/2</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringJUnitConfig(locations = &#123;&quot;classpath:spring-mapper.xml&quot;,&quot;classpath:spring-service.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = employeeService.showAll();</span><br><span class="line">        employees.forEach(employee -&gt; log.info(employee.toString()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
</li>
</ul>
<h3 id="我总结"><a class="markdownIt-Anchor" href="#我总结"></a> 我总结</h3>
<p><img data-src="https://s2.loli.net/2024/03/02/EwSRc2Ixz1POKBf.png" alt="SSM整合" /></p>
<h2 id="springboot"><a class="markdownIt-Anchor" href="#springboot"></a> SpringBoot</h2>
<h3 id="简介-3"><a class="markdownIt-Anchor" href="#简介-3"></a> 简介</h3>
<blockquote>
<p>Level up your Java™ code</p>
<p>With <a target="_blank" rel="noopener" href="https://spring.io/projects/spring-boot">Spring Boot</a> in your app, just a few lines of code is all you need to start building services like a boss.</p>
<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can “just run”.</p>
<ul>
<li>Create stand-alone Spring applications</li>
<li>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</li>
<li>Provide opinionated ‘starter’ dependencies to simplify your build configuration</li>
<li>Automatically configure Spring and 3rd party libraries whenever possible</li>
<li>Provide production-ready features such as metrics, health checks, and externalized configuration</li>
<li>Absolutely no code generation and no requirement for XML configuration</li>
</ul>
</blockquote>
<h3 id="快速入门-2"><a class="markdownIt-Anchor" href="#快速入门-2"></a> 快速入门</h3>
<ul>
<li>
<p>依赖</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    继承springboot父亲工程--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>controller</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello,SpringBoot3&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>application</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(HelloApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>如果配置，application.properties</p>
  <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8001</span></span><br><span class="line"><span class="comment"># 所有的配置可见依赖spring-boot-autoconfigure的spring-configuration-metadata.json文件 </span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h3>
<ul>
<li>
<p>依赖如何导入：maven的依赖传递原则</p>
</li>
<li>
<p>版本号不用写：</p>
<p>父项目spring-boot-starter-parent，管理的是配置、插件</p>
<p>父项目的父项目spring-boot-dependencies，管理的依赖及依赖的版本</p>
<p>父项目版本仲裁中心，把所有常见的jar的依赖版本都声明好了</p>
<p>不喜欢这个版本号，找到版本名，在子项目里覆盖</p>
</li>
<li>
<p>缺少依赖，尽可能用父工程，也可以自己导</p>
</li>
</ul>
<h3 id="配置文件"><a class="markdownIt-Anchor" href="#配置文件"></a> 配置文件</h3>
<ul>
<li>
<p>application.properties</p>
<p>所有的配置可见依赖spring-boot-autoconfigure的spring-configuration-metadata.json文件</p>
</li>
<li>
<p>application.yaml/yml</p>
<p>可以减少一些重复的单词</p>
</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8001</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/springboot</span></span><br><span class="line"><span class="comment"># 自定义</span></span><br><span class="line"><span class="attr">spring.jdbc.driverClassName</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis</span></span><br><span class="line"><span class="attr">spring.jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.jdbc.password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="comment">//导入配置文件已经完成了</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceProperties</span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.jdbc.driverClassName&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driverClassName;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>DataSourceProperties就可以进行<code>@Autowired</code>了。</p>
<ul>
<li>
<p>自定义配置批量注入</p>
<p>使用<code>@ConfigurationProperties</code>注解指定前缀就可以利用属性名批量注入了</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.jdbc&quot;)</span></span><br><span class="line"><span class="comment">//导入配置文件已经完成了</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceProperties</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String driverClassName;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多环境profile切换配置（开发、测试、预生产、生产）</p>
<ul>
<li>
<p>application-dev.yaml 开发</p>
</li>
<li>
<p>application-test.yaml 测试</p>
</li>
<li>
<p>application-prod.yaml 生产</p>
</li>
<li>
<p>application.yaml选择上面的一个进行激活</p>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">	<span class="attr">profiles:</span></span><br><span class="line">		<span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="自动配置原理"><a class="markdownIt-Anchor" href="#自动配置原理"></a> 自动配置原理</h3>
<ul>
<li><code>@SpringBootApplication</code>标注的类就是主程序类</li>
<li>SpringBoot只会扫描主程序所在的包及其下面的子包，自动的component-scan功能</li>
<li>自定义扫描路径
<ul>
<li><code>@SpringBootApplication(scanBasePackages=&quot;com.atguigu&quot;)</code></li>
<li><code>@ComponentScan(&quot;com.atguigu&quot;）</code>直接指定扫描的路径</li>
</ul>
</li>
<li>所有能在配置文件中写的配置内容，都是和某 一个XxxProperties属性类进行绑定的
<ul>
<li>ServerProperties绑定了所有Tomcat服务器有关的配置</li>
<li>MultipartProperties绑定了所有文件上传相关的配置</li>
</ul>
</li>
<li>按需加载自动配置
<ul>
<li>导入场景spring-boot-starter-web</li>
<li>starter，基础核心starter场景启动器除了会导入相关功能依赖，导入一个spring-boot-starter，是所有starter的</li>
<li>spring-boot-starter导入了 个包spring-boot-autoconfigure。包里面都是各种场景的AutoConfiguration自动配置类</li>
<li>虽然全场景的自动配置都在spring-boot-autoconfigure这个包，但是不全都开启的</li>
</ul>
</li>
<li><code>@EnableAutoconfiguration</code>：SpringBoot开启自动配置的核心</li>
</ul>
<img data-src="https://s2.loli.net/2024/03/03/ByqgerLWUYz2SZ4.png" alt="能生效的自动配置" style="zoom:80%;" />
<img data-src="https://s2.loli.net/2024/03/03/M3jGuOpsfWJc8H2.png" alt="springbot自动配置原理" style="zoom:80%;" />
<img data-src="https://img-blog.csdnimg.cn/7cdba1cfac844a27b01c03bf7b74d27f.png" alt="自动配置流程" style="zoom:80%;" />
<h3 id="自定义启动器可以理解配置原理"><a class="markdownIt-Anchor" href="#自定义启动器可以理解配置原理"></a> 自定义启动器（可以理解配置原理）</h3>
<p>场景：抽取聊天机器人场景，它可以打招呼</p>
<p>效果：任何项目导入此starter都具有打招呼功能，并且问候语中的人名需要可以在配置文件中修改</p>
<ol>
<li>
<p>创建模块,继承父工程，导入依赖</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    继承springboot父亲工程--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写配置读取RobotProperties配置类</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aiguigu.robot.properties;</span><br><span class="line"><span class="meta">@Component</span><span class="comment">//作为组件注入</span></span><br><span class="line"><span class="meta">@Data</span><span class="comment">//get和set</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;robot&quot;)</span><span class="comment">//指明要如robot.xxx配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写RobotService组件，绑定RobotProperties配置类</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aiguigu.robot.service;</span><br><span class="line"><span class="keyword">import</span> com.aiguigu.robot.properties.RobotProperties;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RobotProperties robotProperties;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;你好，名字是%s，年龄是%s,邮箱是%s&quot;</span>,robotProperties.getName(),robotProperties.getAge(),robotProperties.getEmail());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写RobotAutoConfiguration，RobotService.class和RobotProperties.class依赖它，</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aiguigu.robot.config;</span><br><span class="line"><span class="keyword">import</span> com.aiguigu.robot.properties.RobotProperties;</span><br><span class="line"><span class="keyword">import</span> com.aiguigu.robot.service.RobotService;</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//RobotAutoConfiguration触发，它俩也会触发。使得RobotService组件可以注入RobotProperties属性类</span></span><br><span class="line"><span class="meta">@Import(&#123;RobotService.class, RobotProperties.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotAutoConfiguration</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>，可以从autoconfigure依赖里复制。</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.aiguigu.robot.config.RobotAutoConfiguration</span><br></pre></td></tr></table></figure>
<p>想让SpringBoot来读取进行自动配置，要读这个文件。所以①SpingBoot给你写好②自己写。之后其他项目要用这个启动器，它会读这个文件，进行自动加载自动配置。</p>
</li>
<li>
<p>编写注解EnableRobotAutoConfiguration。<strong>@EnableAutoconfiguration</strong>：SpringBoot开启自动配置的核心，但它不认识我们写的类，故自己写一个注解（厂家可以让SpringBoot的注解把他的也给启动）。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.aiguigu.robot.config;</span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span><span class="comment">//上面三个可以找个注解复制</span></span><br><span class="line"><span class="meta">@Import(RobotAutoConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableRobotAutoConfiguration &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个注解写在SpringBoot启动类上，会导入RobotAutoConfiguration.class配置类，配置类又会导入RobotService.class组件, RobotProperties.class属性类。启动时，优先加载第五步的文件，而<code>@Import</code>注解程序运行过程中生效，故用注解不会加载了，直接用。</p>
</li>
<li>
<p>使用，</p>
<ol>
<li>
<p>创建，导入前面创建的模块</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-robot-starter模块名<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写配置文件，前面在注解上面要求了前缀</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">robot:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">&quot;\u5C0F\u7231\u540C\u5B66&quot;</span> <span class="comment"># 不加双引号，写中文，String输出的是Unicode </span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">15</span></span><br><span class="line">  <span class="attr">email:</span> <span class="number">123</span><span class="string">@gmail.com</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写UseRobotConroller</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.controller;</span><br><span class="line"><span class="keyword">import</span> com.aiguigu.robot.service.RobotService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/robot&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UseRobotConroller</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RobotService robotService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHi</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> robotService.sayHello();</span><br><span class="line">        System.out.println(<span class="string">&quot;s = &quot;</span> + s);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写启动类RobotApplication</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu;</span><br><span class="line"><span class="keyword">import</span> com.aiguigu.robot.config.EnableRobotAutoConfiguration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableRobotAutoConfiguration</span><span class="comment">//自己模块里编写的注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(RobotApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="整合"><a class="markdownIt-Anchor" href="#整合"></a> 整合</h3>
<h4 id="整合mvc"><a class="markdownIt-Anchor" href="#整合mvc"></a> 整合MVC</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    继承springboot父亲工程--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>静态资源默认路径如下：<img data-src="https://s2.loli.net/2024/03/03/2Dd1g5EsMx4waot.png" alt="静态资源路径" /></p>
<p>如果不满意，WebProperties属性类里有一个静态类Resources，故可以在配置文件里进行配置。</p>
</li>
<li>
<p>拦截器：自定义好拦截器后注入到容器里，需要一个实现WebMvcConfigurer接口的<code>@Configuration</code>配置类，该类还要实现<code>addInterceptors(InterceptorRegistry registry)</code>，方法里<code>registry.addInterceptor(自动注入myInterceptor);</code>默认所以都拦截，添加或排除可以继续点方法，形成链。</p>
</li>
</ul>
<h3 id="整合mybatis"><a class="markdownIt-Anchor" href="#整合mybatis"></a> 整合MyBatis</h3>
<p>  在web的基础上添加mybatis的starter。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    继承springboot父亲工程--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        mysql要自己导，比较数据库那么多而且它的starter老--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        德鲁伊不用导，SpringBoot自带一个连接池（日语：光，东欧人在日本写的）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  简单配置一下：数据库连接池和mybatis的别名、日志、下划线转驼峰、mapper.xml位置</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql:///mybatis</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.atguigu.pojo</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.slf4j.Slf4jImpl</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 我：接口的代理对象交给spring的方式改为写注解 @Mapper//将该接口的动态代理对象放入IoC容器</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:/mappers/*.xml</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/ssm</span></span><br></pre></td></tr></table></figure>
<p>  <span style="color:#33FF33;">使用<code>@Mapper</code>注解将该接口的动态代理对象放入IoC容器</span></p>
<h3 id="整合定时任务"><a class="markdownIt-Anchor" href="#整合定时任务"></a> 整合定时任务</h3>
<ul>
<li>自动触发，无需手动触发动作</li>
<li>时间准确，会在准确的时间内进行业务处理</li>
<li>低耦合，不影响其他业务功能</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        为了获取本地时间，而不是时间戳--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  写一个类，在类里写相关的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduleTask</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeService employeeService;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Scheduled(cron = &quot;0 0 20 * * ?&quot;)</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0/5 * * * * ?&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">DateTime</span> <span class="variable">dateTime</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DateTime</span>();</span><br><span class="line">        <span class="type">DateTime</span> <span class="variable">tomorrow</span> <span class="operator">=</span> dateTime.plusDays(<span class="number">1</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">timeString</span> <span class="operator">=</span> dateTime.toString(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;timeString = &quot;</span> + timeString);</span><br><span class="line">        List&lt;Employee&gt; employees = employeeService.showAll();</span><br><span class="line">        System.out.println(<span class="string">&quot;employees = &quot;</span> + employees);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可见<code>@Scheduled(cron = &quot;0/5 * * * * ?&quot;)</code>注解和cron表达式就可以指定定时任务。</p>
<p>相要启动还需要在启动类上添加<code>@EnableScheduling</code>注解。</p>
<h3 id="打包"><a class="markdownIt-Anchor" href="#打包"></a> 打包</h3>
<p>  添加打包插件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="未解决的问题"><a class="markdownIt-Anchor" href="#未解决的问题"></a> 未解决的问题</h2>
<ul>
<li>
<p>从 <code>getConnection</code> 点进去，我们可以发现返回值上有括号，例如 <code>return (con);</code> 我不明白括号有什么用。</p>
</li>
<li>
<p>从 HttpServlet 源码里，让我想起 http 请求。为什么我常见的 put、delete 等要用 post 发送并指定 method ，是浏览器不支持标准的 http 请求吗？能不能不做一些配置，直接就可以见名知意地发送想发送的请求？<span style="color:#00FFFF;"> 似乎有点知道了：</span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/wwct/p/12396799.html">通过 Ajax 发送 PUT、DELETE 请求的两种实现方式 </a></p>
</li>
</ul>
<h2 id="工具类"><a class="markdownIt-Anchor" href="#工具类"></a> 工具类</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.data = data;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">fail</span><span class="params">(Object data)</span>&#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.code = <span class="number">500</span>;</span><br><span class="line">        r.flag = <span class="literal">false</span>;</span><br><span class="line">        r.data = data;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.quick.uitls;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"><span class="comment">//        1. 读取MyBatis配置文件</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2>
<p>mysql数据库的boolean是0和1</p>
<p>mapper.xml里的sql不加分号，比如分页后面追加limit</p>
<p>EmployeeController里有一个方法，返回的不是视图名，也不是String，而是一个自定义对象会报以下错误，解决方式是：@RestController或者@ResponseBody</p>
<p>Circular view path [employee]: would dispatch back to the current handler URL [/employee] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>打赏</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="小可爱 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="小可爱 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>



          <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/">Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 小可爱 的个人博客">小可爱</a></p>
  <p><span>发布时间:</span>2024年01月27日 - 00:34</p>
  <p><span>最后更新:</span>2024年03月06日 - 00:30</p>
  <p><span>原始链接:</span><a href="/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/" title="Maven、Spring、SpringMVC、MyBatis、SSM整合、SpringBoot">https://19980118.xyz/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://19980118.xyz/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
	});
    });  
</script>


      
</div>
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
              <a href="/tags/Spring/" rel="tag"># Spring</a>
              <a href="/tags/SpringMVC/" rel="tag"># SpringMVC</a>
              <a href="/tags/Maven/" rel="tag"># Maven</a>
              <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
              <a href="/tags/MyBatis/" rel="tag"># MyBatis</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/01/22/%E4%B8%AA%E4%BA%BA%E7%AE%80%E5%8E%86/" rel="prev" title="个人简历">
                  <i class="fa fa-chevron-left"></i> 个人简历
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/03/11/%E9%AA%91%E8%87%AA%E8%A1%8C%E8%BD%A6%E5%8E%BB%E6%89%BE%E5%B7%A5%E4%BD%9C/" rel="next" title="骑自行车去找工作">
                  骑自行车去找工作 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小可爱</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">498k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">7:33</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>




<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>  
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("07/15/2019 13:14:21");//此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>


  <script src='https://unpkg.com/mermaid@/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      
      mermaid.initialize({theme: 'forest'});
    }
  </script>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/Q&A.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script class="next-config" data-name="chatra" type="application/json">{"enable":true,"async":true,"id":"QoLQx5ntEgvMDisbP"}</script>
<script src="/js/third-party/chat/chatra.js"></script>
<script async src="https://call.chatra.io/chatra.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.1.7/mermaid.min.js","integrity":"sha256-G58AID1YoX5YaEtWfXSI0VLrZ6N4kvNvwg0BI8zUFxE="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.2/katex.min.css" integrity="sha256-oWCabCfPd4Oi21wqZezBSz/anto4VYcJqc9sM9IzQTk=" crossorigin="anonymous">
  <script class="next-config" data-name="katex" type="application/json">{"copy_tex_js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.2/contrib/copy-tex.min.js","integrity":"sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="}}</script>
  <script src="/js/third-party/math/katex.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://comm.19980118.xyz","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"locale":{"placeholder":"🤣一起来玩，留下你的足迹吧~。\n 🚀昵称使用QQ号可以自动补全邮箱和显示头像昵称等信息呢。\n 💣请文明评论哦禁止恶意评论！\n ⚠️公开网络空间，请不要发表任何包含个人或其他人的隐私信息。\n 注：评论不成功请二次评论，或者使用魔法。"},"avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":["nick","mail"],"libUrl":"https://unpkg.com/@waline/client@v2/dist/waline.js","emoji":"https://unpkg.com/@waline/emojis@1.0.1/weibo","el":"#waline","comment":true,"path":"/2024/01/27/Maven%E3%80%81Spring%E3%80%81SpringMVC%E3%80%81MyBatis%E3%80%81SSM%E6%95%B4%E5%90%88%E3%80%81SpringBoot/"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>


  <!-- 点击出现社会主义彩色文字 -->
 <!--<script type="text/javascript" src="/js/shzyhxjzg.js"></script>
--><!-- 点击动画 --><!--
 <script type="text/javascript" src="/js/love.js"></script>
-->
<!-- 点击出现社会主义彩色文字 --><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script><!-- 点击出现爱心 --><script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script>
<!-- 天气 -->
<script type="text/javascript">
WIDGET = {FID: 'apV00Hp0nY'}
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
<!-- 动态标签 -->
<script type="text/javascript">
    var OriginTitile = document.title,
        st;
    document.addEventListener("visibilitychange", function () {
        document.hidden ? (document.title = "看不见我🙈~看不见我🙈~", clearTimeout(st)) : (document.title =
            "(๑•̀ㅂ•́) ✧被发现了～", st = setTimeout(function () {
                document.title = OriginTitile
            }, 3e3))
    })
</script>
<!-- 折叠 --><!-- 
<script type="text/javascript">
$(document).ready(function(){
    $(document).on('click', '.fold_hider', function(){
        $('>.fold', this.parentNode).slideToggle();
        $('>:first', this).toggleClass('open');
    });
    //默认情况下折叠
    $("div.fold").css("display","none");
});
</script> -->
<!-- 背景 -->

<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>



<script src="/live2d-widget/autoload.js"></script>
  
<script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":0,"vOffset":-20},"mobile":{"show":false,"scale":0.5},"react":{"opacity":0.7},"log":false});</script></body>

</html>
